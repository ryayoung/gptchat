var ls=Object.defineProperty;var cs=(n,e,t)=>e in n?ls(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var g=(n,e,t)=>(cs(n,typeof e!="symbol"?e+"":e,t),t),Ft=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var U=(n,e,t)=>(Ft(n,e,"read from private field"),t?t.call(n):e.get(n)),Y=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var De=(n,e,t)=>(Ft(n,e,"access private method"),t);import Ut from"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/es/highlight.min.js";import{io as as}from"https://cdn.socket.io/4.7.2/socket.io.esm.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const vt=()=>{};function we(n){for(var e=0;e<n.length;e++)n[e]()}function us(n,e,t){if(n==null)return e(void 0),t&&t(void 0),vt;const s=n.subscribe(e,t);return s.unsubscribe?()=>s.unsubscribe():s}var se=Array.isArray,fs=Array.from,hs=Object.keys,ps=Object.assign,Qe=Object.defineProperty,W=Object.getOwnPropertyDescriptor;function ft(n){return typeof n=="function"}const Ui=1,qi=2,Bi=4,Hi=8,Zi=16,ji=64,ds=1,gs=4,ms=8,qt=["touchstart","touchmove","touchend"],q=Symbol("$state"),_s=Object.prototype,ks=Array.prototype,xs=Object.getPrototypeOf,ys=Object.isFrozen;function v(n,e=!0){if(typeof n=="object"&&n!=null&&!ys(n)){if(q in n)return n[q].p;const t=xs(n);if(t===_s||t===ks){const s=new Proxy(n,ws);return Qe(n,q,{value:bs(n,s,e),writable:!1}),s}}return n}function bs(n,e,t){return{s:new Map,v:P(0),a:se(n),i:t,p:e}}const ws={defineProperty(n,e,t){if(t.value){const s=n[q],r=s.s.get(e);r!==void 0&&A(r,v(t.value,s.i))}return Reflect.defineProperty(n,e,t)},deleteProperty(n,e){const t=n[q],s=t.s.get(e),r=t.a,i=delete n[e];if(r&&i){const o=t.s.get("length"),l=n.length-1;o!==void 0&&o.v!==l&&A(o,l)}return s!==void 0&&A(s,Z),e in n&&Zt(t.v),i},get(n,e,t){var i;const s=n[q];let r=s.s.get(e);if(r===void 0&&(Bt()||Ve)&&(!(e in n)||(i=W(n,e))!=null&&i.writable)&&(r=(s.i?P:Ge)(v(n[e],s.i)),s.s.set(e,r)),r!==void 0){const o=T(r);return o===Z?void 0:o}return Reflect.get(n,e,t)},getOwnPropertyDescriptor(n,e){const t=Reflect.getOwnPropertyDescriptor(n,e);if(t&&"value"in t){const r=n[q].s.get(e);r&&(t.value=T(r))}return t},has(n,e){var i;if(e===q)return!0;const t=n[q],s=Reflect.has(n,e);let r=t.s.get(e);return(r!==void 0||Bt()&&(!s||(i=W(n,e))!=null&&i.writable))&&(r===void 0&&(r=(t.i?P:Ge)(s?v(n[e],t.i):Z),t.s.set(e,r)),T(r)===Z)?!1:s},set(n,e,t){const s=n[q],r=s.s.get(e);r!==void 0&&A(r,v(t,s.i));const i=s.a,o=!(e in n);if(i&&e==="length")for(let l=t;l<n.length;l+=1){const c=s.s.get(l+"");c!==void 0&&A(c,Z)}if(o&&Zt(s.v),n[e]=t,i&&o){const l=s.s.get("length"),c=n.length;l!==void 0&&l.v!==c&&A(l,c)}return!0},ownKeys(n){const e=n[q];return T(e.v),Reflect.ownKeys(n)}},un=1,ve=2,Oe=4,ze=8,he=16,pe=64,de=128,N=256,L=512,Te=1024,dt=2048,rt=4096,it=Oe|ze|he,fn=0,vs=1,Z=Symbol(),hn=Symbol();let je=fn,Ye=!1,We=!1,z=[],ae=[],gt=[],Ee=0,Q=null,k=null,S=null,O=0,G=null,X=!1,mt=!1,xe=!1,C=null,w=null,Ve=!1;function Je(n){const e=n||w;return e!==null&&e.r}function pn(n,e){return n===e}function Ts(n,e){return{c:null,e:pn,f:n,v:e,x:null}}function dn(n,e,t){return{b:t,c:null,d:null,e:null,f:n,i:null,r:null,v:e,x:null,y:null}}function gn(n,e){const t=n.r;t===null?n.r=[e]:t.push(e)}function Tt(n){const e=n.f;if(e&L||n.v===Z)return!0;if(e&Te){const t=n.d;if(t!==null){const s=t.length;let r;for(r=0;r<s;r++){const i=t[r];if(i.f&Te&&!Tt(i)){K(i,N);continue}if(i.f&L)if(i.f&ve){if(bn(i,!0),n.f&L)return!0}else return!0}}}return!1}function mn(n){const e=n.i,t=S,s=O,r=G,i=Q,o=C,l=w,c=xe,u=(n.f&he)!==0,a=X;S=null,O=0,G=null,Q=n,C=n.b,w=n.x,xe=k===null&&(n.f&de)!==0,X=!1,u&&(w==null?void 0:w.u)!=null&&w.u.e();try{let h;u?h=e(n.b):h=e();let f=n.d;if(S!==null){let p;if(f!==null){const m=f.length,d=m>16?new Set(S):null;for(p=O;p<m;p++){const _=f[p];(d!==null&&!d.has(_)||!S.includes(_))&&_n(n,_,!1)}}if(f!==null&&O>0)for(f.length=O+S.length,p=0;p<S.length;p++)f[O+p]=S[p];else n.d=f=S;if(!xe)for(p=O;p<f.length;p++){const m=f[p],d=m.c;d===null?m.c=[n]:d[d.length-1]!==n&&d.push(n)}}else f!==null&&O<f.length&&(ot(n,O,!1),f.length=O);return h}finally{S=t,O=s,G=r,Q=i,C=o,w=l,xe=c,X=a}}function _n(n,e,t){const s=e.c;let r=0;if(s!==null){r=s.length-1;const i=s.indexOf(n);i!==-1&&(r===0?e.c=null:(s[i]=s[r],s.pop()))}t&&r===0&&e.f&de&&(K(e,L),ot(e,0,!0))}function ot(n,e,t){const s=n.d;if(s!==null){let r;for(r=e;r<s.length;r++){const i=s[r];_n(n,i,t)}}}function kn(n){const e=n.r;if(n.r=null,e!==null){let t;for(t=0;t<e.length;t++){const s=e[t];s.f&it?B(s):(ot(s,0,!0),s.d=null)}}}function Es(n,e){if(n!==null)throw e}function J(n){if(n.f&rt)return;const e=n.v,t=k;k=n;try{kn(n),e!==null&&e();const r=mn(n);typeof r=="function"&&(n.v=r)}catch(r){const i=n.b;if(i!==null)Es(i,r);else throw r}finally{k=t}const s=n.x;Je(s)&&n.f&ze&&z.length>0&&As(s)}function xn(){if(Ee>100)throw new Error("ERR_SVELTE_TOO_MANY_UPDATES");Ee++}function ue(n){const e=n.length;if(e>0){xn();let t;for(t=0;t<e;t++){const s=n[t],r=s.f;r&(rt|dt)||(Tt(s)?(K(s,N),J(s)):r&Te&&K(s,N))}n.length=0}}function Ss(){if(Ye=!1,Ee>101)return;const n=z,e=ae;z=[],ae=[],ue(n),ue(e),Ye||(Ee=0)}function ge(n,e){const t=n.f;e?(J(n),K(n,N)):(je===fn&&(Ye||(Ye=!0,queueMicrotask(Ss))),t&Oe?ae.push(n):z.push(n))}function yn(){We=!1;const n=gt.slice();gt=[],we(n)}function $s(n){We||(We=!0,setTimeout(yn,0)),gt.push(n)}function Rs(){const n=[];for(let e=0;e<z.length;e++){const t=z[e];t.f&he&&t.x===w&&(n.push(t),z.splice(e,1),e--)}ue(n)}function As(n){const e=[];for(let t=0;t<z.length;t++){const s=z[t];s.f&ze&&s.x===n&&(e.push(s),z.splice(t,1),t--)}ue(e)}function Et(n){const e=je,t=z,s=ae;try{xn();const r=[],i=[];je=vs,z=r,ae=i,ue(t),ue(s),n!==void 0&&n(),(z.length>0||i.length>0)&&Et(),We&&yn(),Ee=0}finally{je=e,z=t,ae=s}}async function ht(){await Promise.resolve(),Et()}function bn(n,e){const t=Ve;Ve=!0;const s=mn(n);Ve=t;const r=xe||k===null&&n.f&de?L:N;K(n,r);const i=n.e;i(s,n.v)||(n.v=s,St(n,L,e))}function Vi(n,e,t){let s=t[e];const r=s===void 0;r&&(s={store:null,last_value:null,value:Ge(Z),unsubscribe:vt},t[e]=s),(r||s.store!==n)&&(s.unsubscribe(),s.store=n??null,s.unsubscribe=Cs(n,s.value));const i=T(s.value);return i===Z?s.last_value:i}function Cs(n,e){return n==null?(A(e,void 0),vt):us(n,s=>{mt=!0,A(e,s),mt=!1})}function Ki(n){Ls(()=>{let e;for(e in n)n[e].unsubscribe()})}function T(n){const e=n.f;if(e&rt)return n.v;if(Q!==null&&!(Q.f&pe)&&!X){const t=(Q.f&de)!==0,s=Q.d;S===null&&s!==null&&s[O]===n&&!(t&&k!==null)?O++:(s===null||O===0||s[O-1]!==n)&&(S===null?S=[n]:n!==S[S.length-1]&&S.push(n)),G!==null&&k!==null&&k.f&N&&G.includes(n)&&(K(k,L),ge(k,!1))}return e&ve&&Tt(n)&&bn(n,!1),n.v}function A(n,e){return wn(n,e),e}function _t(n,e){const t=n.f;(t&dt)!==0!==e&&(n.f^=dt,!e&&t&it&&!(t&N)&&ge(n,!1));const r=n.r;if(r!==null){let i;for(i=0;i<r.length;i++)_t(r[i],e)}}function St(n,e,t){const s=Je(n.x),r=n.c;if(r!==null){const i=r.length;let o;for(o=0;o<i;o++){const l=r[o],c=l.f,u=(c&de)!==0,a=(c&L)!==0;a&&!u||(!t||!s)&&l===k||(K(l,e),(c&N||a&&u)&&(l.f&it?ge(l,!1):St(l,Te,t)))}}}function wn(n,e){if(!X&&!mt&&Q!==null&&Je(n.x)&&Q.f&ve)throw new Error("ERR_SVELTE_UNSAFE_MUTATION");if(n.f&un&&!n.e(e,n.v)){const t=n.x;if(n.v=e,Je(t)&&k!==null&&k.c===null&&k.f&N&&(S!==null&&S.includes(n)?(K(k,L),ge(k,!1)):G===null?G=[n]:G.push(n)),St(n,L,!0),k===null&&z.length===0){const s=t==null?void 0:t.u;if(s!=null){we(s.b);const r=vn(()=>{B(r),we(s.a)})}}}}function B(n){const e=n.v,t=n.y,s=n.f;kn(n),ot(n,0,!0),n.i=n.r=n.y=n.x=n.b=n.v=n.d=n.c=null,K(n,rt),t!==null&&(se(t)?we(t):t()),e!==null&&s&it&&e()}function Is(n){const e=k===null,t=e?ve|de:ve,s=dn(t|N,Z,C);return s.i=n,s.x=w,s.e=pn,e||gn(k,s),s}function P(n){const e=Ts(un|N,n);return e.x=w,e}function Ge(n){const e=P(n);return e.e=En,e}function fe(n){const e=X;try{return X=!0,n()}finally{X=e}}function me(n,e,t,s,r){const i=dn(n|L,null,s);return i.i=e,i.x=w,r&&ge(i,t),k!==null&&!(n&pe)&&gn(k,i),i}function Bt(){return k?(k.f&pe)===0:!1}function Xe(n){if(k===null)throw new Error("ERR_SVELTE_ORPHAN_EFFECT");const e=k.f&he&&w!==null&&!w.m,t=me(Oe,n,!1,C,!e);if(e){let s=w.e;s===null&&(s=w.e=[]),s.push(t)}return t}function Ht(n){return me(Oe,n,!1,C,!0)}function vn(n){return me(Oe|pe,n,!1,C,!0)}function Os(n,e){return me(ze|pe,n,e,C,!0)}function Qi(n){if(k===null)throw new Error("ERR_SVELTE_ORPHAN_EFFECT");const e=k!==null&&(k.f&he)!==0;return me(ze,()=>{const t=n();return Rs(),t},e,C,!0)}function E(n,e=C,t=!1,s=!0){let r=he;return t&&(r|=pe),me(r,n,s,e,!0)}function lt(n,e){let t=n.y;t===null?n.y=e:se(t)?t.push(e):n.y=[t,e]}const zs=~(L|Te|N);function K(n,e){n.f=n.f&zs|e}function Tn(n){return typeof n=="object"&&n!==null&&typeof n.f=="number"}function Ms(n){return typeof n=="object"&&n!==null&&n.t===hn}function Yi(n,e,t,s){var h;var r=(t&ds)!==0,i=(h=W(n,e))==null?void 0:h.set,o=n[e];o===void 0&&s!==void 0&&(t&ms&&(s=s()),o=s,i&&i(o));var l=()=>{var f=n[e];return f!==void 0&&(s=void 0),f===void 0?s:f};if(!(t&gs))return l;if(i)return function(f){return arguments.length===1?(i(f),f):l()};var c=!1,u=Ge(o),a=Is(()=>{var f=l(),p=T(u);return c?(c=!1,p):u.v=f});return r||(a.e=En),function(f,p=!1){var m=T(a);return arguments.length>0?((p||(r?f!==m:$t(f,m)))&&(c=!0,A(u,p?m:f),T(a)),f):m}}function $t(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function En(n,e){return!$t(n,e)}function Zt(n,e=1){const t=T(n);return wn(n,t+e),t}function Ls(n){Xe(()=>()=>fe(n))}function Sn(n,e=!1){w={a:null,c:null,e:null,m:!1,p:w,s:n,r:e,u:null}}function $n(n){const e=w;if(e!==null){n!==void 0&&(e.a=n);const t=e.e;if(t!==null){e.e=null;for(let s=0;s<t.length;s++)ge(t[s],!1)}w=e.p,e.m=!0}}function Wi(n,e){return{o:n,p:e,t:hn}}function Ji(n){return Tn(n)?T(n):Ms(n)?n.o[n.p]:n}const Ps=0,Ns=1,Ds=2,Fs=3,Us=5,qs=7,Bs=9;function Hs(n){return{d:null,e:null,i:n,p:null,r:null,t:Ps}}function Zs(){return{a:null,ae:null,c:null,ce:null,d:null,e:null,p:C,r:null,t:Ns,v:!1}}function js(){return{d:null,e:null,p:C,r:null,t:Us}}function Vs(){return{d:null,e:null,p:C,r:null,t:qs}}function Gi(n,e){return{a:e,d:null,f:n,v:[],e:null,p:C,r:null,s:[],t:Ds}}function Xi(n,e,t){return{a:null,d:null,e:null,i:e,k:t,v:n,p:C,r:null,s:null,t:Fs}}function Ks(){return{d:null,p:C,e:null,r:null,t:Bs}}let b=null;function te(n){b=n}function Rt(n){const e=[];let t=n,s=null;for(;t!==null;){const r=t.nodeType,i=t.nextSibling;if(r===8){const o=t.data;if(o.startsWith("ssr:")){const l=o.slice(4);if(s===null)s=l;else{if(l===s)return e;e.push(t)}t=i;continue}}s!==null&&e.push(t),t=i}return null}function Me(n,e){let t=n;if(b!==null)if(e&&(t=t.firstChild),t.nodeType===8){let s=t.$$fragment;s===void 0?s=Rt(t):$s(()=>{t.$$fragment=void 0}),te(s)}else{const s=t.firstChild;te(s===null?[]:[s])}}var ee,Fe,jt,Ue,Rn,An,Cn,In,At,On,zn,Mn;function Qs(){ee===void 0&&(ee=Node.prototype,Fe=Element.prototype,jt=Text.prototype,Ue=Map.prototype,Rn=ee.appendChild,An=ee.cloneNode,Cn=Ue.set,In=Ue.get,Ue.delete,Fe.__click=void 0,jt.__nodeValue=" ",Fe.__className="",At=W(ee,"firstChild").get,On=W(ee,"nextSibling").get,zn=W(ee,"textContent").set,Mn=W(Fe,"className").set)}function Vt(n,e){Rn.call(n,e)}function eo(n,e,t){Cn.call(n,e,t)}function to(n,e){return In.call(n,e)}function Ys(n,e){return An.call(n,e)}function kt(n){const e=At.call(n);if(b!==null)if(e===null){const t=document.createTextNode("");return n.appendChild(t),t}else return Ct(e);return e}function Kt(n){if(b!==null){const e=n[0];return b!==null&&e!==null?Ct(e):e}return At.call(n)}function no(n){const e=On.call(n);return b!==null&&e!==null?Ct(e):e}function Ws(n,e){Mn.call(n,e)}function so(n){zn.call(n,"")}function Ct(n){if(n.nodeType===8&&n.data.startsWith("ssr:")&&b.at(-1)!==n){const e=Rt(n),s=(e.at(-1)||n).nextSibling;return s.$$fragment=e,s}return n}function It(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function Js(n,e,t){if(se(n)){for(var s=0,r;s<n.length;s++)r=n[s],t===null?Vt(e,r):t.before(r);return n[0]}else n!==null&&(t===null?Vt(e,n):t.before(n));return n}function $(n){var e=n;if(se(n))for(var t=0,s;t<n.length;t++)s=n[t],t===0&&(e=s),s.isConnected&&s.remove();else n.isConnected&&n.remove();return e}function Gs(n,e,t){if(Me(n),b!==null)return b;var s=e+"",r=n,i;t&&(s=`<svg>${s}</svg>`);var o=It(s);t&&(o=o.firstChild);var l=o.cloneNode(!0);return i=Array.from(l.childNodes),i.forEach(c=>{r.before(c)}),i}function ce(n,e,t){const s=[];for(const r of n){const i=r.r;e==="in"?(i==="in"||i==="both"?r.in():r.c(),r.d.inert=!1,_t(r.e,!1)):e==="key"?i==="key"&&(r.p=r.i(t),r.in()):((i==="out"||i==="both")&&(r.p=r.i(),s.push(r.o)),r.d.inert=!0,_t(r.e,!0))}if(s.length>0){const r=Os(()=>{B(r);const i=vn(()=>{B(i),we(s)})},!1)}}const Ln=new Set,xt=new Set;function Xs(){return document.createTextNode("")}function er(n,e){let t;return()=>{if(t===void 0){const s=It(n);t=e?s:kt(s)}return t}}function ro(n,e){let t;return()=>{if(t===void 0){const s=kt(It(`<svg>${n}</svg>`));t=e?s:kt(s)}return t}}function Pn(n,e,t,s){if(b!==null){t!==null&&Me(t,!1);const r=b;if(r!==null)return n?r:r[0]}return e?Ys(s(),!0):document.importNode(s(),!0)}function io(n,e,t){return Pn(!1,e,n,t)}function tr(n,e,t){return Pn(!0,e,n,t)}const nr=er("<!>",!0);function Qt(n){return tr(n,!0,nr)}function Nn(n,e,t){const s=C,r=e?se(n)?n:Array.from(n.childNodes):n;t!==null&&b===null&&Js(r,null,t),s.d=r}function oo(n,e){Nn(e,!1,n)}function Yt(n,e){Nn(e,!0,n)}function lo(n,e,t,s,r){const i={capture:s,passive:r},o=t;e.addEventListener(n,o,i),(e===document.body||e===window||e===document)&&E(()=>()=>{e.removeEventListener(n,o,i)})}function co(n,e){E(()=>{const t=e();sr(n,t)})}function sr(n,e){const t=n.__className,s=ir(e),r=b!==null;r&&n.className===s?n.__className=s:(t!==s||r&&n.className!==s)&&(s===""?n.removeAttribute("class"):Ws(n,s),n.__className=s)}function ao(n,e){E(()=>rr(n,e()))}function rr(n,e){const t=n.__nodeValue,s=ar(e);b!==null&&n.nodeValue===s?n.__nodeValue=s:t!==s&&(n.nodeValue=s,n.__nodeValue=s)}function ir(n){return n??""}function or(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function uo(n,e,t){E(()=>{const s=t();or(n,e,s)})}function fo(n,e,t){const s=W(n,e);s&&s.set&&(n[e]=t,E(()=>()=>{n[e]=null}))}function ho(n,e,t){fe(()=>{e(n),E(()=>()=>{E(()=>{fe(()=>{(!Tn(t)||t.v===n)&&e(null)})})})})}function po(n){for(let e=0;e<n.length;e++)Ln.add(n[e]);for(const e of xt)e(n)}function Wt(n,e){var l;const t=e.type,s=((l=e.composedPath)==null?void 0:l.call(e))||[];let r=s[0]||e.target;e.target!==r&&Qe(e,"target",{configurable:!0,value:r});let i=0;const o=e.__root;if(o){const c=s.indexOf(o);if(c!==-1&&n===document)return;c<s.indexOf(n)&&(i=c)}for(r=s[i]||e.target,Qe(e,"currentTarget",{configurable:!0,get(){return r||document}});r!==null;){const c=r.parentNode||r.host||null,u="__"+t,a=r[u];if(a!==void 0&&!r.disabled)if(se(a)){const[h,...f]=a;h.apply(r,[e,...f])}else a.call(r,e);if(e.cancelBubble||c===n)break;r=c}e.__root=n}function lr(n,e,t,s){const r=Zs();Me(n);const i=b;let o=null,l=null,c=!1,u=!1;const a=E(()=>{var m;const p=!!e();if(r.v!==p||!c){if(r.v=p,c){const d=r.c,_=r.a;p?(_===null||_.size===0?J(f):ce(_,"out"),d===null||d.size===0?J(h):ce(d,"in")):(d===null||d.size===0?J(h):ce(d,"out"),_===null||_.size===0?J(f):ce(_,"in"))}else if(b!==null){const d=(m=b==null?void 0:b[0])==null?void 0:m.data;!d||d==="ssr:if:true"&&!p||d==="ssr:if:false"&&p?($(b),te(null)):b.shift()}c=!0}},r,!1),h=E(()=>{o!==null&&($(o),o=null),r.v&&(t(n),u||(te(i),u=!0)),o=r.d,r.d=null},r,!0);r.ce=h;const f=E(()=>{l!==null&&($(l),l=null),r.v||(s!==null&&s(n),u||(te(i),u=!0)),l=r.d,r.d=null},r,!0);r.ae=f,lt(a,()=>{o!==null&&$(o),l!==null&&$(l),B(h),B(f)}),r.e=a}function cr(n,e,t){const s=Vs();let r=null;Me(n);let i=null;s.r=u=>{const a=r,h=a.s;h.add(u),u.f(()=>{h.delete(u),h.size===0&&a.e!==null&&(a.d!==null&&($(a.d),a.d=null),B(a.e),a.e=null)})};const o=()=>{const u={d:null,e:null,s:new Set,p:r},a=E(()=>{const h=s.d;h!==null&&($(h),s.d=null),i&&t(i),u.d=s.d,s.d=null},s,!0);u.e=a,r=u},l=()=>{const u=r;if(u===null){o();return}const a=u.s;a.size===0?(u.d!==null&&($(u.d),u.d=null),u.e?J(u.e):o()):(o(),ce(a,"out"))},c=E(()=>{const u=e();i!==u&&(i=u,l())},s,!1);lt(c,()=>{let u=r;for(;u!==null;){const a=u.d;a!==null&&$(a);const h=u.e;h!==null&&B(h),u=u.p}}),s.e=c}function go(n,e,t){const s=js();let r=null;Me(n);let i=Z,o=!1;s.r=a=>{const h=r,f=h.s;f.add(a),a.f(()=>{f.delete(a),f.size===0&&h.e!==null&&(h.d!==null&&($(h.d),h.d=null),B(h.e),h.e=null)})};const l=()=>{const a={d:null,e:null,s:new Set,p:r},h=E(()=>{t(n),a.d=s.d,s.d=null},s,!0,!0);a.e=h,r=a},c=()=>{const a=r;if(a===null){l();return}const h=a.s;h.size===0?(a.d!==null&&($(a.d),a.d=null),a.e?J(a.e):l()):(ce(h,"out"),l())},u=E(()=>{const a=i;i=e(),o&&$t(a,i)&&c()},s,!1);c(),o=!0,lt(u,()=>{let a=r;for(;a!==null;){const h=a.d;h!==null&&$(h);const f=a.e;f!==null&&B(f),a=a.p}}),s.e=u}function ar(n){return typeof n=="string"?n:n==null?"":n+""}function mo(n,e,t){let s,r;const i=E(()=>{r!==(r=e())&&(s&&$(s),s=Gs(n,r,t))});lt(i,()=>{s&&$(s)})}function _o(n,e,t){let s;Ht(()=>{if(t){const r=t();fe(()=>{if(s===void 0)s=e(n,r)||{};else{const i=s.update;typeof i=="function"&&i(r)}})}else fe(()=>s=e(n))}),Ht(()=>{if(s!==void 0){const r=s.destroy;if(typeof r=="function")return()=>{r()}}})}function ko(n){b!==null&&n.firstChild!==null&&(n.textContent="")}function xo(n,e,t){E(()=>{const s=t();ur(n,e,s)})}function ur(n,e,t){t=t==null?null:t+"",(b===null||n.getAttribute(e)!==t&&e!=="src"&&e!=="href"&&e!=="srcset")&&(t===null?n.removeAttribute(e):n.setAttribute(e,t))}function fr(n,e,t,s){const r=n.style,i=r.getPropertyValue(e);t==null?i!==""&&r.removeProperty(e):i!==t&&r.setProperty(e,t,s?"important":"")}function yo(n,e,t,s){E(()=>{const r=t();fr(n,e,r,s)})}const hr={get(n,e){let t=n.props.length;for(;t--;){let s=n.props[t];if(ft(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(n,e){for(let t of n.props)if(ft(t)&&(t=t()),e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props){ft(t)&&(t=t());for(const s in t)e.includes(s)||e.push(s)}return e}};function bo(...n){return new Proxy({props:n},hr)}function pr(n,e){const t=v(e.props||{},!1);let[s,r]=Dn(n,{...e,props:t});const i={$set:o=>{ps(t,o)},$destroy:r};for(const o of hs(s||{}))Qe(i,o,{get(){return s[o]},set(l){Et(()=>s[o]=l)},enumerable:!0});return i}function Dn(n,e){var f,p;Qs();const t=new Set,s=e.target,r=Hs(e.intro||!1),i=s.firstChild,o=Rt(i),l=b;let c;try{let m=null;o===null&&(m=Xs(),s.appendChild(m)),te(o);const d=E(()=>{e.context&&(Sn({}),w.c=e.context),c=n(m,e.props||{},e.events||{}),e.context&&$n()},r,!0);r.e=d}catch(m){if(e.recover!==!1&&o!==null)return console.error("ERR_SVELTE_HYDRATION_MISMATCH",m),$(o),i.remove(),(p=(f=o.at(-1))==null?void 0:f.nextSibling)==null||p.remove(),Dn(n,e);throw m}finally{te(l)}const u=Wt.bind(null,s),a=Wt.bind(null,document),h=m=>{for(let d=0;d<m.length;d++){const _=m[d];t.has(_)||(t.add(_),s.addEventListener(_,u,qt.includes(_)?{passive:!0}:void 0),document.addEventListener(_,a,qt.includes(_)?{passive:!0}:void 0))}};return h(fs(Ln)),xt.add(h),[c,()=>{for(const d of t)s.removeEventListener(d,u);xt.delete(h);const m=r.d;m!==null&&$(m),o!==null&&$(o),B(r.e)}]}function wo(n,e,t){const s=Ks();E(()=>{const r=n();return fe(()=>r(e,t)),()=>{s.d!==null&&$(s.d)}},s)}const dr="modulepreload",gr=function(n){return"/"+n},Jt={},mr=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link");r=Promise.all(t.map(o=>{if(o=gr(o),o in Jt)return;Jt[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!s)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=l?"stylesheet":dr,l||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),l)return new Promise((h,f)=>{a.addEventListener("load",h),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},_r="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_r);let qe;const kr=new Uint8Array(16);function xr(){if(!qe&&(qe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!qe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qe(kr)}const R=[];for(let n=0;n<256;++n)R.push((n+256).toString(16).slice(1));function yr(n,e=0){return R[n[e+0]]+R[n[e+1]]+R[n[e+2]]+R[n[e+3]]+"-"+R[n[e+4]]+R[n[e+5]]+"-"+R[n[e+6]]+R[n[e+7]]+"-"+R[n[e+8]]+R[n[e+9]]+"-"+R[n[e+10]]+R[n[e+11]]+R[n[e+12]]+R[n[e+13]]+R[n[e+14]]+R[n[e+15]]}const br=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gt={randomUUID:br};function wr(n,e,t){if(Gt.randomUUID&&!e&&!n)return Gt.randomUUID();n=n||{};const s=n.random||(n.rng||xr)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=s[r];return e}return yr(s)}function pt(){}const Fn=wr,vr=/^\w*(Error|Exception|An error):/,Tr=/^Traceback \(most recent call last\):/;function Er(n){return vr.test(n)||Tr.test(n)}function Sr(n,e){return n.reduce((t,s)=>(t[s[e]]=s,t),{})}function Un(n,e){n.splice(0,n.length,...e)}function $r(n,e){const t={};for(const s in n){const r=n[s];e(s,r)&&(t[s]=r)}return t}function Xt(n,e="}"){try{return JSON.parse(n)}catch{}let t=n.length;for(;t>0;){if(t=n.lastIndexOf(",",t-1),t===-1)try{return JSON.parse(n+e)}catch{return null}try{return JSON.parse(n.slice(0,t)+e)}catch{}}return null}function Be(n,e=""){return"```"+e+`
`+n+"\n```"}function en(n){try{return JSON.stringify(JSON.parse(n),null,2)}catch{return n}}function Rr(){return!!window.matchMedia("(prefers-color-scheme: dark)").matches}function Ar(n,...e){document.documentElement.classList[n](...e)}function qn(n){var t;if(n.nodeType===Node.TEXT_NODE)return n;let e=null;for(let s=n.childNodes.length-1;s>=0&&(e=qn(n.childNodes[s]),!(e&&((t=e.textContent)==null?void 0:t.trim())!==""));s--);return e}const Cr=new DOMParser;function Ir(n,e){var s,r;const t=Cr.parseFromString(n,"text/html").body;return(r=(s=qn(t))==null?void 0:s.parentNode)==null||r.appendChild(e),t.innerHTML}function tn(n,e){return new Promise((t,s)=>{const r=new FileReader;r.onload=i=>{var l;const o=(l=i.target)==null?void 0:l.result;o!=null?t(o):s(new Error("File read resulted in null data"))},r.onerror=i=>{var o,l;s(new Error(`Error reading file: ${((l=(o=i.target)==null?void 0:o.error)==null?void 0:l.message)||"Unknown error"}`))},r[`readAs${e}`](n)})}function Or(n,e="",t=!1){let s=document.createElement("input");s.type="file",s.accept=e,s.multiple=t,s.onchange=async r=>{const i=r.target.files;if(i&&i.length>0)return n(t?Array.from(i):i[0])},s.click()}function zr(n){try{const e=localStorage.getItem(n);return JSON.parse(e)}catch{return null}}function Mr(n,e){try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.error(t)}}function Ot(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let re=Ot();function Bn(n){re=n}const Hn=/[&<>"']/,Lr=new RegExp(Hn.source,"g"),Zn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Pr=new RegExp(Zn.source,"g"),Nr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nn=n=>Nr[n];function M(n,e){if(e){if(Hn.test(n))return n.replace(Lr,nn)}else if(Zn.test(n))return n.replace(Pr,nn);return n}const Dr=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Fr(n){return n.replace(Dr,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Ur=/(^|[^\[])\^/g;function y(n,e){let t=typeof n=="string"?n:n.source;e=e||"";const s={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Ur,"$1"),t=t.replace(r,o),s},getRegex:()=>new RegExp(t,e)};return s}function sn(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const ye={exec:()=>null};function rn(n,e){const t=n.replace(/\|/g,(i,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),s=t.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function He(n,e,t){const s=n.length;if(s===0)return"";let r=0;for(;r<s;){const i=n.charAt(s-r-1);if(i===e&&!t)r++;else if(i!==e&&t)r++;else break}return n.slice(0,s-r)}function qr(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return-1}function on(n,e,t,s){const r=e.href,i=e.title?M(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){s.state.inLink=!0;const l={type:"link",raw:t,href:r,title:i,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,l}return{type:"image",raw:t,href:r,title:i,text:M(o)}}function Br(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const s=t[1];return e.split(`
`).map(r=>{const i=r.match(/^\s+/);if(i===null)return r;const[o]=i;return o.length>=s.length?r.slice(s.length):r}).join(`
`)}class et{constructor(e){g(this,"options");g(this,"rules");g(this,"lexer");this.options=e||re}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:He(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],r=Br(s,t[3]||"");return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(/#$/.test(s)){const r=He(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const s=He(t[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(s);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:i,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s=t[1].trim();const r=s.length>1,i={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const o=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",c="",u=!1;for(;e;){let a=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,D=>" ".repeat(3*D.length)),f=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,c=h.trimStart()):(p=t[2].search(/[^ ]/),p=p>4?1:p,c=h.slice(p),p+=t[1].length);let m=!1;if(!h&&/^ *$/.test(f)&&(l+=f+`
`,e=e.substring(f.length+1),a=!0),!a){const D=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),F=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ie=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),_e=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const oe=e.split(`
`,1)[0];if(f=oe,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ie.test(f)||_e.test(f)||D.test(f)||F.test(e))break;if(f.search(/[^ ]/)>=p||!f.trim())c+=`
`+f.slice(p);else{if(m||h.search(/[^ ]/)>=4||ie.test(h)||_e.test(h)||F.test(h))break;c+=`
`+f}!m&&!f.trim()&&(m=!0),l+=oe+`
`,e=e.substring(oe.length+1),h=f.slice(p)}}i.loose||(u?i.loose=!0:/\n *\n *$/.test(l)&&(u=!0));let d=null,_;this.options.gfm&&(d=/^\[[ xX]\] /.exec(c),d&&(_=d[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:l,task:!!d,checked:_,loose:!1,text:c,tokens:[]}),i.raw+=l}i.items[i.items.length-1].raw=l.trimEnd(),i.items[i.items.length-1].text=c.trimEnd(),i.raw=i.raw.trimEnd();for(let a=0;a<i.items.length;a++)if(this.lexer.state.top=!1,i.items[a].tokens=this.lexer.blockTokens(i.items[a].text,[]),!i.loose){const h=i.items[a].tokens.filter(p=>p.type==="space"),f=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));i.loose=f}if(i.loose)for(let a=0;a<i.items.length;a++)i.items[a].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:r,title:i}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const s=rn(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const l of r)/^ *-+: *$/.test(l)?o.align.push("right"):/^ *:-+: *$/.test(l)?o.align.push("center"):/^ *:-+ *$/.test(l)?o.align.push("left"):o.align.push(null);for(const l of s)o.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of i)o.rows.push(rn(l,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:M(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const o=He(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=qr(t[2],"()");if(o>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),on(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const r=(s[2]||s[1]).replace(/\s+/g," "),i=t[r.toLowerCase()];if(!i){const o=s[0].charAt(0);return{type:"text",raw:o,text:o}}return on(s,i,s[0],this.lexer)}}emStrong(e,t,s=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const o=[...r[0]].length-1;let l,c,u=o,a=0;const h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(r=h.exec(t))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(c=[...l].length,r[3]||r[4]){u+=c;continue}else if((r[5]||r[6])&&o%3&&!((o+c)%3)){a+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+a);const f=[...r[0]][0].length,p=e.slice(0,o+r.index+f+c);if(Math.min(o,c)%2){const d=p.slice(1,-1);return{type:"em",raw:p,text:d,tokens:this.lexer.inlineTokens(d)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(/\n/g," ");const r=/[^ ]/.test(s),i=/^ /.test(s)&&/ $/.test(s);return r&&i&&(s=s.substring(1,s.length-1)),s=M(s,!0),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let s,r;return t[2]==="@"?(s=M(t[1]),r="mailto:"+s):(s=M(t[1]),r=s),{type:"link",raw:t[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=M(t[0]),i="mailto:"+r;else{let o;do o=t[0],t[0]=((s=this.rules.inline._backpedal.exec(t[0]))==null?void 0:s[0])??"";while(o!==t[0]);r=M(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let s;return this.lexer.state.inRawBlock?s=t[0]:s=M(t[0]),{type:"text",raw:t[0],text:s}}}}const Hr=/^(?: *(?:\n|$))+/,Zr=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,jr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Le=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Vr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,jn=/(?:[*+-]|\d{1,9}[.)])/,Vn=y(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,jn).getRegex(),zt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Kr=/^[^\n]+/,Mt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Qr=y(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Mt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yr=y(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,jn).getRegex(),ct="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Lt=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Wr=y("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Lt).replace("tag",ct).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Kn=y(zt).replace("hr",Le).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ct).getRegex(),Jr=y(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Kn).getRegex(),Pt={blockquote:Jr,code:Zr,def:Qr,fences:jr,heading:Vr,hr:Le,html:Wr,lheading:Vn,list:Yr,newline:Hr,paragraph:Kn,table:ye,text:Kr},ln=y("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Le).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ct).getRegex(),Gr={...Pt,table:ln,paragraph:y(zt).replace("hr",Le).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ln).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ct).getRegex()},Xr={...Pt,html:y(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Lt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ye,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:y(zt).replace("hr",Le).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Vn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Qn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ei=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Yn=/^( {2,}|\\)\n(?!\s*$)/,ti=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pe="\\p{P}$+<=>`^|~",ni=y(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Pe).getRegex(),si=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,ri=y(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Pe).getRegex(),ii=y("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Pe).getRegex(),oi=y("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Pe).getRegex(),li=y(/\\([punct])/,"gu").replace(/punct/g,Pe).getRegex(),ci=y(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ai=y(Lt).replace("(?:-->|$)","-->").getRegex(),ui=y("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ai).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),tt=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,fi=y(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",tt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Wn=y(/^!?\[(label)\]\[(ref)\]/).replace("label",tt).replace("ref",Mt).getRegex(),Jn=y(/^!?\[(ref)\](?:\[\])?/).replace("ref",Mt).getRegex(),hi=y("reflink|nolink(?!\\()","g").replace("reflink",Wn).replace("nolink",Jn).getRegex(),Nt={_backpedal:ye,anyPunctuation:li,autolink:ci,blockSkip:si,br:Yn,code:ei,del:ye,emStrongLDelim:ri,emStrongRDelimAst:ii,emStrongRDelimUnd:oi,escape:Qn,link:fi,nolink:Jn,punctuation:ni,reflink:Wn,reflinkSearch:hi,tag:ui,text:ti,url:ye},pi={...Nt,link:y(/^!?\[(label)\]\((.*?)\)/).replace("label",tt).getRegex(),reflink:y(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tt).getRegex()},yt={...Nt,escape:y(Qn).replace("])","~|])").getRegex(),url:y(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},di={...yt,br:y(Yn).replace("{2,}","*").getRegex(),text:y(yt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ze={normal:Pt,gfm:Gr,pedantic:Xr},ke={normal:Nt,gfm:yt,breaks:di,pedantic:pi};class j{constructor(e){g(this,"tokens");g(this,"options");g(this,"state");g(this,"tokenizer");g(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||re,this.options.tokenizer=this.options.tokenizer||new et,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Ze.normal,inline:ke.normal};this.options.pedantic?(t.block=Ze.pedantic,t.inline=ke.pedantic):this.options.gfm&&(t.block=Ze.gfm,this.options.breaks?t.inline=ke.breaks:t.inline=ke.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ze,inline:ke}}static lex(e,t){return new j(t).lex(e)}static lexInline(e,t){return new j(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,c,u)=>c+"    ".repeat(u.length));let s,r,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(s=l.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(i=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(a=>{u=a.call({lexer:this},c),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(s=this.tokenizer.paragraph(i))){r=t[t.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s),o=i.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s,r,i,o=e,l,c,u;if(this.tokens.links){const a=Object.keys(this.tokens.links);if(a.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)a.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,l.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(a=>(s=a.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length),r=t[t.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(s=this.tokenizer.emStrong(e,o,u)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),t.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),t.push(s);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let a=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(a=Math.min(a,f))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(s=this.tokenizer.inlineText(i)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(u=s.raw.slice(-1)),c=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return t}}class nt{constructor(e){g(this,"options");this.options=e||re}code(e,t,s){var i;const r=(i=(t||"").match(/^\S*/))==null?void 0:i[0];return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+M(r)+'">'+(s?e:M(e,!0))+`</code></pre>
`:"<pre><code>"+(s?e:M(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,s){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,s){const r=t?"ol":"ul",i=t&&s!==1?' start="'+s+'"':"";return"<"+r+i+`>
`+e+"</"+r+`>
`}listitem(e,t,s){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+e+`</${s}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,s){const r=sn(e);if(r===null)return s;e=r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+s+"</a>",i}image(e,t,s){const r=sn(e);if(r===null)return s;e=r;let i=`<img src="${e}" alt="${s}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return e}}class Dt{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,s){return""+s}image(e,t,s){return""+s}br(){return""}}class V{constructor(e){g(this,"options");g(this,"renderer");g(this,"textRenderer");this.options=e||re,this.options.renderer=this.options.renderer||new nt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Dt}static parse(e,t){return new V(t).parse(e)}static parseInline(e,t){return new V(t).parseInline(e)}parse(e,t=!0){let s="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=i,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){s+=l||"";continue}}switch(i.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{const o=i;s+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Fr(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=i;s+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=i;let l="",c="";for(let a=0;a<o.header.length;a++)c+=this.renderer.tablecell(this.parseInline(o.header[a].tokens),{header:!0,align:o.align[a]});l+=this.renderer.tablerow(c);let u="";for(let a=0;a<o.rows.length;a++){const h=o.rows[a];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});u+=this.renderer.tablerow(c)}s+=this.renderer.table(l,u);continue}case"blockquote":{const o=i,l=this.parse(o.tokens);s+=this.renderer.blockquote(l);continue}case"list":{const o=i,l=o.ordered,c=o.start,u=o.loose;let a="";for(let h=0;h<o.items.length;h++){const f=o.items[h],p=f.checked,m=f.task;let d="";if(f.task){const _=this.renderer.checkbox(!!p);u?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=_+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=_+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:_+" "}):d+=_+" "}d+=this.parse(f.tokens,u),a+=this.renderer.listitem(d,m,!!p)}s+=this.renderer.list(a,l,c);continue}case"html":{const o=i;s+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=i;s+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=i,l=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&e[r+1].type==="text";)o=e[++r],l+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);s+=t?this.renderer.paragraph(l):l;continue}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}parseInline(e,t){t=t||this.renderer;let s="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=o||"";continue}}switch(i.type){case"escape":{const o=i;s+=t.text(o.text);break}case"html":{const o=i;s+=t.html(o.text);break}case"link":{const o=i;s+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=i;s+=t.image(o.href,o.title,o.text);break}case"strong":{const o=i;s+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=i;s+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=i;s+=t.codespan(o.text);break}case"br":{s+=t.br();break}case"del":{const o=i;s+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=i;s+=t.text(o.text);break}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}}class be{constructor(e){g(this,"options");this.options=e||re}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}g(be,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Se,bt,st,Xn;class Gn{constructor(...e){Y(this,Se);Y(this,st);g(this,"defaults",Ot());g(this,"options",this.setOptions);g(this,"parse",De(this,Se,bt).call(this,j.lex,V.parse));g(this,"parseInline",De(this,Se,bt).call(this,j.lexInline,V.parseInline));g(this,"Parser",V);g(this,"Renderer",nt);g(this,"TextRenderer",Dt);g(this,"Lexer",j);g(this,"Tokenizer",et);g(this,"Hooks",be);this.use(...e)}walkTokens(e,t){var r,i;let s=[];for(const o of e)switch(s=s.concat(t.call(this,o)),o.type){case"table":{const l=o;for(const c of l.header)s=s.concat(this.walkTokens(c.tokens,t));for(const c of l.rows)for(const u of c)s=s.concat(this.walkTokens(u.tokens,t));break}case"list":{const l=o;s=s.concat(this.walkTokens(l.items,t));break}default:{const l=o;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[l.type]?this.defaults.extensions.childTokens[l.type].forEach(c=>{s=s.concat(this.walkTokens(l[c],t))}):l.tokens&&(s=s.concat(this.walkTokens(l.tokens,t)))}}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=t.renderers[i.name];o?t.renderers[i.name]=function(...l){let c=i.renderer.apply(this,l);return c===!1&&(c=o.apply(this,l)),c}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),s.renderer){const i=this.defaults.renderer||new nt(this.defaults);for(const o in s.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const l=o,c=s.renderer[l],u=i[l];i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h||""}}r.renderer=i}if(s.tokenizer){const i=this.defaults.tokenizer||new et(this.defaults);for(const o in s.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const l=o,c=s.tokenizer[l],u=i[l];i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h}}r.tokenizer=i}if(s.hooks){const i=this.defaults.hooks||new be;for(const o in s.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const l=o,c=s.hooks[l],u=i[l];be.passThroughHooks.has(o)?i[l]=a=>{if(this.defaults.async)return Promise.resolve(c.call(i,a)).then(f=>u.call(i,f));const h=c.call(i,a);return u.call(i,h)}:i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h}}r.hooks=i}if(s.walkTokens){const i=this.defaults.walkTokens,o=s.walkTokens;r.walkTokens=function(l){let c=[];return c.push(o.call(this,l)),i&&(c=c.concat(i.call(this,l))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return j.lex(e,t??this.defaults)}parser(e,t){return V.parse(e,t??this.defaults)}}Se=new WeakSet,bt=function(e,t){return(s,r)=>{const i={...r},o={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const l=De(this,st,Xn).call(this,!!o.silent,!!o.async);if(typeof s>"u"||s===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(s):s).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(l);try{o.hooks&&(s=o.hooks.preprocess(s));let c=e(s,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=t(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return l(c)}}},st=new WeakSet,Xn=function(e,t){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+M(s.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(s);throw s}};const ne=new Gn;function x(n,e){return ne.parse(n,e)}x.options=x.setOptions=function(n){return ne.setOptions(n),x.defaults=ne.defaults,Bn(x.defaults),x};x.getDefaults=Ot;x.defaults=re;x.use=function(...n){return ne.use(...n),x.defaults=ne.defaults,Bn(x.defaults),x};x.walkTokens=function(n,e){return ne.walkTokens(n,e)};x.parseInline=ne.parseInline;x.Parser=V;x.parser=V.parse;x.Renderer=nt;x.TextRenderer=Dt;x.Lexer=j;x.lexer=j.lex;x.Tokenizer=et;x.Hooks=be;x.parse=x;x.options;x.setOptions;x.use;x.walkTokens;x.parseInline;V.parse;j.lex;function es(n,e){return e=Ut.getLanguage(e)?e:"plaintext",n=Ut.highlight(n,{language:e}).value,{language:e,code:`<code class="hljs language-${e}">${n}</code>`}}function gi(n,e){const{code:t}=es(n,e);return`<pre class="markdown-code-block plain">${t}</pre>`}function mi(n,e){const{language:t,code:s}=es(n,e);return t==="plaintext"?`<pre class="markdown-code-block plain">${s}</pre>`:`<div class="wrapped-code-container">
    <div class="lang-banner">
        <span>${t}</span>
    </div>
    <pre class="markdown-code-block wrapped">${s}</pre>
</div>`}function ts(n=!1){const e=new Gn,t=new e.Renderer;return n?t.code=mi:t.code=gi,e.setOptions({renderer:t}),e.parse.bind(e)}const H=ts(!1),cn=ts(!0);function ns(n,e){let t=null;const s=function(...r){const i=()=>{t=null,n.apply(this,r)};t!==null&&clearTimeout(t),t=setTimeout(i,e)};return s.cancel=function(){t!==null&&(clearTimeout(t),t=null)},s}function _i(n,e=8){let t=0;return(...s)=>{const r=new Date().getTime();r-t>=e&&(t=r,n(...s))}}function ki(n,e){return n!==n?e===e:n!==e||n&&typeof n=="object"||typeof n=="function"}const le=[];function wt(n,e=pt){let t;const s=new Set;function r(c){if(ki(n,c)&&(n=c,t)){const u=!le.length;for(const a of s)a[1](),le.push(a,n);if(u){for(let a=0;a<le.length;a+=2)le[a][0](le[a+1]);le.length=0}}}function i(c){r(c(n))}function o(c,u=pt){const a=[c,u];return s.add(a),s.size===1&&(t=e(r,i)||pt),c(n),()=>{s.delete(a),s.size===0&&t&&(t(),t=null)}}function l(){return n}return{get:l,set:r,update:i,subscribe:o}}const Ke={functions:{},agent_name:"Assistant",default_messages:[],prompt:{allow_upload:!0,placeholder:"Send a message..."},logo_small:void 0};function xi(n,e){return ss[n](e)}const ss={logo_small(n){if(typeof n=="string")return n},default_messages(n){return n??[]},agent_name(n){return n??Ke.agent_name},prompt(n){return{allow_upload:(n==null?void 0:n.allow_upload)??Ke.prompt.allow_upload,placeholder:(n==null?void 0:n.placeholder)??Ke.prompt.placeholder}},functions(n){return n?Object.entries(n).reduce((e,[t,s])=>{var c,u;const r={},{header:i,result:o,arguments:l}=s;return i&&(r.header={text:i.text,show:i.show}),l&&(r.arguments={},(c=l.show_key_as_code)!=null&&c.key&&((u=l.show_key_as_code)!=null&&u.language)&&(r.arguments.show_key_as_code=l.show_key_as_code),l.title&&(r.arguments.title=l.title)),o&&(r.result={title:o.title,type:o.type}),e[t]=r,e},{}):{}}};function yi(){return{...wt({...Ke}),setAll(e){this.update(t=>{for(const s in ss){const r=s;t[r]=xi(r,e[r])}return t})}}}const bi={Server:!0,Client:!0};function wi(){let n=v([]);function e(r){return bi[r]}function t(r){Un(n,n.filter(i=>i.text!==r))}function s(r,i){n.some(o=>o.text===i)||(console.error(`${r} Error: ${i}`),n.push({type:r,text:i}))}return{items:n,showType:e,remove:t,add:s}}class vi{constructor(...e){g(this,"instance");g(this,"on",(e,t)=>{this.instance.on(e,t)});g(this,"emit",(e,...t)=>{this.instance.emit(e,...t)});g(this,"off",(e,t)=>{this.instance.off(e,t)});this.instance=as(...e)}}const Ti={async binary(n){const e=await tn(n,"ArrayBuffer");return{type:"binary",name:n.name,fileType:n.type,content:e}},async image_url(n){return{type:"image_url",image_url:{url:await tn(n,"DataURL")}}}};function Ei(n){return n.type.startsWith("image")?"image_url":"binary"}var $e,Re,Ae;class Si{constructor(){Y(this,$e,P(""));Y(this,Re,P(v([])));Y(this,Ae,P(v([])))}get text(){return T(U(this,$e))}set text(e){A(U(this,$e),v(e))}get images(){return T(U(this,Re))}set images(e){A(U(this,Re),v(e))}get files(){return T(U(this,Ae))}set files(e){A(U(this,Ae),v(e))}serialize(){return{text:this.text,images:this.images,files:this.files}}set(e){this.text=e.text,this.images=e.images,this.files=e.files}clear(){this.text="",this.files=[],this.images=[]}textContentPart(){return{type:"text",text:this.text}}isEmpty(){return this.text.trim()===""&&this.files.length===0&&this.images.length===0}removeImage(e){this.images.splice(e,1)}removeFile(e){this.files.splice(e,1)}addImage(e){this.images.push(e)}addFile(e){this.files.push(e)}textIsEmpty(){return this.text.trim()===""}upload(){Or(async e=>{if(!e)return;const t=Ei(e);let s;try{s=await Ti[t](e)}catch{return}s&&(s.type==="image_url"?this.addImage(s):this.addFile(s))})}getContentParts(){let e=[...this.files,...this.images];return this.textIsEmpty()||e.push(this.textContentPart()),e}}$e=new WeakMap,Re=new WeakMap,Ae=new WeakMap;class $i{constructor(){g(this,"elem",null);g(this,"autoScrollEnabled",!0);g(this,"lastScrollHeight",0);g(this,"lastScrollTop",0);g(this,"action",e=>{this.elem=e;const t=ns(()=>this.handleUserScrollEvent(),100);return this.elem.addEventListener("scroll",t),ht().then(()=>this.forceScroll()),{destroy:()=>{var s;(s=this.elem)==null||s.removeEventListener("scroll",t)}}});g(this,"autoScroll",_i(()=>{this.autoScrollEnabled&&ht().then(()=>{if(!this.elem)return;const{scrollHeight:e}=this.elem;e!==this.lastScrollHeight&&this.scrollTo(e)})},200));g(this,"forceScroll",()=>{ht().then(()=>{this.elem&&(this.scrollTo(this.elem.scrollHeight),this.autoScrollEnabled=!0)})})}scrollTo(e){var t;(t=this.elem)==null||t.scrollTo({top:e,behavior:"smooth"}),this.lastScrollHeight=e}handleUserScrollEvent(){if(!this.elem)return;const{scrollHeight:e,scrollTop:t,clientHeight:s}=this.elem;t<this.lastScrollTop?this.autoScrollEnabled=!1:e-t<=s+50&&(this.autoScrollEnabled=!0),this.lastScrollTop=t}}function Ri(n,e){const t="assistant",s="content"in e&&e.content?e.content:"";if(!(e.tool_calls&&e.tool_calls.length>0))return{id:n,role:t,content:s};const i=e.tool_calls[0];if(!i.id)return{error:"Tool call has no id. Received a partial delta for a tool call that does not exist yet."};if(i.type!=="function")return{error:"Currently, only function tool calls are supported."};const o="function";let{id:l,function:{name:c,arguments:u}}=i;return{id:n,role:t,content:s,tool_calls:[{id:l,type:o,function:{name:c||"",arguments:u||""}}]}}function Ai(n,e){var f;if(n.id!==e.id)throw new Error("Message id and delta id must match");if(e.content&&(n.content=n.content!==null?n.content+e.content:e.content),!(e.tool_calls&&e.tool_calls.length>0))return;const s=e.tool_calls[0],r=s.index;if(typeof r!="number"||!s.function)return;const i=!s.id||!((f=s.function)!=null&&f.name);n.tool_calls||(n.tool_calls=[]);const o=n.tool_calls.length,l=r>o,c=r===o;if(l)return;if(c){if(i)return;const p="function",{id:m,function:{name:d,arguments:_}}=s;return n.tool_calls.push({id:m,type:p,function:{name:d,arguments:_}}),!0}const u=n.tool_calls[r],{function:{name:a,arguments:h}}=s;a&&(u.function.name=a),h&&(u.function.arguments+=h)}const an={system(n,e,t){return{role:e,id:t,content:n.content??""}},user(n,e,t){return{role:e,id:t,content:n.content??""}},assistant(n,e,t){var r,i;const s=n.tool_calls&&n.tool_calls.length>0?n.tool_calls:void 0;if(s){for(const o of s)if(!(o.id&&((r=o.function)!=null&&r.name)&&typeof((i=o.function)==null?void 0:i.arguments)=="string"))return log("Message has invalid tool call. Skipping:",n),null}return{role:e,id:t,content:n.content??"",tool_calls:s}},tool(n,e,t){return n.tool_call_id?{role:e,id:t,content:n.content??"",tool_call_id:n.tool_call_id}:null}};function rs(n){return n.role&&n.role in an?an[n.role](n,n.role,"id"in n&&n.id?n.id:Fn()):null}function Ci(n){return n.map(e=>rs(e)).filter(e=>e!==null)}function Ii(n){const e=Ci(n);return{order:e.map(t=>t.id),mapping:Sr(e,"id")}}const Oi={system(n,e){return{role:e,content:n.content}},user(n,e){return{role:e,content:typeof n.content=="string"?n.content:n.content.map(t=>(t.type==="binary",t))}},assistant(n,e){return{role:e,content:n.content,tool_calls:n.tool_calls&&n.tool_calls.length>0?n.tool_calls:void 0}},tool(n,e){return{role:e,content:n.content,tool_call_id:n.tool_call_id}}};function zi(n){return Oi[n.role](n,n.role)}function Mi(n,e){return e.map(t=>zi(n[t])).filter(t=>t!==null)}var Ce,Ie;class Li{constructor(e,t){g(this,"scroll",new $i);g(this,"rendered",wt([]));g(this,"msgMapping",wt({}));g(this,"msgOrder",[]);g(this,"streamCursorSpan",document.createElement("span"));g(this,"prompt",new Si);g(this,"config",yi());g(this,"errors",wi());Y(this,Ce,P(!1));Y(this,Ie,P(!1));g(this,"saveStateDebounced",ns(()=>this.saveState(),1e3));this.id=e,this.socket=t,this.id=e,this.socket=t,this.streamCursorSpan.classList.add("stream-cursor-span"),this.socket.on("connect",()=>this.connected=!0),this.socket.on("disconnect",()=>this.connected=!1),this.socket.on("error",r=>this.errors.add("Server",r)),this.socket.on("error",()=>this.generating=!1),this.socket.on("config",r=>this.config.setAll(r)),this.socket.on("generating-started",()=>this.generating=!0),this.socket.on("generating-done",()=>this.generating=!1),this.socket.on("message-set-all",this.handleSetAllEvent.bind(this)),this.socket.on("message-set",this.handleSetEvent.bind(this)),this.socket.on("message-update",this.handleUpdateEvent.bind(this)),this.config.subscribe(r=>{var i;this.msgOrder.length===0&&((i=r.default_messages)==null?void 0:i.length)>0&&(this.handleSetAllEvent(r.default_messages),this.scroll.forceScroll())}),this.msgMapping.subscribe(()=>this.scroll.autoScroll()),Xe(()=>log(this.connected?"connected":"disconnected")),Xe(()=>{this.prompt.text,this.prompt.images.length,this.prompt.files.length,this.saveStateDebounced()}),this.config.subscribe(()=>this.saveStateDebounced()),this.msgMapping.subscribe(()=>this.saveStateDebounced());const s=zr(this.id);s&&this.setFromSerialized(s)}get generating(){return T(U(this,Ce))}set generating(e){A(U(this,Ce),v(e))}get connected(){return T(U(this,Ie))}set connected(e){A(U(this,Ie),v(e))}saveState(){setTimeout(()=>{this.generating||Mr(this.id,this.serialize())})}serialize(){return{msgMapping:this.msgMapping.get(),msgOrder:this.msgOrder,prompt:this.prompt.serialize(),config:this.config.get()}}setFromSerialized(e){e.prompt&&this.prompt.set(e.prompt),e.config&&this.config.set(e.config),e.msgOrder&&e.msgMapping&&(e.msgOrder=e.msgOrder.filter(t=>t in e.msgMapping),e.msgMapping=$r(e.msgMapping,(t,s)=>e.msgOrder.includes(t)),this.setAllMessages(e.msgMapping,e.msgOrder))}reset(){this.handleSetAllEvent(this.config.get().default_messages??[])}upload(){this.prompt.upload()}stopGenerating(){this.generating=!1}sendMessage(){if(this.generating||this.prompt.isEmpty())return;const e=this.prompt.getContentParts(),t=e.length===1&&e[0].type==="text"?this.prompt.text:e;this.newUserMessage(t),this.prompt.clear(),this.startGenerating()}changeUserMessageAndSubmit(e,t){this.generating||(this.updateUserMessageContent(e,t),this.regenerateAfterId(e))}regenerateOnAgentResponse(e){if(this.generating)return;const t=this.rendered.get()[e-1];if(!t||t.type!=="user")throw new Error("Tried to regenerate on an index not preceded by a user message");this.regenerateAfterId(t.id)}renderAssistantMarkdown(e){return cn(e)}renderFunctionResult(e,t,s){var i,o;if(e===null)return null;const r=(o=(i=s[t])==null?void 0:i.result)==null?void 0:o.type;if(!r)return e;switch(r){case"html":return e;case"text":return e;case"plotly":return e;case"markdown":return cn(e);case"json":return H(Be(en(e),"json"));default:return H(Be(e,r))}}addStreamCursor(e,t=!0){return e!==null&&t?Ir(e,this.streamCursorSpan):e}renderFunctionCallArgs(e,t,s){var i,o;if(!e)return"";const r=(o=(i=s[t])==null?void 0:i.arguments)==null?void 0:o.show_key_as_code;if(r&&r.key){const l=r.key,c=r.language??"plaintext",u=Xt(e)??Xt(e+'"');if(u&&u[l]){const a=u[l],h=typeof a=="string"?a:JSON.stringify(a,null,2);return H(Be(h,c))}}return H(Be(en(e),"json"))}getArgsTitle(e,t){var r,i;const s=(i=(r=t[e])==null?void 0:r.arguments)==null?void 0:i.title;return H(s??"Arguments")}getResultTitle(e,t){var r,i;const s=(i=(r=t[e])==null?void 0:r.result)==null?void 0:i.title;return H(s??"Result")}renderFunctionHeader(e,t){var r;const s=(r=t[e])==null?void 0:r.header;return(s==null?void 0:s.show)===!1?null:H((s==null?void 0:s.text)??`Function call to **\`${e}()\`**`)}getFunctionResultType(e,t){var s,r;return((r=(s=t[e])==null?void 0:s.result)==null?void 0:r.type)??"text"}getFunctionCallStatus(e,t){const s=t&&e===null;return e&&Er(e)?"error":s?"progress":"complete"}userContentToText(e){if(typeof e=="string")return e;for(const t of e)if(t.type==="text")return t.text;return""}userContentToFiles(e){return typeof e=="string"?[]:e.filter(t=>t.type!=="text")}regenerateAfterId(e){this.removeAfterId(e),this.startGenerating()}startGenerating(){this.socket.emit("start-generating",{messages:this.oaiMessages()}),this.generating=!0,this.scroll.forceScroll()}oaiMessages(){return Mi(this.msgMapping.get(),this.msgOrder)}newUserMessage(e){this.setMessage({id:Fn(),role:"user",content:e})}updateUserMessageContent(e,t){this.msgMapping.update(s=>{const r=s[e];if(r.role!=="user")return console.error(`Invalid message update. Existing message '${e}' is not a user message.`),s;if(typeof r.content=="string")return r.content=t,s;for(const i of r.content)if(i.type==="text")return i.text=t,s;throw new Error(`Message ${e} has no text content part.`)})}removeAfterId(e){const t=this.msgOrder.indexOf(e);t!==-1&&this.removeAfterIndex(t)}removeAfterIndex(e){if(!this.msgOrder[e])return;const s=this.msgOrder.splice(e+1);this.msgMapping.update(r=>{for(const i of s)delete r[i];return r})}setAllMessages(e,t){Un(this.msgOrder,t),this.msgMapping.set(e)}handleSetAllEvent(e){const{mapping:t,order:s}=Ii(e);this.setAllMessages(t,s),this.scroll.forceScroll()}handleSetEvent(e){if(!this.generating)return;const t=rs(e);if(!t)return this.errors.add("Client",`Invalid message: ${e}`);this.setMessage(t)}handleUpdateEvent(e){if(!this.generating)return;if(e.role&&e.role!=="assistant")return this.errors.add("Client",`Invalid message update: role must be assistant.: ${e}`);const t=e.id;return t?t in this.msgMapping.get()?this.updateExistingFromDelta(t,e):this.addNewFromDelta(t,e):this.errors.add("Client",`Invalid message update: id not defined.: ${e}`)}addNewFromDelta(e,t){const s=Ri(e,t);if("error"in s)return this.errors.add("Client",s.error);this.setMessage(s)}updateExistingFromDelta(e,t){this.msgMapping.update(s=>{const r=s[e];return(r==null?void 0:r.role)==="assistant"?Ai(r,t):this.errors.add("Client",`Invalid message update. Existing message '${e}' is not an assistant message.`),s})}setMessage(e){this.msgMapping.update(t=>(e.id in t||this.msgOrder.push(e.id),t[e.id]=e,t))}renderMessages(e=this.msgMapping.get(),t=this.config.get().functions,s=this.generating){var a,h,f,p,m;let i=this.msgOrder.map(d=>e[d]),o,l=[];for(;i.length>0&&(o=i.shift());){if(o.role==="system")continue;if(o.role==="user"){const _=o.id,D={id:_,type:"user",contentText:"",contentImages:[],contentBinaries:[],onsubmit:F=>this.changeUserMessageAndSubmit(_,F)};typeof o.content=="string"?D.contentText=o.content:(D.contentText=this.userContentToText(o.content),D.contentImages=o.content.filter(F=>F.type==="image_url"),D.contentBinaries=o.content.filter(F=>F.type!=="text")),l.push(D);continue}const d={type:"agent",parts:[]};for(i.unshift(o);i[0]&&i[0].role!=="user";){const _=i.shift(),D=_.role,F=_.content??"";if(D!=="assistant")continue;F&&d.parts.push({type:"content",markdownContent:this.renderAssistantMarkdown(F)});const{tool_calls:ie}=_;if(ie&&ie.length>0)for(let{id:_e,function:oe}of ie){const Ne=oe.name??"",is=oe.arguments??"";let at=null;for(const ut of i)if(ut.role==="tool"&&ut.tool_call_id===_e){at=ut.content;break}const I=t[Ne],os=((a=I==null?void 0:I.header)==null?void 0:a.show)===!1?null:H(((h=I==null?void 0:I.header)==null?void 0:h.text)??`Function call to **\`${Ne}\`**`);d.parts.push({type:"tool_call",id:_e,header:os,progressMode:this.getFunctionCallStatus(at,s),args:this.renderFunctionCallArgs(is,Ne,t),argsTitle:H(((f=I==null?void 0:I.arguments)==null?void 0:f.title)??"Arguments"),result:this.renderFunctionResult(at,Ne,t),resultTitle:H(((p=I==null?void 0:I.result)==null?void 0:p.title)??"Result"),resultType:((m=I==null?void 0:I.result)==null?void 0:m.type)??"text"})}}l.push(d)}if(!s)return l;const c=l[l.length-1];if((c==null?void 0:c.type)==="user")return l.push({type:"agent",parts:[{type:"content",markdownContent:'<span class="stream-cursor-span"/>'}]}),l;const u=c==null?void 0:c.parts[c.parts.length-1];return(u==null?void 0:u.type)==="content"?u.markdownContent=this.addStreamCursor(u.markdownContent):(u==null?void 0:u.type)==="tool_call"&&(u.args=this.addStreamCursor(u.args)),l}}Ce=new WeakMap,Ie=new WeakMap;function Pi(n,e){Sn(e,!0);let t=P(null);setTimeout(async()=>{A(t,v((await mr(()=>import("./Chat-DufRpBh3.js"),__vite__mapDeps([]))).default))});const s="",r=new vi(s,{transports:["websocket"]});let i=P(v(window.innerWidth)),o=P(v(window.innerHeight));window.addEventListener("resize",()=>{A(i,v(window.innerWidth)),A(o,v(window.innerHeight))});let l=v(Rr());Xe(()=>Ar(l?"add":"remove","dark"));const c=new Li("chat",r);var u=Qt(n),a=Kt(u);lr(a,()=>T(t),h=>{var f=Qt(h),p=Kt(f);cr(p,()=>T(t),m=>{m(p,{chat:c,get totalWidth(){return T(i)},get totalHeight(){return T(o)}})}),Yt(h,f)},null),Yt(n,u),$n()}globalThis.log=(...n)=>console.log(...n);pr(Pi,{target:document.getElementById("app")});export{xo as $,Ge as A,P as B,Yi as C,Xe as D,Bi as E,ho as F,lo as G,ht as H,oo as I,fo as J,$n as K,T as L,Is as M,io as N,po as O,Sn as P,ko as Q,ur as R,q as S,er as T,ro as U,wo as V,lr as W,no as X,uo as Y,kt as Z,ar as _,E as a,rr as a0,A as a1,v as a2,Yt as a3,ao as a4,tr as a5,Ji as a6,Kt as a7,yo as a8,mo as a9,co as aa,Qt as ab,sr as ac,Ki as ad,Qi as ae,_o as af,go as ag,Vi as ah,bo as ai,b,so as c,B as d,to as e,Js as f,Rt as g,Me as h,se as i,Ui as j,wn as k,Wi as l,eo as m,Ms as n,Gi as o,lt as p,Hi as q,$ as r,te as s,ce as t,Xs as u,J as v,qi as w,Zi as x,Xi as y,ji as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
