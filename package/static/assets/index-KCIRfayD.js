var is=Object.defineProperty;var os=(n,e,t)=>e in n?is(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var m=(n,e,t)=>(os(n,typeof e!="symbol"?e+"":e,t),t),Dt=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var M=(n,e,t)=>(Dt(n,e,"read from private field"),t?t.call(n):e.get(n)),Q=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var De=(n,e,t)=>(Dt(n,e,"access private method"),t);import Ft from"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/es/highlight.min.js";import{io as ls}from"https://cdn.socket.io/4.7.2/socket.io.esm.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const wt=()=>{};function be(n){for(var e=0;e<n.length;e++)n[e]()}function cs(n,e,t){if(n==null)return e(void 0),t&&t(void 0),wt;const s=n.subscribe(e,t);return s.unsubscribe?()=>s.unsubscribe():s}var se=Array.isArray,as=Array.from,us=Object.keys,fs=Object.assign,Ke=Object.defineProperty,W=Object.getOwnPropertyDescriptor;const Di=1,Fi=2,Ui=4,qi=8,Bi=16,Hi=64,hs=1,ps=4,ds=8,Ut=["touchstart","touchmove","touchend"],q=Symbol("$state"),gs=Object.prototype,ms=Array.prototype,_s=Object.getPrototypeOf,ks=Object.isFrozen;function v(n,e=!0){if(typeof n=="object"&&n!=null&&!ks(n)){if(q in n)return n[q].p;const t=_s(n);if(t===gs||t===ms){const s=new Proxy(n,ys);return Ke(n,q,{value:xs(n,s,e),writable:!1}),s}}return n}function xs(n,e,t){return{s:new Map,v:P(0),a:se(n),i:t,p:e}}const ys={defineProperty(n,e,t){if(t.value){const s=n[q],r=s.s.get(e);r!==void 0&&$(r,v(t.value,s.i))}return Reflect.defineProperty(n,e,t)},deleteProperty(n,e){const t=n[q],s=t.s.get(e),r=t.a,i=delete n[e];if(r&&i){const o=t.s.get("length"),l=n.length-1;o!==void 0&&o.v!==l&&$(o,l)}return s!==void 0&&$(s,Z),e in n&&Ht(t.v),i},get(n,e,t){var i;const s=n[q];let r=s.s.get(e);if(r===void 0&&(Bt()||je)&&(!(e in n)||(i=W(n,e))!=null&&i.writable)&&(r=(s.i?P:Je)(v(n[e],s.i)),s.s.set(e,r)),r!==void 0){const o=T(r);return o===Z?void 0:o}return Reflect.get(n,e,t)},getOwnPropertyDescriptor(n,e){const t=Reflect.getOwnPropertyDescriptor(n,e);if(t&&"value"in t){const r=n[q].s.get(e);r&&(t.value=T(r))}return t},has(n,e){var i;if(e===q)return!0;const t=n[q],s=Reflect.has(n,e);let r=t.s.get(e);return(r!==void 0||Bt()&&(!s||(i=W(n,e))!=null&&i.writable))&&(r===void 0&&(r=(t.i?P:Je)(s?v(n[e],t.i):Z),t.s.set(e,r)),T(r)===Z)?!1:s},set(n,e,t){const s=n[q],r=s.s.get(e);r!==void 0&&$(r,v(t,s.i));const i=s.a,o=!(e in n);if(i&&e==="length")for(let l=t;l<n.length;l+=1){const c=s.s.get(l+"");c!==void 0&&$(c,Z)}if(o&&Ht(s.v),n[e]=t,i&&o){const l=s.s.get("length"),c=n.length;l!==void 0&&l.v!==c&&$(l,c)}return!0},ownKeys(n){const e=n[q];return T(e.v),Reflect.ownKeys(n)}},an=1,we=2,rt=4,Oe=8,fe=16,he=64,pe=128,D=256,N=512,ve=1024,pt=2048,it=4096,ot=rt|Oe|fe,un=0,bs=1,Z=Symbol(),fn=Symbol();let Ve=un,Qe=!1,Ye=!1,z=[],ae=[],dt=[],Te=0,Y=null,k=null,S=null,O=0,G=null,X=!1,gt=!1,_e=!1,R=null,w=null,je=!1;function We(n){const e=n||w;return e!==null&&e.r}function hn(n,e){return n===e}function ws(n,e){return{c:null,e:hn,f:n,v:e,x:null}}function pn(n,e,t){return{b:t,c:null,d:null,e:null,f:n,i:null,r:null,v:e,x:null,y:null}}function dn(n,e){const t=n.r;t===null?n.r=[e]:t.push(e)}function vt(n){const e=n.f;if(e&N||n.v===Z)return!0;if(e&ve){const t=n.d;if(t!==null){const s=t.length;let r;for(r=0;r<s;r++){const i=t[r];if(i.f&ve&&!vt(i)){K(i,D);continue}if(i.f&N)if(i.f&we){if(yn(i,!0),n.f&N)return!0}else return!0}}}return!1}function gn(n){const e=n.i,t=S,s=O,r=G,i=Y,o=R,l=w,c=_e,u=(n.f&fe)!==0,a=X;S=null,O=0,G=null,Y=n,R=n.b,w=n.x,_e=k===null&&(n.f&pe)!==0,X=!1,u&&(w==null?void 0:w.u)!=null&&w.u.e();try{let h;u?h=e(n.b):h=e();let f=n.d;if(S!==null){let p;if(f!==null){const g=f.length,d=g>16?new Set(S):null;for(p=O;p<g;p++){const _=f[p];(d!==null&&!d.has(_)||!S.includes(_))&&mn(n,_,!1)}}if(f!==null&&O>0)for(f.length=O+S.length,p=0;p<S.length;p++)f[O+p]=S[p];else n.d=f=S;if(!_e)for(p=O;p<f.length;p++){const g=f[p],d=g.c;d===null?g.c=[n]:d[d.length-1]!==n&&d.push(n)}}else f!==null&&O<f.length&&(lt(n,O,!1),f.length=O);return h}finally{S=t,O=s,G=r,Y=i,R=o,w=l,_e=c,X=a}}function mn(n,e,t){const s=e.c;let r=0;if(s!==null){r=s.length-1;const i=s.indexOf(n);i!==-1&&(r===0?e.c=null:(s[i]=s[r],s.pop()))}t&&r===0&&e.f&pe&&(K(e,N),lt(e,0,!0))}function lt(n,e,t){const s=n.d;if(s!==null){let r;for(r=e;r<s.length;r++){const i=s[r];mn(n,i,t)}}}function _n(n){const e=n.r;if(n.r=null,e!==null){let t;for(t=0;t<e.length;t++){const s=e[t];s.f&ot?B(s):(lt(s,0,!0),s.d=null)}}}function vs(n,e){if(n!==null)throw e}function J(n){if(n.f&it)return;const e=n.v,t=k;k=n;try{_n(n),e!==null&&e();const r=gn(n);typeof r=="function"&&(n.v=r)}catch(r){const i=n.b;if(i!==null)vs(i,r);else throw r}finally{k=t}const s=n.x;We(s)&&n.f&Oe&&z.length>0&&$s(s)}function kn(){if(Te>100)throw new Error("ERR_SVELTE_TOO_MANY_UPDATES");Te++}function ue(n){const e=n.length;if(e>0){kn();let t;for(t=0;t<e;t++){const s=n[t],r=s.f;r&(it|pt)||(vt(s)?(K(s,D),J(s)):r&ve&&K(s,D))}n.length=0}}function Ts(){if(Qe=!1,Te>101)return;const n=z,e=ae;z=[],ae=[],ue(n),ue(e),Qe||(Te=0)}function de(n,e){const t=n.f;e?(J(n),K(n,D)):(Ve===un&&(Qe||(Qe=!0,queueMicrotask(Ts))),t&rt?ae.push(n):z.push(n))}function xn(){Ye=!1;const n=dt.slice();dt=[],be(n)}function Es(n){Ye||(Ye=!0,setTimeout(xn,0)),dt.push(n)}function Ss(){const n=[];for(let e=0;e<z.length;e++){const t=z[e];t.f&fe&&t.x===w&&(n.push(t),z.splice(e,1),e--)}ue(n)}function $s(n){const e=[];for(let t=0;t<z.length;t++){const s=z[t];s.f&Oe&&s.x===n&&(e.push(s),z.splice(t,1),t--)}ue(e)}function Tt(n){const e=Ve,t=z,s=ae;try{kn();const r=[],i=[];Ve=bs,z=r,ae=i,ue(t),ue(s),n!==void 0&&n(),(z.length>0||i.length>0)&&Tt(),Ye&&xn(),Te=0}finally{Ve=e,z=t,ae=s}}async function qt(){await Promise.resolve(),Tt()}function yn(n,e){const t=je;je=!0;const s=gn(n);je=t;const r=_e||k===null&&n.f&pe?N:D;K(n,r);const i=n.e;i(s,n.v)||(n.v=s,Et(n,N,e))}function Zi(n,e,t){let s=t[e];const r=s===void 0;r&&(s={store:null,last_value:null,value:Je(Z),unsubscribe:wt},t[e]=s),(r||s.store!==n)&&(s.unsubscribe(),s.store=n??null,s.unsubscribe=As(n,s.value));const i=T(s.value);return i===Z?s.last_value:i}function As(n,e){return n==null?($(e,void 0),wt):cs(n,s=>{gt=!0,$(e,s),gt=!1})}function Vi(n){zs(()=>{let e;for(e in n)n[e].unsubscribe()})}function T(n){const e=n.f;if(e&it)return n.v;if(Y!==null&&!(Y.f&he)&&!X){const t=(Y.f&pe)!==0,s=Y.d;S===null&&s!==null&&s[O]===n&&!(t&&k!==null)?O++:(s===null||O===0||s[O-1]!==n)&&(S===null?S=[n]:n!==S[S.length-1]&&S.push(n)),G!==null&&k!==null&&k.f&D&&G.includes(n)&&(K(k,N),de(k,!1))}return e&we&&vt(n)&&yn(n,!1),n.v}function $(n,e){return bn(n,e),e}function mt(n,e){const t=n.f;(t&pt)!==0!==e&&(n.f^=pt,!e&&t&ot&&!(t&D)&&de(n,!1));const r=n.r;if(r!==null){let i;for(i=0;i<r.length;i++)mt(r[i],e)}}function Et(n,e,t){const s=We(n.x),r=n.c;if(r!==null){const i=r.length;let o;for(o=0;o<i;o++){const l=r[o],c=l.f,u=(c&pe)!==0,a=(c&N)!==0;a&&!u||(!t||!s)&&l===k||(K(l,e),(c&D||a&&u)&&(l.f&ot?de(l,!1):Et(l,ve,t)))}}}function bn(n,e){if(!X&&!gt&&Y!==null&&We(n.x)&&Y.f&we)throw new Error("ERR_SVELTE_UNSAFE_MUTATION");if(n.f&an&&!n.e(e,n.v)){const t=n.x;if(n.v=e,We(t)&&k!==null&&k.c===null&&k.f&D&&(S!==null&&S.includes(n)?(K(k,N),de(k,!1)):G===null?G=[n]:G.push(n)),Et(n,N,!0),k===null&&z.length===0){const s=t==null?void 0:t.u;if(s!=null){be(s.b);const r=wn(()=>{B(r),be(s.a)})}}}}function B(n){const e=n.v,t=n.y,s=n.f;_n(n),lt(n,0,!0),n.i=n.r=n.y=n.x=n.b=n.v=n.d=n.c=null,K(n,it),t!==null&&(se(t)?be(t):t()),e!==null&&s&ot&&e()}function Cs(n){const e=k===null,t=e?we|pe:we,s=pn(t|D,Z,R);return s.i=n,s.x=w,s.e=hn,e||dn(k,s),s}function P(n){const e=ws(an|D,n);return e.x=w,e}function Je(n){const e=P(n);return e.e=Tn,e}function Ge(n){const e=X;try{return X=!0,n()}finally{X=e}}function ze(n,e,t,s,r){const i=pn(n|N,null,s);return i.i=e,i.x=w,r&&de(i,t),k!==null&&!(n&he)&&dn(k,i),i}function Bt(){return k?(k.f&he)===0:!1}function Xe(n){if(k===null)throw new Error("ERR_SVELTE_ORPHAN_EFFECT");const e=k.f&fe&&w!==null&&!w.m,t=ze(rt,n,!1,R,!e);if(e){let s=w.e;s===null&&(s=w.e=[]),s.push(t)}return t}function wn(n){return ze(rt|he,n,!1,R,!0)}function Rs(n,e){return ze(Oe|he,n,e,R,!0)}function ji(n){if(k===null)throw new Error("ERR_SVELTE_ORPHAN_EFFECT");const e=k!==null&&(k.f&fe)!==0;return ze(Oe,()=>{const t=n();return Ss(),t},e,R,!0)}function E(n,e=R,t=!1,s=!0){let r=fe;return t&&(r|=he),ze(r,n,s,e,!0)}function ct(n,e){let t=n.y;t===null?n.y=e:se(t)?t.push(e):n.y=[t,e]}const Is=~(N|ve|D);function K(n,e){n.f=n.f&Is|e}function vn(n){return typeof n=="object"&&n!==null&&typeof n.f=="number"}function Os(n){return typeof n=="object"&&n!==null&&n.t===fn}function Ki(n,e,t,s){var h;var r=(t&hs)!==0,i=(h=W(n,e))==null?void 0:h.set,o=n[e];o===void 0&&s!==void 0&&(t&ds&&(s=s()),o=s,i&&i(o));var l=()=>{var f=n[e];return f!==void 0&&(s=void 0),f===void 0?s:f};if(!(t&ps))return l;if(i)return function(f){return arguments.length===1?(i(f),f):l()};var c=!1,u=Je(o),a=Cs(()=>{var f=l(),p=T(u);return c?(c=!1,p):u.v=f});return r||(a.e=Tn),function(f,p=!1){var g=T(a);return arguments.length>0?((p||(r?f!==g:St(f,g)))&&(c=!0,$(u,p?g:f),T(a)),f):g}}function St(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Tn(n,e){return!St(n,e)}function Ht(n,e=1){const t=T(n);return bn(n,t+e),t}function zs(n){Xe(()=>()=>Ge(n))}function En(n,e=!1){w={a:null,c:null,e:null,m:!1,p:w,s:n,r:e,u:null}}function Sn(n){const e=w;if(e!==null){n!==void 0&&(e.a=n);const t=e.e;if(t!==null){e.e=null;for(let s=0;s<t.length;s++)de(t[s],!1)}w=e.p,e.m=!0}}function Qi(n,e){return{o:n,p:e,t:fn}}function Yi(n){return vn(n)?T(n):Os(n)?n.o[n.p]:n}const Ms=0,Ls=1,Ps=2,Ns=3,Ds=5,Fs=7,Us=9;function qs(n){return{d:null,e:null,i:n,p:null,r:null,t:Ms}}function Bs(){return{a:null,ae:null,c:null,ce:null,d:null,e:null,p:R,r:null,t:Ls,v:!1}}function Hs(){return{d:null,e:null,p:R,r:null,t:Ds}}function Zs(){return{d:null,e:null,p:R,r:null,t:Fs}}function Wi(n,e){return{a:e,d:null,f:n,v:[],e:null,p:R,r:null,s:[],t:Ps}}function Ji(n,e,t){return{a:null,d:null,e:null,i:e,k:t,v:n,p:R,r:null,s:null,t:Ns}}function Vs(){return{d:null,p:R,e:null,r:null,t:Us}}let b=null;function te(n){b=n}function $t(n){const e=[];let t=n,s=null;for(;t!==null;){const r=t.nodeType,i=t.nextSibling;if(r===8){const o=t.data;if(o.startsWith("ssr:")){const l=o.slice(4);if(s===null)s=l;else{if(l===s)return e;e.push(t)}t=i;continue}}s!==null&&e.push(t),t=i}return null}function Me(n,e){let t=n;if(b!==null)if(e&&(t=t.firstChild),t.nodeType===8){let s=t.$$fragment;s===void 0?s=$t(t):Es(()=>{t.$$fragment=void 0}),te(s)}else{const s=t.firstChild;te(s===null?[]:[s])}}var ee,Fe,Zt,Ue,$n,An,Cn,Rn,At,In,On,zn;function js(){ee===void 0&&(ee=Node.prototype,Fe=Element.prototype,Zt=Text.prototype,Ue=Map.prototype,$n=ee.appendChild,An=ee.cloneNode,Cn=Ue.set,Rn=Ue.get,Ue.delete,Fe.__click=void 0,Zt.__nodeValue=" ",Fe.__className="",At=W(ee,"firstChild").get,In=W(ee,"nextSibling").get,On=W(ee,"textContent").set,zn=W(Fe,"className").set)}function Vt(n,e){$n.call(n,e)}function Gi(n,e,t){Cn.call(n,e,t)}function Xi(n,e){return Rn.call(n,e)}function Ks(n,e){return An.call(n,e)}function _t(n){const e=At.call(n);if(b!==null)if(e===null){const t=document.createTextNode("");return n.appendChild(t),t}else return Ct(e);return e}function jt(n){if(b!==null){const e=n[0];return b!==null&&e!==null?Ct(e):e}return At.call(n)}function eo(n){const e=In.call(n);return b!==null&&e!==null?Ct(e):e}function Qs(n,e){zn.call(n,e)}function to(n){On.call(n,"")}function Ct(n){if(n.nodeType===8&&n.data.startsWith("ssr:")&&b.at(-1)!==n){const e=$t(n),s=(e.at(-1)||n).nextSibling;return s.$$fragment=e,s}return n}function Rt(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function Ys(n,e,t){if(se(n)){for(var s=0,r;s<n.length;s++)r=n[s],t===null?Vt(e,r):t.before(r);return n[0]}else n!==null&&(t===null?Vt(e,n):t.before(n));return n}function A(n){var e=n;if(se(n))for(var t=0,s;t<n.length;t++)s=n[t],t===0&&(e=s),s.isConnected&&s.remove();else n.isConnected&&n.remove();return e}function Ws(n,e,t){if(Me(n),b!==null)return b;var s=e+"",r=n,i;t&&(s=`<svg>${s}</svg>`);var o=Rt(s);t&&(o=o.firstChild);var l=o.cloneNode(!0);return i=Array.from(l.childNodes),i.forEach(c=>{r.before(c)}),i}function ce(n,e,t){const s=[];for(const r of n){const i=r.r;e==="in"?(i==="in"||i==="both"?r.in():r.c(),r.d.inert=!1,mt(r.e,!1)):e==="key"?i==="key"&&(r.p=r.i(t),r.in()):((i==="out"||i==="both")&&(r.p=r.i(),s.push(r.o)),r.d.inert=!0,mt(r.e,!0))}if(s.length>0){const r=Rs(()=>{B(r);const i=wn(()=>{B(i),be(s)})},!1)}}const Mn=new Set,kt=new Set;function Js(){return document.createTextNode("")}function Gs(n,e){let t;return()=>{if(t===void 0){const s=Rt(n);t=e?s:_t(s)}return t}}function no(n,e){let t;return()=>{if(t===void 0){const s=_t(Rt(`<svg>${n}</svg>`));t=e?s:_t(s)}return t}}function Ln(n,e,t,s){if(b!==null){t!==null&&Me(t,!1);const r=b;if(r!==null)return n?r:r[0]}return e?Ks(s(),!0):document.importNode(s(),!0)}function so(n,e,t){return Ln(!1,e,n,t)}function Xs(n,e,t){return Ln(!0,e,n,t)}const er=Gs("<!>",!0);function Kt(n){return Xs(n,!0,er)}function Pn(n,e,t){const s=R,r=e?se(n)?n:Array.from(n.childNodes):n;t!==null&&b===null&&Ys(r,null,t),s.d=r}function ro(n,e){Pn(e,!1,n)}function Qt(n,e){Pn(e,!0,n)}function io(n,e,t,s,r){const i={capture:s,passive:r},o=t;e.addEventListener(n,o,i),(e===document.body||e===window||e===document)&&E(()=>()=>{e.removeEventListener(n,o,i)})}function oo(n,e){E(()=>{const t=e();tr(n,t)})}function tr(n,e){const t=n.__className,s=sr(e),r=b!==null;r&&n.className===s?n.__className=s:(t!==s||r&&n.className!==s)&&(s===""?n.removeAttribute("class"):Qs(n,s),n.__className=s)}function lo(n,e){E(()=>nr(n,e()))}function nr(n,e){const t=n.__nodeValue,s=lr(e);b!==null&&n.nodeValue===s?n.__nodeValue=s:t!==s&&(n.nodeValue=s,n.__nodeValue=s)}function sr(n){return n??""}function rr(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function co(n,e,t){E(()=>{const s=t();rr(n,e,s)})}function ao(n,e,t){const s=W(n,e);s&&s.set&&(n[e]=t,E(()=>()=>{n[e]=null}))}function uo(n,e,t){Ge(()=>{e(n),E(()=>()=>{E(()=>{Ge(()=>{(!vn(t)||t.v===n)&&e(null)})})})})}function fo(n){for(let e=0;e<n.length;e++)Mn.add(n[e]);for(const e of kt)e(n)}function Yt(n,e){var l;const t=e.type,s=((l=e.composedPath)==null?void 0:l.call(e))||[];let r=s[0]||e.target;e.target!==r&&Ke(e,"target",{configurable:!0,value:r});let i=0;const o=e.__root;if(o){const c=s.indexOf(o);if(c!==-1&&n===document)return;c<s.indexOf(n)&&(i=c)}for(r=s[i]||e.target,Ke(e,"currentTarget",{configurable:!0,get(){return r||document}});r!==null;){const c=r.parentNode||r.host||null,u="__"+t,a=r[u];if(a!==void 0&&!r.disabled)if(se(a)){const[h,...f]=a;h.apply(r,[e,...f])}else a.call(r,e);if(e.cancelBubble||c===n)break;r=c}e.__root=n}function ir(n,e,t,s){const r=Bs();Me(n);const i=b;let o=null,l=null,c=!1,u=!1;const a=E(()=>{var g;const p=!!e();if(r.v!==p||!c){if(r.v=p,c){const d=r.c,_=r.a;p?(_===null||_.size===0?J(f):ce(_,"out"),d===null||d.size===0?J(h):ce(d,"in")):(d===null||d.size===0?J(h):ce(d,"out"),_===null||_.size===0?J(f):ce(_,"in"))}else if(b!==null){const d=(g=b==null?void 0:b[0])==null?void 0:g.data;!d||d==="ssr:if:true"&&!p||d==="ssr:if:false"&&p?(A(b),te(null)):b.shift()}c=!0}},r,!1),h=E(()=>{o!==null&&(A(o),o=null),r.v&&(t(n),u||(te(i),u=!0)),o=r.d,r.d=null},r,!0);r.ce=h;const f=E(()=>{l!==null&&(A(l),l=null),r.v||(s!==null&&s(n),u||(te(i),u=!0)),l=r.d,r.d=null},r,!0);r.ae=f,ct(a,()=>{o!==null&&A(o),l!==null&&A(l),B(h),B(f)}),r.e=a}function or(n,e,t){const s=Zs();let r=null;Me(n);let i=null;s.r=u=>{const a=r,h=a.s;h.add(u),u.f(()=>{h.delete(u),h.size===0&&a.e!==null&&(a.d!==null&&(A(a.d),a.d=null),B(a.e),a.e=null)})};const o=()=>{const u={d:null,e:null,s:new Set,p:r},a=E(()=>{const h=s.d;h!==null&&(A(h),s.d=null),i&&t(i),u.d=s.d,s.d=null},s,!0);u.e=a,r=u},l=()=>{const u=r;if(u===null){o();return}const a=u.s;a.size===0?(u.d!==null&&(A(u.d),u.d=null),u.e?J(u.e):o()):(o(),ce(a,"out"))},c=E(()=>{const u=e();i!==u&&(i=u,l())},s,!1);ct(c,()=>{let u=r;for(;u!==null;){const a=u.d;a!==null&&A(a);const h=u.e;h!==null&&B(h),u=u.p}}),s.e=c}function ho(n,e,t){const s=Hs();let r=null;Me(n);let i=Z,o=!1;s.r=a=>{const h=r,f=h.s;f.add(a),a.f(()=>{f.delete(a),f.size===0&&h.e!==null&&(h.d!==null&&(A(h.d),h.d=null),B(h.e),h.e=null)})};const l=()=>{const a={d:null,e:null,s:new Set,p:r},h=E(()=>{t(n),a.d=s.d,s.d=null},s,!0,!0);a.e=h,r=a},c=()=>{const a=r;if(a===null){l();return}const h=a.s;h.size===0?(a.d!==null&&(A(a.d),a.d=null),a.e?J(a.e):l()):(ce(h,"out"),l())},u=E(()=>{const a=i;i=e(),o&&St(a,i)&&c()},s,!1);c(),o=!0,ct(u,()=>{let a=r;for(;a!==null;){const h=a.d;h!==null&&A(h);const f=a.e;f!==null&&B(f),a=a.p}}),s.e=u}function lr(n){return typeof n=="string"?n:n==null?"":n+""}function po(n,e,t){let s,r;const i=E(()=>{r!==(r=e())&&(s&&A(s),s=Ws(n,r,t))});ct(i,()=>{s&&A(s)})}function go(n){b!==null&&n.firstChild!==null&&(n.textContent="")}function mo(n,e,t){E(()=>{const s=t();cr(n,e,s)})}function cr(n,e,t){t=t==null?null:t+"",(b===null||n.getAttribute(e)!==t&&e!=="src"&&e!=="href"&&e!=="srcset")&&(t===null?n.removeAttribute(e):n.setAttribute(e,t))}function ar(n,e,t,s){const r=n.style,i=r.getPropertyValue(e);t==null?i!==""&&r.removeProperty(e):i!==t&&r.setProperty(e,t,s?"important":"")}function _o(n,e,t,s){E(()=>{const r=t();ar(n,e,r,s)})}function ur(n,e){const t=v(e.props||{},!1);let[s,r]=Nn(n,{...e,props:t});const i={$set:o=>{fs(t,o)},$destroy:r};for(const o of us(s||{}))Ke(i,o,{get(){return s[o]},set(l){Tt(()=>s[o]=l)},enumerable:!0});return i}function Nn(n,e){var f,p;js();const t=new Set,s=e.target,r=qs(e.intro||!1),i=s.firstChild,o=$t(i),l=b;let c;try{let g=null;o===null&&(g=Js(),s.appendChild(g)),te(o);const d=E(()=>{e.context&&(En({}),w.c=e.context),c=n(g,e.props||{},e.events||{}),e.context&&Sn()},r,!0);r.e=d}catch(g){if(e.recover!==!1&&o!==null)return console.error("ERR_SVELTE_HYDRATION_MISMATCH",g),A(o),i.remove(),(p=(f=o.at(-1))==null?void 0:f.nextSibling)==null||p.remove(),Nn(n,e);throw g}finally{te(l)}const u=Yt.bind(null,s),a=Yt.bind(null,document),h=g=>{for(let d=0;d<g.length;d++){const _=g[d];t.has(_)||(t.add(_),s.addEventListener(_,u,Ut.includes(_)?{passive:!0}:void 0),document.addEventListener(_,a,Ut.includes(_)?{passive:!0}:void 0))}};return h(as(Mn)),kt.add(h),[c,()=>{for(const d of t)s.removeEventListener(d,u);kt.delete(h);const g=r.d;g!==null&&A(g),o!==null&&A(o),B(r.e)}]}function ko(n,e,t){const s=Vs();E(()=>{const r=n();return Ge(()=>r(e,t)),()=>{s.d!==null&&A(s.d)}},s)}const fr="modulepreload",hr=function(n){return"/"+n},Wt={},pr=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link");r=Promise.all(t.map(o=>{if(o=hr(o),o in Wt)return;Wt[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!s)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=l?"stylesheet":fr,l||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),l)return new Promise((h,f)=>{a.addEventListener("load",h),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},dr="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(dr);let qe;const gr=new Uint8Array(16);function mr(){if(!qe&&(qe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!qe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qe(gr)}const C=[];for(let n=0;n<256;++n)C.push((n+256).toString(16).slice(1));function _r(n,e=0){return C[n[e+0]]+C[n[e+1]]+C[n[e+2]]+C[n[e+3]]+"-"+C[n[e+4]]+C[n[e+5]]+"-"+C[n[e+6]]+C[n[e+7]]+"-"+C[n[e+8]]+C[n[e+9]]+"-"+C[n[e+10]]+C[n[e+11]]+C[n[e+12]]+C[n[e+13]]+C[n[e+14]]+C[n[e+15]]}const kr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jt={randomUUID:kr};function xr(n,e,t){if(Jt.randomUUID&&!e&&!n)return Jt.randomUUID();n=n||{};const s=n.random||(n.rng||mr)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=s[r];return e}return _r(s)}function ht(){}const ke=xr,yr=/^\w*(Error|Exception|An error):/,br=/^Traceback \(most recent call last\):/;function wr(n){return yr.test(n)||br.test(n)}function vr(n,e){return n.reduce((t,s)=>(t[s[e]]=s,t),{})}function Dn(n,e){n.splice(0,n.length,...e)}function Tr(n,e){const t={};for(const s in n){const r=n[s];e(s,r)&&(t[s]=r)}return t}function Gt(n,e="}"){try{return JSON.parse(n)}catch{}let t=n.length;for(;t>0;){if(t=n.lastIndexOf(",",t-1),t===-1)try{return JSON.parse(n+e)}catch{return null}try{return JSON.parse(n.slice(0,t)+e)}catch{}}return null}function Be(n,e=""){return"```"+e+`
`+n+"\n```"}function Xt(n){try{return JSON.stringify(JSON.parse(n),null,2)}catch{return n}}function Er(){return!!window.matchMedia("(prefers-color-scheme: dark)").matches}function Sr(n,...e){document.documentElement.classList[n](...e)}function Fn(n){var t;if(n.nodeType===Node.TEXT_NODE)return n;let e=null;for(let s=n.childNodes.length-1;s>=0&&(e=Fn(n.childNodes[s]),!(e&&((t=e.textContent)==null?void 0:t.trim())!==""));s--);return e}const $r=new DOMParser;function Ar(n,e){var s,r;const t=$r.parseFromString(n,"text/html").body;return(r=(s=Fn(t))==null?void 0:s.parentNode)==null||r.appendChild(e),t.innerHTML}function en(n,e){return new Promise((t,s)=>{const r=new FileReader;r.onload=i=>{var l;const o=(l=i.target)==null?void 0:l.result;o!=null?t(o):s(new Error("File read resulted in null data"))},r.onerror=i=>{var o,l;s(new Error(`Error reading file: ${((l=(o=i.target)==null?void 0:o.error)==null?void 0:l.message)||"Unknown error"}`))},r[`readAs${e}`](n)})}function Cr(n,e="",t=!1){let s=document.createElement("input");s.type="file",s.accept=e,s.multiple=t,s.onchange=async r=>{const i=r.target.files;if(i&&i.length>0)return n(t?Array.from(i):i[0])},s.click()}function Rr(n){try{const e=localStorage.getItem(n);return JSON.parse(e)}catch{return null}}function Ir(n,e){try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.error(t)}}function It(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let re=It();function Un(n){re=n}const qn=/[&<>"']/,Or=new RegExp(qn.source,"g"),Bn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,zr=new RegExp(Bn.source,"g"),Mr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tn=n=>Mr[n];function L(n,e){if(e){if(qn.test(n))return n.replace(Or,tn)}else if(Bn.test(n))return n.replace(zr,tn);return n}const Lr=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Pr(n){return n.replace(Lr,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Nr=/(^|[^\[])\^/g;function y(n,e){let t=typeof n=="string"?n:n.source;e=e||"";const s={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Nr,"$1"),t=t.replace(r,o),s},getRegex:()=>new RegExp(t,e)};return s}function nn(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const xe={exec:()=>null};function sn(n,e){const t=n.replace(/\|/g,(i,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),s=t.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function He(n,e,t){const s=n.length;if(s===0)return"";let r=0;for(;r<s;){const i=n.charAt(s-r-1);if(i===e&&!t)r++;else if(i!==e&&t)r++;else break}return n.slice(0,s-r)}function Dr(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return-1}function rn(n,e,t,s){const r=e.href,i=e.title?L(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){s.state.inLink=!0;const l={type:"link",raw:t,href:r,title:i,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,l}return{type:"image",raw:t,href:r,title:i,text:L(o)}}function Fr(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const s=t[1];return e.split(`
`).map(r=>{const i=r.match(/^\s+/);if(i===null)return r;const[o]=i;return o.length>=s.length?r.slice(s.length):r}).join(`
`)}class et{constructor(e){m(this,"options");m(this,"rules");m(this,"lexer");this.options=e||re}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:He(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],r=Fr(s,t[3]||"");return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(/#$/.test(s)){const r=He(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const s=He(t[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(s);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:i,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s=t[1].trim();const r=s.length>1,i={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const o=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",c="",u=!1;for(;e;){let a=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,F=>" ".repeat(3*F.length)),f=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,c=h.trimStart()):(p=t[2].search(/[^ ]/),p=p>4?1:p,c=h.slice(p),p+=t[1].length);let g=!1;if(!h&&/^ *$/.test(f)&&(l+=f+`
`,e=e.substring(f.length+1),a=!0),!a){const F=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),U=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ie=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),ge=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const oe=e.split(`
`,1)[0];if(f=oe,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ie.test(f)||ge.test(f)||F.test(f)||U.test(e))break;if(f.search(/[^ ]/)>=p||!f.trim())c+=`
`+f.slice(p);else{if(g||h.search(/[^ ]/)>=4||ie.test(h)||ge.test(h)||U.test(h))break;c+=`
`+f}!g&&!f.trim()&&(g=!0),l+=oe+`
`,e=e.substring(oe.length+1),h=f.slice(p)}}i.loose||(u?i.loose=!0:/\n *\n *$/.test(l)&&(u=!0));let d=null,_;this.options.gfm&&(d=/^\[[ xX]\] /.exec(c),d&&(_=d[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:l,task:!!d,checked:_,loose:!1,text:c,tokens:[]}),i.raw+=l}i.items[i.items.length-1].raw=l.trimEnd(),i.items[i.items.length-1].text=c.trimEnd(),i.raw=i.raw.trimEnd();for(let a=0;a<i.items.length;a++)if(this.lexer.state.top=!1,i.items[a].tokens=this.lexer.blockTokens(i.items[a].text,[]),!i.loose){const h=i.items[a].tokens.filter(p=>p.type==="space"),f=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));i.loose=f}if(i.loose)for(let a=0;a<i.items.length;a++)i.items[a].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:r,title:i}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const s=sn(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const l of r)/^ *-+: *$/.test(l)?o.align.push("right"):/^ *:-+: *$/.test(l)?o.align.push("center"):/^ *:-+ *$/.test(l)?o.align.push("left"):o.align.push(null);for(const l of s)o.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of i)o.rows.push(sn(l,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:L(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const o=He(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=Dr(t[2],"()");if(o>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),rn(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const r=(s[2]||s[1]).replace(/\s+/g," "),i=t[r.toLowerCase()];if(!i){const o=s[0].charAt(0);return{type:"text",raw:o,text:o}}return rn(s,i,s[0],this.lexer)}}emStrong(e,t,s=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const o=[...r[0]].length-1;let l,c,u=o,a=0;const h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(r=h.exec(t))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(c=[...l].length,r[3]||r[4]){u+=c;continue}else if((r[5]||r[6])&&o%3&&!((o+c)%3)){a+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+a);const f=[...r[0]][0].length,p=e.slice(0,o+r.index+f+c);if(Math.min(o,c)%2){const d=p.slice(1,-1);return{type:"em",raw:p,text:d,tokens:this.lexer.inlineTokens(d)}}const g=p.slice(2,-2);return{type:"strong",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(/\n/g," ");const r=/[^ ]/.test(s),i=/^ /.test(s)&&/ $/.test(s);return r&&i&&(s=s.substring(1,s.length-1)),s=L(s,!0),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let s,r;return t[2]==="@"?(s=L(t[1]),r="mailto:"+s):(s=L(t[1]),r=s),{type:"link",raw:t[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=L(t[0]),i="mailto:"+r;else{let o;do o=t[0],t[0]=((s=this.rules.inline._backpedal.exec(t[0]))==null?void 0:s[0])??"";while(o!==t[0]);r=L(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let s;return this.lexer.state.inRawBlock?s=t[0]:s=L(t[0]),{type:"text",raw:t[0],text:s}}}}const Ur=/^(?: *(?:\n|$))+/,qr=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Br=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Le=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Hr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Hn=/(?:[*+-]|\d{1,9}[.)])/,Zn=y(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Hn).getRegex(),Ot=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Zr=/^[^\n]+/,zt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Vr=y(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",zt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),jr=y(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Hn).getRegex(),at="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Mt=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Kr=y("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Mt).replace("tag",at).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Vn=y(Ot).replace("hr",Le).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",at).getRegex(),Qr=y(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Vn).getRegex(),Lt={blockquote:Qr,code:qr,def:Vr,fences:Br,heading:Hr,hr:Le,html:Kr,lheading:Zn,list:jr,newline:Ur,paragraph:Vn,table:xe,text:Zr},on=y("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Le).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",at).getRegex(),Yr={...Lt,table:on,paragraph:y(Ot).replace("hr",Le).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",on).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",at).getRegex()},Wr={...Lt,html:y(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Mt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:xe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:y(Ot).replace("hr",Le).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Zn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},jn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Jr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Kn=/^( {2,}|\\)\n(?!\s*$)/,Gr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pe="\\p{P}$+<=>`^|~",Xr=y(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Pe).getRegex(),ei=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,ti=y(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Pe).getRegex(),ni=y("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Pe).getRegex(),si=y("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Pe).getRegex(),ri=y(/\\([punct])/,"gu").replace(/punct/g,Pe).getRegex(),ii=y(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),oi=y(Mt).replace("(?:-->|$)","-->").getRegex(),li=y("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",oi).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),tt=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ci=y(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",tt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Qn=y(/^!?\[(label)\]\[(ref)\]/).replace("label",tt).replace("ref",zt).getRegex(),Yn=y(/^!?\[(ref)\](?:\[\])?/).replace("ref",zt).getRegex(),ai=y("reflink|nolink(?!\\()","g").replace("reflink",Qn).replace("nolink",Yn).getRegex(),Pt={_backpedal:xe,anyPunctuation:ri,autolink:ii,blockSkip:ei,br:Kn,code:Jr,del:xe,emStrongLDelim:ti,emStrongRDelimAst:ni,emStrongRDelimUnd:si,escape:jn,link:ci,nolink:Yn,punctuation:Xr,reflink:Qn,reflinkSearch:ai,tag:li,text:Gr,url:xe},ui={...Pt,link:y(/^!?\[(label)\]\((.*?)\)/).replace("label",tt).getRegex(),reflink:y(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tt).getRegex()},xt={...Pt,escape:y(jn).replace("])","~|])").getRegex(),url:y(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},fi={...xt,br:y(Kn).replace("{2,}","*").getRegex(),text:y(xt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ze={normal:Lt,gfm:Yr,pedantic:Wr},me={normal:Pt,gfm:xt,breaks:fi,pedantic:ui};class V{constructor(e){m(this,"tokens");m(this,"options");m(this,"state");m(this,"tokenizer");m(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||re,this.options.tokenizer=this.options.tokenizer||new et,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Ze.normal,inline:me.normal};this.options.pedantic?(t.block=Ze.pedantic,t.inline=me.pedantic):this.options.gfm&&(t.block=Ze.gfm,this.options.breaks?t.inline=me.breaks:t.inline=me.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ze,inline:me}}static lex(e,t){return new V(t).lex(e)}static lexInline(e,t){return new V(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,c,u)=>c+"    ".repeat(u.length));let s,r,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(s=l.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(i=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(a=>{u=a.call({lexer:this},c),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(s=this.tokenizer.paragraph(i))){r=t[t.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s),o=i.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s,r,i,o=e,l,c,u;if(this.tokens.links){const a=Object.keys(this.tokens.links);if(a.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)a.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,l.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(a=>(s=a.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length),r=t[t.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(s=this.tokenizer.emStrong(e,o,u)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),t.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),t.push(s);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let a=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(a=Math.min(a,f))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(s=this.tokenizer.inlineText(i)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(u=s.raw.slice(-1)),c=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return t}}class nt{constructor(e){m(this,"options");this.options=e||re}code(e,t,s){var i;const r=(i=(t||"").match(/^\S*/))==null?void 0:i[0];return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+L(r)+'">'+(s?e:L(e,!0))+`</code></pre>
`:"<pre><code>"+(s?e:L(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,s){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,s){const r=t?"ol":"ul",i=t&&s!==1?' start="'+s+'"':"";return"<"+r+i+`>
`+e+"</"+r+`>
`}listitem(e,t,s){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+e+`</${s}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,s){const r=nn(e);if(r===null)return s;e=r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+s+"</a>",i}image(e,t,s){const r=nn(e);if(r===null)return s;e=r;let i=`<img src="${e}" alt="${s}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return e}}class Nt{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,s){return""+s}image(e,t,s){return""+s}br(){return""}}class j{constructor(e){m(this,"options");m(this,"renderer");m(this,"textRenderer");this.options=e||re,this.options.renderer=this.options.renderer||new nt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Nt}static parse(e,t){return new j(t).parse(e)}static parseInline(e,t){return new j(t).parseInline(e)}parse(e,t=!0){let s="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=i,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){s+=l||"";continue}}switch(i.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{const o=i;s+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Pr(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=i;s+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=i;let l="",c="";for(let a=0;a<o.header.length;a++)c+=this.renderer.tablecell(this.parseInline(o.header[a].tokens),{header:!0,align:o.align[a]});l+=this.renderer.tablerow(c);let u="";for(let a=0;a<o.rows.length;a++){const h=o.rows[a];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});u+=this.renderer.tablerow(c)}s+=this.renderer.table(l,u);continue}case"blockquote":{const o=i,l=this.parse(o.tokens);s+=this.renderer.blockquote(l);continue}case"list":{const o=i,l=o.ordered,c=o.start,u=o.loose;let a="";for(let h=0;h<o.items.length;h++){const f=o.items[h],p=f.checked,g=f.task;let d="";if(f.task){const _=this.renderer.checkbox(!!p);u?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=_+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=_+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:_+" "}):d+=_+" "}d+=this.parse(f.tokens,u),a+=this.renderer.listitem(d,g,!!p)}s+=this.renderer.list(a,l,c);continue}case"html":{const o=i;s+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=i;s+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=i,l=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&e[r+1].type==="text";)o=e[++r],l+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);s+=t?this.renderer.paragraph(l):l;continue}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}parseInline(e,t){t=t||this.renderer;let s="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=o||"";continue}}switch(i.type){case"escape":{const o=i;s+=t.text(o.text);break}case"html":{const o=i;s+=t.html(o.text);break}case"link":{const o=i;s+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=i;s+=t.image(o.href,o.title,o.text);break}case"strong":{const o=i;s+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=i;s+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=i;s+=t.codespan(o.text);break}case"br":{s+=t.br();break}case"del":{const o=i;s+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=i;s+=t.text(o.text);break}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}}class ye{constructor(e){m(this,"options");this.options=e||re}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}m(ye,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Ee,yt,st,Jn;class Wn{constructor(...e){Q(this,Ee);Q(this,st);m(this,"defaults",It());m(this,"options",this.setOptions);m(this,"parse",De(this,Ee,yt).call(this,V.lex,j.parse));m(this,"parseInline",De(this,Ee,yt).call(this,V.lexInline,j.parseInline));m(this,"Parser",j);m(this,"Renderer",nt);m(this,"TextRenderer",Nt);m(this,"Lexer",V);m(this,"Tokenizer",et);m(this,"Hooks",ye);this.use(...e)}walkTokens(e,t){var r,i;let s=[];for(const o of e)switch(s=s.concat(t.call(this,o)),o.type){case"table":{const l=o;for(const c of l.header)s=s.concat(this.walkTokens(c.tokens,t));for(const c of l.rows)for(const u of c)s=s.concat(this.walkTokens(u.tokens,t));break}case"list":{const l=o;s=s.concat(this.walkTokens(l.items,t));break}default:{const l=o;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[l.type]?this.defaults.extensions.childTokens[l.type].forEach(c=>{s=s.concat(this.walkTokens(l[c],t))}):l.tokens&&(s=s.concat(this.walkTokens(l.tokens,t)))}}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=t.renderers[i.name];o?t.renderers[i.name]=function(...l){let c=i.renderer.apply(this,l);return c===!1&&(c=o.apply(this,l)),c}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),s.renderer){const i=this.defaults.renderer||new nt(this.defaults);for(const o in s.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const l=o,c=s.renderer[l],u=i[l];i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h||""}}r.renderer=i}if(s.tokenizer){const i=this.defaults.tokenizer||new et(this.defaults);for(const o in s.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const l=o,c=s.tokenizer[l],u=i[l];i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h}}r.tokenizer=i}if(s.hooks){const i=this.defaults.hooks||new ye;for(const o in s.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const l=o,c=s.hooks[l],u=i[l];ye.passThroughHooks.has(o)?i[l]=a=>{if(this.defaults.async)return Promise.resolve(c.call(i,a)).then(f=>u.call(i,f));const h=c.call(i,a);return u.call(i,h)}:i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h}}r.hooks=i}if(s.walkTokens){const i=this.defaults.walkTokens,o=s.walkTokens;r.walkTokens=function(l){let c=[];return c.push(o.call(this,l)),i&&(c=c.concat(i.call(this,l))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return V.lex(e,t??this.defaults)}parser(e,t){return j.parse(e,t??this.defaults)}}Ee=new WeakSet,yt=function(e,t){return(s,r)=>{const i={...r},o={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const l=De(this,st,Jn).call(this,!!o.silent,!!o.async);if(typeof s>"u"||s===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(s):s).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(l);try{o.hooks&&(s=o.hooks.preprocess(s));let c=e(s,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=t(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return l(c)}}},st=new WeakSet,Jn=function(e,t){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+L(s.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(s);throw s}};const ne=new Wn;function x(n,e){return ne.parse(n,e)}x.options=x.setOptions=function(n){return ne.setOptions(n),x.defaults=ne.defaults,Un(x.defaults),x};x.getDefaults=It;x.defaults=re;x.use=function(...n){return ne.use(...n),x.defaults=ne.defaults,Un(x.defaults),x};x.walkTokens=function(n,e){return ne.walkTokens(n,e)};x.parseInline=ne.parseInline;x.Parser=j;x.parser=j.parse;x.Renderer=nt;x.TextRenderer=Nt;x.Lexer=V;x.lexer=V.lex;x.Tokenizer=et;x.Hooks=ye;x.parse=x;x.options;x.setOptions;x.use;x.walkTokens;x.parseInline;j.parse;V.lex;function Gn(n,e){return e=Ft.getLanguage(e)?e:"plaintext",n=Ft.highlight(n,{language:e}).value,{language:e,code:`<code class="hljs language-${e}">${n}</code>`}}function hi(n,e){const{code:t}=Gn(n,e);return`<pre class="markdown-code-block plain">${t}</pre>`}function pi(n,e){const{language:t,code:s}=Gn(n,e);return t==="plaintext"?`<pre class="markdown-code-block plain">${s}</pre>`:`<div class="wrapped-code-container">
    <div class="lang-banner">
        <span>${t}</span>
    </div>
    <pre class="markdown-code-block wrapped">${s}</pre>
</div>`}function Xn(n=!1){const e=new Wn,t=new e.Renderer;return n?t.code=pi:t.code=hi,e.setOptions({renderer:t}),e.parse.bind(e)}const H=Xn(!1),ln=Xn(!0);function es(n,e){let t=null;const s=function(...r){const i=()=>{t=null,n.apply(this,r)};t!==null&&clearTimeout(t),t=setTimeout(i,e)};return s.cancel=function(){t!==null&&(clearTimeout(t),t=null)},s}function di(n,e=8){let t=0;return(...s)=>{const r=new Date().getTime();r-t>=e&&(t=r,n(...s))}}function gi(n,e){return n!==n?e===e:n!==e||n&&typeof n=="object"||typeof n=="function"}const le=[];function bt(n,e=ht){let t;const s=new Set;function r(c){if(gi(n,c)&&(n=c,t)){const u=!le.length;for(const a of s)a[1](),le.push(a,n);if(u){for(let a=0;a<le.length;a+=2)le[a][0](le[a+1]);le.length=0}}}function i(c){r(c(n))}function o(c,u=ht){const a=[c,u];return s.add(a),s.size===1&&(t=e(r,i)||ht),c(n),()=>{s.delete(a),s.size===0&&t&&(t(),t=null)}}function l(){return n}return{get:l,set:r,update:i,subscribe:o}}const mi={functions:{},agent_name:"Assistant",default_messages:[]};function _i(n,e){return ts[n](e)}const ts={default_messages(n){return n??[]},agent_name(n){return n??"Assistant"},functions(n){return n?Object.entries(n).reduce((e,[t,s])=>{var c,u;const r={},{header:i,result:o,arguments:l}=s;return i&&(r.header={text:i.text,show:i.show}),l&&(r.arguments={},(c=l.show_key_as_code)!=null&&c.key&&((u=l.show_key_as_code)!=null&&u.language)&&(r.arguments.show_key_as_code=l.show_key_as_code),l.title&&(r.arguments.title=l.title)),o&&(r.result={title:o.title,type:o.type}),e[t]=r,e},{}):{}}};function ki(){return{...bt({...mi}),setAll(e){this.update(t=>{for(const s in ts){const r=s;t[r]=_i(r,e[r])}return t})}}}const xi={Server:!0,Client:!0};function yi(){let n=v([]);function e(r){return xi[r]}function t(r){Dn(n,n.filter(i=>i.text!==r))}function s(r,i){n.some(o=>o.text===i)||(console.error(`${r} Error: ${i}`),n.push({type:r,text:i}))}return{items:n,showType:e,remove:t,add:s}}class bi{constructor(...e){m(this,"instance");this.instance=ls(...e)}on(e,t){this.instance.on(e,t)}emit(e,...t){if(typeof t[t.length-1]=="function"){const s=t.pop();this.instance.emit(e,...t,s)}else this.instance.emit(e,...t)}off(e,t){t?this.instance.off(e,t):this.instance.off(e)}}const wi={async binary(n){const e=await en(n,"ArrayBuffer");return{type:"binary",name:n.name,fileType:n.type,content:e}},async image_url(n){return{type:"image_url",image_url:{url:await en(n,"DataURL")}}}};function vi(n){return n.type.startsWith("image")?"image_url":"binary"}var Se,$e,Ae;class Ti{constructor(){Q(this,Se,P(""));Q(this,$e,P(v([])));Q(this,Ae,P(v([])))}get text(){return T(M(this,Se))}set text(e){$(M(this,Se),v(e))}get images(){return T(M(this,$e))}set images(e){$(M(this,$e),v(e))}get files(){return T(M(this,Ae))}set files(e){$(M(this,Ae),v(e))}serialize(){return{text:this.text,images:this.images,files:this.files}}set(e){this.text=e.text,this.images=e.images,this.files=e.files}clear(){this.text="",this.files=[],this.images=[]}textContentPart(){return{type:"text",text:this.text}}isEmpty(){return this.text.trim()===""&&this.files.length===0&&this.images.length===0}removeImage(e){this.images.splice(e,1)}removeFile(e){this.files.splice(e,1)}addImage(e){this.images.push(e)}addFile(e){this.files.push(e)}textIsEmpty(){return this.text.trim()===""}upload(){Cr(async e=>{if(!e)return;const t=vi(e);let s;try{s=await wi[t](e)}catch{return}s&&(s.type==="image_url"?this.addImage(s):this.addFile(s))})}getContentParts(){let e=[...this.files,...this.images];return this.textIsEmpty()||e.push(this.textContentPart()),e}}Se=new WeakMap,$e=new WeakMap,Ae=new WeakMap;var Ce;class Ei{constructor(){Q(this,Ce,P(null));m(this,"autoEnabled",!0);m(this,"lastScrollHeight",0);m(this,"lastScrollTop",0);m(this,"handleUserScrollDebounced",es(()=>this.handleUserScroll(),100));m(this,"autoScrollThrottled",di(()=>this.autoScroll(),200))}get containerDiv(){return T(M(this,Ce))}set containerDiv(e){$(M(this,Ce),v(e))}scroll(e){e==="force"?this.forceScroll():this.autoScrollThrottled()}handleUserScroll(){if(!this.containerDiv)return;const{scrollHeight:e,scrollTop:t,clientHeight:s}=this.containerDiv;t<this.lastScrollTop?this.autoEnabled=!1:e-t<=s+50&&(this.autoEnabled=!0),this.lastScrollTop=t}scrollChat(e=!1){if(!this.containerDiv)return;const{scrollHeight:t}=this.containerDiv;e&&t===this.lastScrollHeight||(this.containerDiv.scrollTo({top:t,behavior:"smooth"}),this.lastScrollHeight=t)}autoScroll(){this.autoEnabled&&qt().then(()=>this.scrollChat(!0))}forceScroll(){qt().then(()=>this.scrollChat()),this.autoEnabled=!0}}Ce=new WeakMap;function Si(n,e){const t="assistant",s="content"in e&&e.content?e.content:"";if(!(e.tool_calls&&e.tool_calls.length>0))return{id:n,role:t,content:s};const i=e.tool_calls[0];if(!i.id)return{error:"Tool call has no id. Received a partial delta for a tool call that does not exist yet."};if(i.type!=="function")return{error:"Currently, only function tool calls are supported."};const o="function";let{id:l,function:{name:c,arguments:u}}=i;return{id:n,role:t,content:s,tool_calls:[{id:l,type:o,function:{name:c||"",arguments:u||""}}]}}function $i(n,e){var f;if(n.id!==e.id)throw new Error("Message id and delta id must match");if(e.content&&(n.content=n.content!==null?n.content+e.content:e.content),!(e.tool_calls&&e.tool_calls.length>0))return;const s=e.tool_calls[0],r=s.index;if(typeof r!="number"||!s.function)return;const i=!s.id||!((f=s.function)!=null&&f.name);n.tool_calls||(n.tool_calls=[]);const o=n.tool_calls.length,l=r>o,c=r===o;if(l)return;if(c){if(i)return;const p="function",{id:g,function:{name:d,arguments:_}}=s;return n.tool_calls.push({id:g,type:p,function:{name:d,arguments:_}}),!0}const u=n.tool_calls[r],{function:{name:a,arguments:h}}=s;a&&(u.function.name=a),h&&(u.function.arguments+=h)}const cn={system(n){return{role:"system",id:"id"in n&&n.id?n.id:ke(),content:n.content??""}},user(n){return{role:"user",id:"id"in n&&n.id?n.id:ke(),content:n.content?n.content:""}},assistant(n){var t,s;const e=n.tool_calls&&n.tool_calls.length>0?n.tool_calls:void 0;if(e){for(const r of e)if(!(r.id&&((t=r.function)!=null&&t.name)&&typeof((s=r.function)==null?void 0:s.arguments)=="string"))return log("Message has invalid tool call. Skipping:",n),null}return{role:"assistant",id:"id"in n&&n.id?n.id:ke(),content:n.content??"",tool_calls:e}},tool(n){return n.tool_call_id?{role:"tool",id:"id"in n&&n.id?n.id:ke(),content:n.content??"",tool_call_id:n.tool_call_id}:null}};function ns(n){return n.role&&n.role in cn?cn[n.role](n):null}function Ai(n){return n.map(e=>ns(e)).filter(e=>e!==null)}function Ci(n){const e=Ai(n);return{order:e.map(t=>t.id),mapping:vr(e,"id")}}const Ri={system(n){return{role:"system",content:n.content}},user(n){let e={role:"user",content:""};if(typeof n.content=="string")e.content=n.content;else{e.content=[];for(const t of n.content)t.type,e.content.push(t)}return e},assistant(n){let e={role:"assistant",content:n.content};return n.tool_calls&&n.tool_calls.length>0&&(e.tool_calls=n.tool_calls),e},tool(n){return{role:"tool",content:n.content,tool_call_id:n.tool_call_id}}};function Ii(n){return Ri[n.role](n)}function Oi(n,e){return e.map(t=>Ii(n[t])).filter(t=>t!==null)}var Re,Ie;class zi{constructor(e,t){m(this,"scroll",new Ei);m(this,"rendered",bt([]));m(this,"msgMapping",bt({}));m(this,"msgOrder",[]);m(this,"streamCursorSpan",document.createElement("span"));m(this,"prompt",new Ti);m(this,"config",ki());m(this,"errors",yi());Q(this,Re,P(!1));Q(this,Ie,P(!1));m(this,"saveStateDebounced",es(()=>this.saveState(),1e3));this.id=e,this.socket=t,this.id=e,this.socket=t,this.streamCursorSpan.classList.add("stream-cursor-span"),this.socket.on("connect",()=>this.connected=!0),this.socket.on("disconnect",()=>this.connected=!1),this.socket.on("error",r=>this.errors.add("Server",r)),this.socket.on("error",()=>this.generating=!1),this.socket.on("config",r=>this.config.setAll(r)),this.socket.on("generating-started",()=>this.generating=!0),this.socket.on("generating-done",()=>this.generating=!1),this.socket.on("message-set-all",this.handleSetAllEvent.bind(this)),this.socket.on("message-set",this.handleSetEvent.bind(this)),this.socket.on("message-update",this.handleUpdateEvent.bind(this)),this.config.subscribe(r=>{var i;this.msgOrder.length===0&&((i=r.default_messages)==null?void 0:i.length)>0&&(this.handleSetAllEvent(r.default_messages),this.scroll.scroll("force"))}),this.msgMapping.subscribe(()=>this.scroll.scroll("auto")),Xe(()=>log(this.connected?"connected":"disconnected")),Xe(()=>{this.prompt.text,this.prompt.images.length,this.prompt.files.length,this.saveStateDebounced()}),this.config.subscribe(()=>this.saveStateDebounced()),this.msgMapping.subscribe(()=>this.saveStateDebounced());const s=Rr(this.id);s&&this.setFromSerialized(s)}get generating(){return T(M(this,Re))}set generating(e){$(M(this,Re),v(e))}get connected(){return T(M(this,Ie))}set connected(e){$(M(this,Ie),v(e))}saveState(){setTimeout(()=>{this.generating||Ir(this.id,this.serialize())})}serialize(){return{msgMapping:this.msgMapping.get(),msgOrder:this.msgOrder,prompt:this.prompt.serialize(),config:this.config.get()}}setFromSerialized(e){e.prompt&&this.prompt.set(e.prompt),e.config&&this.config.set(e.config),e.msgOrder&&e.msgMapping&&(e.msgOrder=e.msgOrder.filter(t=>t in e.msgMapping),e.msgMapping=Tr(e.msgMapping,(t,s)=>e.msgOrder.includes(t)),this.setAllMessages(e.msgMapping,e.msgOrder))}reset(){this.handleSetAllEvent(this.config.get().default_messages??[])}upload(){this.prompt.upload()}stopGenerating(){this.generating=!1}sendMessage(){if(this.generating||this.prompt.isEmpty())return;const e=this.prompt.getContentParts(),t=e.length===1&&e[0].type==="text"?this.prompt.text:e;this.newUserMessage(t),this.prompt.clear(),this.startGenerating()}changeUserMessageAndSubmit(e,t){this.generating||(this.updateUserMessageContent(e,t),this.regenerateAfterId(e))}regenerateOnAgentResponse(e){if(this.generating)return;const t=this.rendered.get()[e-1];if(!t||t.type!=="user")throw new Error("Tried to regenerate on an index not preceded by a user message");this.regenerateAfterId(t.id)}renderAssistantMarkdown(e){return ln(e)}renderFunctionResult(e,t,s){var i,o;if(e===null)return null;const r=(o=(i=s[t])==null?void 0:i.result)==null?void 0:o.type;if(!r)return e;switch(r){case"html":return e;case"text":return e;case"plotly":return e;case"markdown":return ln(e);case"json":return H(Be(Xt(e),"json"));default:return H(Be(e,r))}}addStreamCursor(e,t=!0){return e!==null&&t?Ar(e,this.streamCursorSpan):e}renderFunctionCallArgs(e,t,s){var i,o;if(!e)return"";const r=(o=(i=s[t])==null?void 0:i.arguments)==null?void 0:o.show_key_as_code;if(r&&r.key){const l=r.key,c=r.language??"plaintext",u=Gt(e)??Gt(e+'"');if(u&&u[l]){const a=u[l],h=typeof a=="string"?a:JSON.stringify(a,null,2);return H(Be(h,c))}}return H(Be(Xt(e),"json"))}getArgsTitle(e,t){var r,i;const s=(i=(r=t[e])==null?void 0:r.arguments)==null?void 0:i.title;return H(s??"Arguments")}getResultTitle(e,t){var r,i;const s=(i=(r=t[e])==null?void 0:r.result)==null?void 0:i.title;return H(s??"Result")}renderFunctionHeader(e,t){var r;const s=(r=t[e])==null?void 0:r.header;return(s==null?void 0:s.show)===!1?null:H((s==null?void 0:s.text)??`Function call to **\`${e}()\`**`)}getFunctionResultType(e,t){var s,r;return((r=(s=t[e])==null?void 0:s.result)==null?void 0:r.type)??"text"}getFunctionCallStatus(e,t){const s=t&&e===null;return e&&wr(e)?"error":s?"progress":"complete"}userContentToText(e){if(typeof e=="string")return e;for(const t of e)if(t.type==="text")return t.text;return""}userContentToFiles(e){return typeof e=="string"?[]:e.filter(t=>t.type!=="text")}regenerateAfterId(e){this.removeAfterId(e),this.startGenerating()}startGenerating(){this.socket.emit("start-generating",{messages:this.oaiMessages()}),this.generating=!0,this.scroll.scroll("force")}oaiMessages(){return Oi(this.msgMapping.get(),this.msgOrder)}newUserMessage(e){this.setMessage({id:ke(),role:"user",content:e})}updateUserMessageContent(e,t){this.msgMapping.update(s=>{const r=s[e];if(r.role!=="user")return console.error(`Invalid message update. Existing message '${e}' is not a user message.`),s;if(typeof r.content=="string")return r.content=t,s;for(const i of r.content)if(i.type==="text")return i.text=t,s;throw new Error(`Message ${e} has no text content part.`)})}removeAfterId(e){const t=this.msgOrder.indexOf(e);t!==-1&&this.removeAfterIndex(t)}removeAfterIndex(e){if(!this.msgOrder[e])return;const s=this.msgOrder.splice(e+1);this.msgMapping.update(r=>{for(const i of s)delete r[i];return r})}setAllMessages(e,t){Dn(this.msgOrder,t),this.msgMapping.set(e)}handleSetAllEvent(e){const{mapping:t,order:s}=Ci(e);this.setAllMessages(t,s),this.scroll.scroll("force")}handleSetEvent(e){if(!this.generating)return;const t=ns(e);if(!t)return this.errors.add("Client",`Invalid message: ${e}`);this.setMessage(t)}handleUpdateEvent(e){if(!this.generating)return;if(e.role&&e.role!=="assistant")return this.errors.add("Client",`Invalid message update: role must be assistant.: ${e}`);const t=e.id;return t?t in this.msgMapping.get()?this.updateExistingFromDelta(t,e):this.addNewFromDelta(t,e):this.errors.add("Client",`Invalid message update: id not defined.: ${e}`)}addNewFromDelta(e,t){const s=Si(e,t);if("error"in s)return this.errors.add("Client",s.error);this.setMessage(s)}updateExistingFromDelta(e,t){this.msgMapping.update(s=>{const r=s[e];return(r==null?void 0:r.role)==="assistant"?$i(r,t):this.errors.add("Client",`Invalid message update. Existing message '${e}' is not an assistant message.`),s})}setMessage(e){this.msgMapping.update(t=>(e.id in t||this.msgOrder.push(e.id),t[e.id]=e,t))}renderMessages(e=this.msgMapping.get(),t=this.config.get().functions,s=this.generating){var a,h,f,p,g;let i=this.msgOrder.map(d=>e[d]),o,l=[];for(;i.length>0&&(o=i.shift());){if(o.role==="system")continue;if(o.role==="user"){const _=o.id,F={id:_,type:"user",contentText:"",contentImages:[],contentBinaries:[],onsubmit:U=>this.changeUserMessageAndSubmit(_,U)};typeof o.content=="string"?F.contentText=o.content:(F.contentText=this.userContentToText(o.content),F.contentImages=o.content.filter(U=>U.type==="image_url"),F.contentBinaries=o.content.filter(U=>U.type!=="text")),l.push(F);continue}const d={type:"agent",parts:[]};for(i.unshift(o);i[0]&&i[0].role!=="user";){const _=i.shift(),F=_.role,U=_.content??"";if(F!=="assistant")continue;U&&d.parts.push({type:"content",markdownContent:this.renderAssistantMarkdown(U)});const{tool_calls:ie}=_;if(ie&&ie.length>0)for(let{id:ge,function:oe}of ie){const Ne=oe.name??"",ss=oe.arguments??"";let ut=null;for(const ft of i)if(ft.role==="tool"&&ft.tool_call_id===ge){ut=ft.content;break}const I=t[Ne],rs=((a=I==null?void 0:I.header)==null?void 0:a.show)===!1?null:H(((h=I==null?void 0:I.header)==null?void 0:h.text)??`Function call to **\`${Ne}\`**`);d.parts.push({type:"tool_call",id:ge,header:rs,progressMode:this.getFunctionCallStatus(ut,s),args:this.renderFunctionCallArgs(ss,Ne,t),argsTitle:H(((f=I==null?void 0:I.arguments)==null?void 0:f.title)??"Arguments"),result:this.renderFunctionResult(ut,Ne,t),resultTitle:H(((p=I==null?void 0:I.result)==null?void 0:p.title)??"Result"),resultType:((g=I==null?void 0:I.result)==null?void 0:g.type)??"text"})}}l.push(d)}if(!s)return l;const c=l[l.length-1];if((c==null?void 0:c.type)==="user")return l.push({type:"agent",parts:[{type:"content",markdownContent:'<span class="stream-cursor-span"/>'}]}),l;const u=c==null?void 0:c.parts[c.parts.length-1];return(u==null?void 0:u.type)==="content"?u.markdownContent=this.addStreamCursor(u.markdownContent):(u==null?void 0:u.type)==="tool_call"&&(u.args=this.addStreamCursor(u.args)),l}}Re=new WeakMap,Ie=new WeakMap;function Mi(n,e){En(e,!0);let t=P(null);setTimeout(async()=>{$(t,v((await pr(()=>import("./Chat-gMsWqr39.js"),__vite__mapDeps([0,1]))).default))});const s="",r=new bi(s,{transports:["websocket"]});let i=P(v(window.innerWidth)),o=P(v(window.innerHeight));window.addEventListener("resize",()=>{$(i,v(window.innerWidth)),$(o,v(window.innerHeight))});let l=v(Er());Xe(()=>Sr(l?"add":"remove","dark"));const c=new zi("chat",r);var u=Kt(n),a=jt(u);ir(a,()=>T(t),h=>{var f=Kt(h),p=jt(f);or(p,()=>T(t),g=>{g(p,{chat:c,get totalWidth(){return T(i)},get totalHeight(){return T(o)}})}),Qt(h,f)},null),Qt(n,u),Sn()}globalThis.log=(...n)=>console.log(...n);ur(Mi,{target:document.getElementById("app")});export{nr as $,Je as A,P as B,Ki as C,Xe as D,Ui as E,uo as F,io as G,qt as H,ro as I,ao as J,Sn as K,T as L,Cs as M,so as N,fo as O,En as P,go as Q,cr as R,q as S,Gs as T,no as U,ko as V,ir as W,eo as X,co as Y,_t as Z,mo as _,E as a,$ as a0,v as a1,Qt as a2,lo as a3,Xs as a4,Yi as a5,jt as a6,_o as a7,po as a8,oo as a9,lr as aa,Kt as ab,tr as ac,Vi as ad,ji as ae,ho as af,Zi as ag,b,to as c,B as d,Xi as e,Ys as f,$t as g,Me as h,se as i,Di as j,bn as k,Qi as l,Gi as m,Os as n,Wi as o,ct as p,qi as q,A as r,te as s,ce as t,Js as u,J as v,Fi as w,Bi as x,Ji as y,Hi as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Chat-gMsWqr39.js","assets/Chat-p5s1rI4b.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
