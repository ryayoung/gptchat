var qn=Object.defineProperty;var Bn=(s,e,t)=>e in s?qn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var d=(s,e,t)=>(Bn(s,typeof e!="symbol"?e+"":e,t),t),Hn=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var Ge=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)};var ye=(s,e,t)=>(Hn(s,e,"access private method"),t);import St from"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/es/highlight.min.js";import{io as Zn}from"https://cdn.socket.io/4.7.2/socket.io.esm.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const lt=()=>{};function ue(s){for(var e=0;e<s.length;e++)s[e]()}function jn(s,e,t){if(s==null)return e(void 0),t&&t(void 0),lt;const n=s.subscribe(e,t);return n.unsubscribe?()=>n.unsubscribe():n}var G=Array.isArray,Vn=Array.from,Kn=Object.keys,Qn=Object.assign,Ce=Object.defineProperty,H=Object.getOwnPropertyDescriptor;const wi=1,vi=2,Ti=4,Ei=8,Si=16,$i=64,Yn=1,Jn=4,Gn=8,$t=["touchstart","touchmove","touchend"],M=Symbol("$state"),Wn=Object.prototype,Xn=Array.prototype,es=Object.getPrototypeOf,ts=Object.isFrozen;function oe(s,e=!0){if(typeof s=="object"&&s!=null&&!ts(s)){if(M in s)return s[M].p;const t=es(s);if(t===Wn||t===Xn){const n=new Proxy(s,ss);return Ce(s,M,{value:ns(s,n,e),writable:!1}),n}}return s}function ns(s,e,t){return{s:new Map,v:Le(0),a:G(s),i:t,p:e}}const ss={defineProperty(s,e,t){if(t.value){const n=s[M],r=n.s.get(e);r!==void 0&&D(r,oe(t.value,n.i))}return Reflect.defineProperty(s,e,t)},deleteProperty(s,e){const t=s[M],n=t.s.get(e),r=t.a,i=delete s[e];if(r&&i){const o=t.s.get("length"),l=s.length-1;o!==void 0&&o.v!==l&&D(o,l)}return n!==void 0&&D(n,N),e in s&&It(t.v),i},get(s,e,t){var i;const n=s[M];let r=n.s.get(e);if(r===void 0&&(At()||Ae)&&(!(e in s)||(i=H(s,e))!=null&&i.writable)&&(r=(n.i?Le:ge)(oe(s[e],n.i)),n.s.set(e,r)),r!==void 0){const o=L(r);return o===N?void 0:o}return Reflect.get(s,e,t)},getOwnPropertyDescriptor(s,e){const t=Reflect.getOwnPropertyDescriptor(s,e);if(t&&"value"in t){const r=s[M].s.get(e);r&&(t.value=L(r))}return t},has(s,e){var i;if(e===M)return!0;const t=s[M],n=Reflect.has(s,e);let r=t.s.get(e);return(r!==void 0||At()&&(!n||(i=H(s,e))!=null&&i.writable))&&(r===void 0&&(r=(t.i?Le:ge)(n?oe(s[e],t.i):N),t.s.set(e,r)),L(r)===N)?!1:n},set(s,e,t){const n=s[M],r=n.s.get(e);r!==void 0&&D(r,oe(t,n.i));const i=n.a,o=!(e in s);if(i&&e==="length")for(let l=t;l<s.length;l+=1){const c=n.s.get(l+"");c!==void 0&&D(c,N)}if(o&&It(n.v),s[e]=t,i&&o){const l=n.s.get("length"),c=s.length;l!==void 0&&l.v!==c&&D(l,c)}return!0},ownKeys(s){const e=s[M];return L(e.v),Reflect.ownKeys(s)}},Kt=1,fe=2,Ue=4,qe=8,Be=16,ne=64,se=128,O=256,C=512,he=1024,Xe=2048,He=4096,Ze=Ue|qe|Be,Qt=0,rs=1,N=Symbol(),Yt=Symbol();let Re=Qt,ze=!1,Oe=!1,I=[],te=[],et=[],pe=0,B=null,x=null,v=null,$=0,j=null,V=!1,tt=!1,le=!1,R=null,w=null,Ae=!1;function Me(s){const e=s||w;return e!==null&&e.r}function Jt(s,e){return s===e}function is(s,e){return{c:null,e:Jt,f:s,v:e,x:null}}function Gt(s,e,t){return{b:t,c:null,d:null,e:null,f:s,i:null,r:null,v:e,x:null,y:null}}function Wt(s,e){const t=s.r;t===null?s.r=[e]:t.push(e)}function ct(s){const e=s.f;if(e&C||s.v===N)return!0;if(e&he){const t=s.d;if(t!==null){const n=t.length;let r;for(r=0;r<n;r++){const i=t[r];if(i.f&he&&!ct(i)){q(i,O);continue}if(i.f&C)if(i.f&fe){if(rn(i,!0),s.f&C)return!0}else return!0}}}return!1}function Xt(s){const e=s.i,t=v,n=$,r=j,i=B,o=R,l=w,c=le,u=(s.f&Be)!==0,a=V;v=null,$=0,j=null,B=s,R=s.b,w=s.x,le=x===null&&(s.f&se)!==0,V=!1,u&&(w==null?void 0:w.u)!=null&&w.u.e();try{let h;u?h=e(s.b):h=e();let f=s.d;if(v!==null){let p;if(f!==null){const m=f.length,g=m>16?new Set(v):null;for(p=$;p<m;p++){const b=f[p];(g!==null&&!g.has(b)||!v.includes(b))&&en(s,b,!1)}}if(f!==null&&$>0)for(f.length=$+v.length,p=0;p<v.length;p++)f[$+p]=v[p];else s.d=f=v;if(!le)for(p=$;p<f.length;p++){const m=f[p],g=m.c;g===null?m.c=[s]:g[g.length-1]!==s&&g.push(s)}}else f!==null&&$<f.length&&(je(s,$,!1),f.length=$);return h}finally{v=t,$=n,j=r,B=i,R=o,w=l,le=c,V=a}}function en(s,e,t){const n=e.c;let r=0;if(n!==null){r=n.length-1;const i=n.indexOf(s);i!==-1&&(r===0?e.c=null:(n[i]=n[r],n.pop()))}t&&r===0&&e.f&se&&(q(e,C),je(e,0,!0))}function je(s,e,t){const n=s.d;if(n!==null){let r;for(r=e;r<n.length;r++){const i=n[r];en(s,i,t)}}}function tn(s){const e=s.r;if(s.r=null,e!==null){let t;for(t=0;t<e.length;t++){const n=e[t];n.f&Ze?P(n):(je(n,0,!0),n.d=null)}}}function os(s,e){if(s!==null)throw e}function Z(s){if(s.f&He)return;const e=s.v,t=x;x=s;try{tn(s),e!==null&&e();const r=Xt(s);typeof r=="function"&&(s.v=r)}catch(r){const i=s.b;if(i!==null)os(i,r);else throw r}finally{x=t}const n=s.x;Me(n)&&s.f&qe&&I.length>0&&as(n)}function nn(){if(pe>100)throw new Error("ERR_SVELTE_TOO_MANY_UPDATES");pe++}function de(s){const e=s.length;if(e>0){nn();let t;for(t=0;t<e;t++){const n=s[t],r=n.f;r&(He|Xe)||(ct(n)?(q(n,O),Z(n)):r&he&&q(n,O))}s.length=0}}function ls(){if(ze=!1,pe>101)return;const s=I,e=te;I=[],te=[],de(s),de(e),ze||(pe=0)}function re(s,e){const t=s.f;e?(Z(s),q(s,O)):(Re===Qt&&(ze||(ze=!0,queueMicrotask(ls))),t&Ue?te.push(s):I.push(s))}function sn(){Oe=!1;const s=et.slice();et=[],ue(s)}function cs(s){Oe||(Oe=!0,setTimeout(sn,0)),et.push(s)}function as(s){const e=[];for(let t=0;t<I.length;t++){const n=I[t];n.f&qe&&n.x===s&&(e.push(n),I.splice(t,1),t--)}de(e)}function at(s){const e=Re,t=I,n=te;try{nn();const r=[],i=[];Re=rs,I=r,te=i,de(t),de(n),s!==void 0&&s(),(I.length>0||i.length>0)&&at(),Oe&&sn(),pe=0}finally{Re=e,I=t,te=n}}async function Rt(){await Promise.resolve(),at()}function rn(s,e){const t=Ae;Ae=!0;const n=Xt(s);Ae=t;const r=le||x===null&&s.f&se?C:O;q(s,r);const i=s.e;i(n,s.v)||(s.v=n,ut(s,C,e))}function Ri(s,e,t){let n=t[e];const r=n===void 0;r&&(n={store:null,last_value:null,value:ge(N),unsubscribe:lt},t[e]=n),(r||n.store!==s)&&(n.unsubscribe(),n.store=s??null,n.unsubscribe=us(s,n.value));const i=L(n.value);return i===N?n.last_value:i}function us(s,e){return s==null?(D(e,void 0),lt):jn(s,n=>{tt=!0,D(e,n),tt=!1})}function Ai(s,e){return s.set(e),e}function Ii(s){gs(()=>{let e;for(e in s)s[e].unsubscribe()})}function L(s){const e=s.f;if(e&He)return s.v;if(B!==null&&!(B.f&ne)&&!V){const t=(B.f&se)!==0,n=B.d;v===null&&n!==null&&n[$]===s&&!(t&&x!==null)?$++:(n===null||$===0||n[$-1]!==s)&&(v===null?v=[s]:s!==v[v.length-1]&&v.push(s)),j!==null&&x!==null&&x.f&O&&j.includes(s)&&(q(x,C),re(x,!1))}return e&fe&&ct(s)&&rn(s,!1),s.v}function D(s,e){return on(s,e),e}function nt(s,e){const t=s.f;(t&Xe)!==0!==e&&(s.f^=Xe,!e&&t&Ze&&!(t&O)&&re(s,!1));const r=s.r;if(r!==null){let i;for(i=0;i<r.length;i++)nt(r[i],e)}}function ut(s,e,t){const n=Me(s.x),r=s.c;if(r!==null){const i=r.length;let o;for(o=0;o<i;o++){const l=r[o],c=l.f,u=(c&se)!==0,a=(c&C)!==0;a&&!u||(!t||!n)&&l===x||(q(l,e),(c&O||a&&u)&&(l.f&Ze?re(l,!1):ut(l,he,t)))}}}function on(s,e){if(!V&&!tt&&B!==null&&Me(s.x)&&B.f&fe)throw new Error("ERR_SVELTE_UNSAFE_MUTATION");if(s.f&Kt&&!s.e(e,s.v)){const t=s.x;if(s.v=e,Me(t)&&x!==null&&x.c===null&&x.f&O&&(v!==null&&v.includes(s)?(q(x,C),re(x,!1)):j===null?j=[s]:j.push(s)),ut(s,C,!0),x===null&&I.length===0){const n=t==null?void 0:t.u;if(n!=null){ue(n.b);const r=cn(()=>{P(r),ue(n.a)})}}}}function P(s){const e=s.v,t=s.y,n=s.f;tn(s),je(s,0,!0),s.i=s.r=s.y=s.x=s.b=s.v=s.d=s.c=null,q(s,He),t!==null&&(G(t)?ue(t):t()),e!==null&&n&Ze&&e()}function fs(s){const e=x===null,t=e?fe|se:fe,n=Gt(t|O,N,R);return n.i=s,n.x=w,n.e=Jt,e||Wt(x,n),n}function Le(s){const e=is(Kt|O,s);return e.x=w,e}function ge(s){const e=Le(s);return e.e=un,e}function me(s){const e=V;try{return V=!0,s()}finally{V=e}}function Ve(s,e,t,n,r){const i=Gt(s|C,null,n);return i.i=e,i.x=w,r&&re(i,t),x!==null&&!(s&ne)&&Wt(x,i),i}function At(){return x?(x.f&ne)===0:!1}function ln(s){if(x===null)throw new Error("ERR_SVELTE_ORPHAN_EFFECT");const e=x.f&Be&&w!==null&&!w.m,t=Ve(Ue,s,!1,R,!e);if(e){let n=w.e;n===null&&(n=w.e=[]),n.push(t)}return t}function cn(s){return Ve(Ue|ne,s,!1,R,!0)}function hs(s,e){return Ve(qe|ne,s,e,R,!0)}function E(s,e=R,t=!1,n=!0){let r=Be;return t&&(r|=ne),Ve(r,s,n,e,!0)}function Ke(s,e){let t=s.y;t===null?s.y=e:G(t)?t.push(e):s.y=[t,e]}const ps=~(C|he|O);function q(s,e){s.f=s.f&ps|e}function an(s){return typeof s=="object"&&s!==null&&typeof s.f=="number"}function ds(s){return typeof s=="object"&&s!==null&&s.t===Yt}function Ci(s,e,t,n){var h;var r=(t&Yn)!==0,i=(h=H(s,e))==null?void 0:h.set,o=s[e];o===void 0&&n!==void 0&&(t&Gn&&(n=n()),o=n,i&&i(o));var l=()=>{var f=s[e];return f!==void 0&&(n=void 0),f===void 0?n:f};if(!(t&Jn))return l;if(i)return function(f){return arguments.length===1?(i(f),f):l()};var c=!1,u=ge(o),a=fs(()=>{var f=l(),p=L(u);return c?(c=!1,p):u.v=f});return r||(a.e=un),function(f,p=!1){var m=L(a);return arguments.length>0?((p||(r?f!==m:ft(f,m)))&&(c=!0,D(u,p?m:f),L(a)),f):m}}function ft(s,e){return s!=s?e==e:s!==e||s!==null&&typeof s=="object"||typeof s=="function"}function un(s,e){return!ft(s,e)}function It(s,e=1){const t=L(s);return on(s,t+e),t}function gs(s){ln(()=>()=>me(s))}function fn(s,e=!1){w={a:null,c:null,e:null,m:!1,p:w,s,r:e,u:null}}function hn(s){const e=w;if(e!==null){s!==void 0&&(e.a=s);const t=e.e;if(t!==null){e.e=null;for(let n=0;n<t.length;n++)re(t[n],!1)}w=e.p,e.m=!0}}function zi(s,e){return{o:s,p:e,t:Yt}}function Oi(s){return an(s)?L(s):ds(s)?s.o[s.p]:s}const ms=0,_s=1,ks=2,bs=3,xs=5,ys=7,ws=9;function vs(s){return{d:null,e:null,i:s,p:null,r:null,t:ms}}function Ts(){return{a:null,ae:null,c:null,ce:null,d:null,e:null,p:R,r:null,t:_s,v:!1}}function Es(){return{d:null,e:null,p:R,r:null,t:xs}}function Ss(){return{d:null,e:null,p:R,r:null,t:ys}}function Mi(s,e){return{a:e,d:null,f:s,v:[],e:null,p:R,r:null,s:[],t:ks}}function Li(s,e,t){return{a:null,d:null,e:null,i:e,k:t,v:s,p:R,r:null,s:null,t:bs}}function $s(){return{d:null,p:R,e:null,r:null,t:ws}}let y=null;function Y(s){y=s}function ht(s){const e=[];let t=s,n=null;for(;t!==null;){const r=t.nodeType,i=t.nextSibling;if(r===8){const o=t.data;if(o.startsWith("ssr:")){const l=o.slice(4);if(n===null)n=l;else{if(l===n)return e;e.push(t)}t=i;continue}}n!==null&&e.push(t),t=i}return null}function ke(s,e){let t=s;if(y!==null)if(e&&(t=t.firstChild),t.nodeType===8){let n=t.$$fragment;n===void 0?n=ht(t):cs(()=>{t.$$fragment=void 0}),Y(n)}else{const n=t.firstChild;Y(n===null?[]:[n])}}var K,we,Ct,ve,pn,dn,gn,mn,pt,_n,kn,bn;function Rs(){K===void 0&&(K=Node.prototype,we=Element.prototype,Ct=Text.prototype,ve=Map.prototype,pn=K.appendChild,dn=K.cloneNode,gn=ve.set,mn=ve.get,ve.delete,we.__click=void 0,Ct.__nodeValue=" ",we.__className="",pt=H(K,"firstChild").get,_n=H(K,"nextSibling").get,kn=H(K,"textContent").set,bn=H(we,"className").set)}function zt(s,e){pn.call(s,e)}function Pi(s,e,t){gn.call(s,e,t)}function Di(s,e){return mn.call(s,e)}function As(s,e){return dn.call(s,e)}function st(s){const e=pt.call(s);if(y!==null)if(e===null){const t=document.createTextNode("");return s.appendChild(t),t}else return dt(e);return e}function Is(s){if(y!==null){const e=s[0];return y!==null&&e!==null?dt(e):e}return pt.call(s)}function Ni(s){const e=_n.call(s);return y!==null&&e!==null?dt(e):e}function Cs(s,e){bn.call(s,e)}function Fi(s){kn.call(s,"")}function dt(s){if(s.nodeType===8&&s.data.startsWith("ssr:")&&y.at(-1)!==s){const e=ht(s),n=(e.at(-1)||s).nextSibling;return n.$$fragment=e,n}return s}function gt(s){var e=document.createElement("template");return e.innerHTML=s,e.content}function zs(s,e,t){if(G(s)){for(var n=0,r;n<s.length;n++)r=s[n],t===null?zt(e,r):t.before(r);return s[0]}else s!==null&&(t===null?zt(e,s):t.before(s));return s}function T(s){var e=s;if(G(s))for(var t=0,n;t<s.length;t++)n=s[t],t===0&&(e=n),n.isConnected&&n.remove();else s.isConnected&&s.remove();return e}function Os(s,e,t){if(ke(s),y!==null)return y;var n=e+"",r=s,i;t&&(n=`<svg>${n}</svg>`);var o=gt(n);t&&(o=o.firstChild);var l=o.cloneNode(!0);return i=Array.from(l.childNodes),i.forEach(c=>{r.before(c)}),i}function ee(s,e,t){const n=[];for(const r of s){const i=r.r;e==="in"?(i==="in"||i==="both"?r.in():r.c(),r.d.inert=!1,nt(r.e,!1)):e==="key"?i==="key"&&(r.p=r.i(t),r.in()):((i==="out"||i==="both")&&(r.p=r.i(),n.push(r.o)),r.d.inert=!0,nt(r.e,!0))}if(n.length>0){const r=hs(()=>{P(r);const i=cn(()=>{P(i),ue(n)})},!1)}}const xn=new Set,rt=new Set;function Ms(){return document.createTextNode("")}function Ls(s,e){let t;return()=>{if(t===void 0){const n=gt(s);t=e?n:st(n)}return t}}function Ui(s,e){let t;return()=>{if(t===void 0){const n=st(gt(`<svg>${s}</svg>`));t=e?n:st(n)}return t}}function yn(s,e,t,n){if(y!==null){t!==null&&ke(t,!1);const r=y;if(r!==null)return s?r:r[0]}return e?As(n(),!0):document.importNode(n(),!0)}function qi(s,e,t){return yn(!1,e,s,t)}function Ps(s,e,t){return yn(!0,e,s,t)}const Ds=Ls("<!>",!0);function Ns(s){return Ps(s,!0,Ds)}function wn(s,e,t){const n=R,r=e?G(s)?s:Array.from(s.childNodes):s;t!==null&&y===null&&zs(r,null,t),n.d=r}function Bi(s,e){wn(e,!1,s)}function Fs(s,e){wn(e,!0,s)}function Hi(s,e,t,n,r){const i={capture:n,passive:r},o=t;e.addEventListener(s,o,i),(e===document.body||e===window||e===document)&&E(()=>()=>{e.removeEventListener(s,o,i)})}function Zi(s,e){E(()=>{const t=e();Us(s,t)})}function Us(s,e){const t=s.__className,n=Bs(e),r=y!==null;r&&s.className===n?s.__className=n:(t!==n||r&&s.className!==n)&&(n===""?s.removeAttribute("class"):Cs(s,n),s.__className=n)}function ji(s,e){E(()=>qs(s,e()))}function qs(s,e){const t=s.__nodeValue,n=js(e);y!==null&&s.nodeValue===n?s.__nodeValue=n:t!==n&&(s.nodeValue=n,s.__nodeValue=n)}function Bs(s){return s??""}function Hs(s,e,t){t?s.classList.add(e):s.classList.remove(e)}function Vi(s,e,t){E(()=>{const n=t();Hs(s,e,n)})}function Ki(s,e,t){const n=H(s,e);n&&n.set&&(s[e]=t,E(()=>()=>{s[e]=null}))}function Qi(s,e,t){me(()=>{e(s),E(()=>()=>{E(()=>{me(()=>{(!an(t)||t.v===s)&&e(null)})})})})}function Yi(s){for(let e=0;e<s.length;e++)xn.add(s[e]);for(const e of rt)e(s)}function Ot(s,e){var l;const t=e.type,n=((l=e.composedPath)==null?void 0:l.call(e))||[];let r=n[0]||e.target;e.target!==r&&Ce(e,"target",{configurable:!0,value:r});let i=0;const o=e.__root;if(o){const c=n.indexOf(o);if(c!==-1&&s===document)return;c<n.indexOf(s)&&(i=c)}for(r=n[i]||e.target,Ce(e,"currentTarget",{configurable:!0,get(){return r||document}});r!==null;){const c=r.parentNode||r.host||null,u="__"+t,a=r[u];if(a!==void 0&&!r.disabled)if(G(a)){const[h,...f]=a;h.apply(r,[e,...f])}else a.call(r,e);if(e.cancelBubble||c===s)break;r=c}e.__root=s}function Ji(s,e,t,n){const r=Ts();ke(s);const i=y;let o=null,l=null,c=!1,u=!1;const a=E(()=>{var m;const p=!!e();if(r.v!==p||!c){if(r.v=p,c){const g=r.c,b=r.a;p?(b===null||b.size===0?Z(f):ee(b,"out"),g===null||g.size===0?Z(h):ee(g,"in")):(g===null||g.size===0?Z(h):ee(g,"out"),b===null||b.size===0?Z(f):ee(b,"in"))}else if(y!==null){const g=(m=y==null?void 0:y[0])==null?void 0:m.data;!g||g==="ssr:if:true"&&!p||g==="ssr:if:false"&&p?(T(y),Y(null)):y.shift()}c=!0}},r,!1),h=E(()=>{o!==null&&(T(o),o=null),r.v&&(t(s),u||(Y(i),u=!0)),o=r.d,r.d=null},r,!0);r.ce=h;const f=E(()=>{l!==null&&(T(l),l=null),r.v||(n!==null&&n(s),u||(Y(i),u=!0)),l=r.d,r.d=null},r,!0);r.ae=f,Ke(a,()=>{o!==null&&T(o),l!==null&&T(l),P(h),P(f)}),r.e=a}function Zs(s,e,t){const n=Ss();let r=null;ke(s);let i=null;n.r=u=>{const a=r,h=a.s;h.add(u),u.f(()=>{h.delete(u),h.size===0&&a.e!==null&&(a.d!==null&&(T(a.d),a.d=null),P(a.e),a.e=null)})};const o=()=>{const u={d:null,e:null,s:new Set,p:r},a=E(()=>{const h=n.d;h!==null&&(T(h),n.d=null),i&&t(i),u.d=n.d,n.d=null},n,!0);u.e=a,r=u},l=()=>{const u=r;if(u===null){o();return}const a=u.s;a.size===0?(u.d!==null&&(T(u.d),u.d=null),u.e?Z(u.e):o()):(o(),ee(a,"out"))},c=E(()=>{const u=e();i!==u&&(i=u,l())},n,!1);Ke(c,()=>{let u=r;for(;u!==null;){const a=u.d;a!==null&&T(a);const h=u.e;h!==null&&P(h),u=u.p}}),n.e=c}function Gi(s,e,t){const n=Es();let r=null;ke(s);let i=N,o=!1;n.r=a=>{const h=r,f=h.s;f.add(a),a.f(()=>{f.delete(a),f.size===0&&h.e!==null&&(h.d!==null&&(T(h.d),h.d=null),P(h.e),h.e=null)})};const l=()=>{const a={d:null,e:null,s:new Set,p:r},h=E(()=>{t(s),a.d=n.d,n.d=null},n,!0,!0);a.e=h,r=a},c=()=>{const a=r;if(a===null){l();return}const h=a.s;h.size===0?(a.d!==null&&(T(a.d),a.d=null),a.e?Z(a.e):l()):(ee(h,"out"),l())},u=E(()=>{const a=i;i=e(),o&&ft(a,i)&&c()},n,!1);c(),o=!0,Ke(u,()=>{let a=r;for(;a!==null;){const h=a.d;h!==null&&T(h);const f=a.e;f!==null&&P(f),a=a.p}}),n.e=u}function js(s){return typeof s=="string"?s:s==null?"":s+""}function Wi(s,e,t){let n,r;const i=E(()=>{r!==(r=e())&&(n&&T(n),n=Os(s,r,t))});Ke(i,()=>{n&&T(n)})}function Xi(s){y!==null&&s.firstChild!==null&&(s.textContent="")}function eo(s,e,t){E(()=>{const n=t();Vs(s,e,n)})}function Vs(s,e,t){t=t==null?null:t+"",(y===null||s.getAttribute(e)!==t&&e!=="src"&&e!=="href"&&e!=="srcset")&&(t===null?s.removeAttribute(e):s.setAttribute(e,t))}function Ks(s,e){const t=oe(e.props||{},!1);let[n,r]=vn(s,{...e,props:t});const i={$set:o=>{Qn(t,o)},$destroy:r};for(const o of Kn(n||{}))Ce(i,o,{get(){return n[o]},set(l){at(()=>n[o]=l)},enumerable:!0});return i}function vn(s,e){var f,p;Rs();const t=new Set,n=e.target,r=vs(e.intro||!1),i=n.firstChild,o=ht(i),l=y;let c;try{let m=null;o===null&&(m=Ms(),n.appendChild(m)),Y(o);const g=E(()=>{e.context&&(fn({}),w.c=e.context),c=s(m,e.props||{},e.events||{}),e.context&&hn()},r,!0);r.e=g}catch(m){if(e.recover!==!1&&o!==null)return console.error("ERR_SVELTE_HYDRATION_MISMATCH",m),T(o),i.remove(),(p=(f=o.at(-1))==null?void 0:f.nextSibling)==null||p.remove(),vn(s,e);throw m}finally{Y(l)}const u=Ot.bind(null,n),a=Ot.bind(null,document),h=m=>{for(let g=0;g<m.length;g++){const b=m[g];t.has(b)||(t.add(b),n.addEventListener(b,u,$t.includes(b)?{passive:!0}:void 0),document.addEventListener(b,a,$t.includes(b)?{passive:!0}:void 0))}};return h(Vn(xn)),rt.add(h),[c,()=>{for(const g of t)n.removeEventListener(g,u);rt.delete(h);const m=r.d;m!==null&&T(m),o!==null&&T(o),P(r.e)}]}function to(s,e,t){const n=$s();E(()=>{const r=s();return me(()=>r(e,t)),()=>{n.d!==null&&T(n.d)}},n)}function Qs(s){ln(()=>{const e=me(s);if(typeof e=="function")return e})}const Ys="modulepreload",Js=function(s){return"/"+s},Mt={},Gs=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link");r=Promise.all(t.map(o=>{if(o=Js(o),o in Mt)return;Mt[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!n)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=l?"stylesheet":Ys,l||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),l)return new Promise((h,f)=>{a.addEventListener("load",h),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Ws="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ws);let Te;const Xs=new Uint8Array(16);function er(){if(!Te&&(Te=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Te))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Te(Xs)}const S=[];for(let s=0;s<256;++s)S.push((s+256).toString(16).slice(1));function tr(s,e=0){return S[s[e+0]]+S[s[e+1]]+S[s[e+2]]+S[s[e+3]]+"-"+S[s[e+4]]+S[s[e+5]]+"-"+S[s[e+6]]+S[s[e+7]]+"-"+S[s[e+8]]+S[s[e+9]]+"-"+S[s[e+10]]+S[s[e+11]]+S[s[e+12]]+S[s[e+13]]+S[s[e+14]]+S[s[e+15]]}const nr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lt={randomUUID:nr};function sr(s,e,t){if(Lt.randomUUID&&!e&&!s)return Lt.randomUUID();s=s||{};const n=s.random||(s.rng||er)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=n[r];return e}return tr(n)}function We(){}const Ie=sr,rr=/^\w*(Error|Exception|An error):/,ir=/^Traceback \(most recent call last\):/;function or(s){return rr.test(s)||ir.test(s)}function lr(s,e){return s.reduce((t,n)=>(t[n[e]]=n,t),{})}function cr(s,e){s.splice(0,s.length,...e)}function ar(s,e="}"){try{return JSON.parse(s)}catch{}let t=s.length;for(;t>0;){if(t=s.lastIndexOf(",",t-1),t===-1)try{return JSON.parse(s+e)}catch{return null}try{return JSON.parse(s.slice(0,t)+e)}catch{}}return null}function Ee(s,e=""){return"```"+e+`
`+s+"\n```"}function Pt(s){try{return JSON.stringify(JSON.parse(s),null,2)}catch{return s}}function Dt(s,e){return new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{var l;const o=(l=i.target)==null?void 0:l.result;o!=null?t(o):n(new Error("File read resulted in null data"))},r.onerror=i=>{var o,l;n(new Error(`Error reading file: ${((l=(o=i.target)==null?void 0:o.error)==null?void 0:l.message)||"Unknown error"}`))},r[`readAs${e}`](s)})}function ur(s,e="",t=!1){let n=document.createElement("input");n.type="file",n.accept=e,n.multiple=t,n.onchange=async r=>{const i=r.target.files;if(i&&i.length>0)return s(t?Array.from(i):i[0])},n.click()}function fr(s){try{const e=localStorage.getItem(s);return JSON.parse(e)}catch{return null}}function hr(s,e){try{localStorage.setItem(s,JSON.stringify(e))}catch(t){console.error(t)}}function mt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let W=mt();function Tn(s){W=s}const En=/[&<>"']/,pr=new RegExp(En.source,"g"),Sn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,dr=new RegExp(Sn.source,"g"),gr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Nt=s=>gr[s];function A(s,e){if(e){if(En.test(s))return s.replace(pr,Nt)}else if(Sn.test(s))return s.replace(dr,Nt);return s}const mr=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function _r(s){return s.replace(mr,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const kr=/(^|[^\[])\^/g;function k(s,e){let t=typeof s=="string"?s:s.source;e=e||"";const n={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(kr,"$1"),t=t.replace(r,o),n},getRegex:()=>new RegExp(t,e)};return n}function Ft(s){try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const ce={exec:()=>null};function Ut(s,e){const t=s.replace(/\|/g,(i,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),n=t.split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function Se(s,e,t){const n=s.length;if(n===0)return"";let r=0;for(;r<n;){const i=s.charAt(n-r-1);if(i===e&&!t)r++;else if(i!==e&&t)r++;else break}return s.slice(0,n-r)}function br(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return-1}function qt(s,e,t,n){const r=e.href,i=e.title?A(e.title):null,o=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){n.state.inLink=!0;const l={type:"link",raw:t,href:r,title:i,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,l}return{type:"image",raw:t,href:r,title:i,text:A(o)}}function xr(s,e){const t=s.match(/^(\s+)(?:```)/);if(t===null)return e;const n=t[1];return e.split(`
`).map(r=>{const i=r.match(/^\s+/);if(i===null)return r;const[o]=i;return o.length>=n.length?r.slice(n.length):r}).join(`
`)}class Pe{constructor(e){d(this,"options");d(this,"rules");d(this,"lexer");this.options=e||W}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Se(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],r=xr(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const r=Se(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const n=Se(t[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(n);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",c="",u=!1;for(;e;){let a=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,Ye=>" ".repeat(3*Ye.length)),f=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,c=h.trimStart()):(p=t[2].search(/[^ ]/),p=p>4?1:p,c=h.slice(p),p+=t[1].length);let m=!1;if(!h&&/^ *$/.test(f)&&(l+=f+`
`,e=e.substring(f.length+1),a=!0),!a){const Ye=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),vt=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Tt=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),Et=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const Je=e.split(`
`,1)[0];if(f=Je,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Tt.test(f)||Et.test(f)||Ye.test(f)||vt.test(e))break;if(f.search(/[^ ]/)>=p||!f.trim())c+=`
`+f.slice(p);else{if(m||h.search(/[^ ]/)>=4||Tt.test(h)||Et.test(h)||vt.test(h))break;c+=`
`+f}!m&&!f.trim()&&(m=!0),l+=Je+`
`,e=e.substring(Je.length+1),h=f.slice(p)}}i.loose||(u?i.loose=!0:/\n *\n *$/.test(l)&&(u=!0));let g=null,b;this.options.gfm&&(g=/^\[[ xX]\] /.exec(c),g&&(b=g[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:l,task:!!g,checked:b,loose:!1,text:c,tokens:[]}),i.raw+=l}i.items[i.items.length-1].raw=l.trimEnd(),i.items[i.items.length-1].text=c.trimEnd(),i.raw=i.raw.trimEnd();for(let a=0;a<i.items.length;a++)if(this.lexer.state.top=!1,i.items[a].tokens=this.lexer.blockTokens(i.items[a].text,[]),!i.loose){const h=i.items[a].tokens.filter(p=>p.type==="space"),f=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));i.loose=f}if(i.loose)for(let a=0;a<i.items.length;a++)i.items[a].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:i}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=Ut(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const l of r)/^ *-+: *$/.test(l)?o.align.push("right"):/^ *:-+: *$/.test(l)?o.align.push("center"):/^ *:-+ *$/.test(l)?o.align.push("left"):o.align.push(null);for(const l of n)o.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of i)o.rows.push(Ut(l,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:A(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const o=Se(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{const o=br(t[2],"()");if(o>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),qt(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const r=(n[2]||n[1]).replace(/\s+/g," "),i=t[r.toLowerCase()];if(!i){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return qt(n,i,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const o=[...r[0]].length-1;let l,c,u=o,a=0;const h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(r=h.exec(t))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(c=[...l].length,r[3]||r[4]){u+=c;continue}else if((r[5]||r[6])&&o%3&&!((o+c)%3)){a+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+a);const f=[...r[0]][0].length,p=e.slice(0,o+r.index+f+c);if(Math.min(o,c)%2){const g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const r=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return r&&i&&(n=n.substring(1,n.length-1)),n=A(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=A(t[1]),r="mailto:"+n):(n=A(t[1]),r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=A(t[0]),i="mailto:"+r;else{let o;do o=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(o!==t[0]);r=A(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return this.lexer.state.inRawBlock?n=t[0]:n=A(t[0]),{type:"text",raw:t[0],text:n}}}}const yr=/^(?: *(?:\n|$))+/,wr=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,vr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,be=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Tr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,$n=/(?:[*+-]|\d{1,9}[.)])/,Rn=k(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,$n).getRegex(),_t=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Er=/^[^\n]+/,kt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Sr=k(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",kt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),$r=k(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,$n).getRegex(),Qe="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bt=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Rr=k("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",bt).replace("tag",Qe).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),An=k(_t).replace("hr",be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qe).getRegex(),Ar=k(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",An).getRegex(),xt={blockquote:Ar,code:wr,def:Sr,fences:vr,heading:Tr,hr:be,html:Rr,lheading:Rn,list:$r,newline:yr,paragraph:An,table:ce,text:Er},Bt=k("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qe).getRegex(),Ir={...xt,table:Bt,paragraph:k(_t).replace("hr",be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Bt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qe).getRegex()},Cr={...xt,html:k(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",bt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ce,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:k(_t).replace("hr",be).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Rn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},In=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,zr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Cn=/^( {2,}|\\)\n(?!\s*$)/,Or=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,xe="\\p{P}$+<=>`^|~",Mr=k(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,xe).getRegex(),Lr=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Pr=k(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,xe).getRegex(),Dr=k("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,xe).getRegex(),Nr=k("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,xe).getRegex(),Fr=k(/\\([punct])/,"gu").replace(/punct/g,xe).getRegex(),Ur=k(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),qr=k(bt).replace("(?:-->|$)","-->").getRegex(),Br=k("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",qr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),De=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Hr=k(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",De).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),zn=k(/^!?\[(label)\]\[(ref)\]/).replace("label",De).replace("ref",kt).getRegex(),On=k(/^!?\[(ref)\](?:\[\])?/).replace("ref",kt).getRegex(),Zr=k("reflink|nolink(?!\\()","g").replace("reflink",zn).replace("nolink",On).getRegex(),yt={_backpedal:ce,anyPunctuation:Fr,autolink:Ur,blockSkip:Lr,br:Cn,code:zr,del:ce,emStrongLDelim:Pr,emStrongRDelimAst:Dr,emStrongRDelimUnd:Nr,escape:In,link:Hr,nolink:On,punctuation:Mr,reflink:zn,reflinkSearch:Zr,tag:Br,text:Or,url:ce},jr={...yt,link:k(/^!?\[(label)\]\((.*?)\)/).replace("label",De).getRegex(),reflink:k(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",De).getRegex()},it={...yt,escape:k(In).replace("])","~|])").getRegex(),url:k(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Vr={...it,br:k(Cn).replace("{2,}","*").getRegex(),text:k(it.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},$e={normal:xt,gfm:Ir,pedantic:Cr},ie={normal:yt,gfm:it,breaks:Vr,pedantic:jr};class F{constructor(e){d(this,"tokens");d(this,"options");d(this,"state");d(this,"tokenizer");d(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||W,this.options.tokenizer=this.options.tokenizer||new Pe,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:$e.normal,inline:ie.normal};this.options.pedantic?(t.block=$e.pedantic,t.inline=ie.pedantic):this.options.gfm&&(t.block=$e.gfm,this.options.breaks?t.inline=ie.breaks:t.inline=ie.gfm),this.tokenizer.rules=t}static get rules(){return{block:$e,inline:ie}}static lex(e,t){return new F(t).lex(e)}static lexInline(e,t){return new F(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,c,u)=>c+"    ".repeat(u.length));let n,r,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(n=l.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(a=>{u=a.call({lexer:this},c),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){r=t[t.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,i,o=e,l,c,u;if(this.tokens.links){const a=Object.keys(this.tokens.links);if(a.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)a.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,l.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(a=>(n=a.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),r=t[t.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,o,u)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let a=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(a=Math.min(a,f))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(n=this.tokenizer.inlineText(i)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),c=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return t}}class Ne{constructor(e){d(this,"options");this.options=e||W}code(e,t,n){var i;const r=(i=(t||"").match(/^\S*/))==null?void 0:i[0];return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+A(r)+'">'+(n?e:A(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:A(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,n){const r=t?"ol":"ul",i=t&&n!==1?' start="'+n+'"':"";return"<"+r+i+`>
`+e+"</"+r+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const r=Ft(e);if(r===null)return n;e=r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>",i}image(e,t,n){const r=Ft(e);if(r===null)return n;e=r;let i=`<img src="${e}" alt="${n}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return e}}class wt{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class U{constructor(e){d(this,"options");d(this,"renderer");d(this,"textRenderer");this.options=e||W,this.options.renderer=this.options.renderer||new Ne,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new wt}static parse(e,t){return new U(t).parse(e)}static parseInline(e,t){return new U(t).parseInline(e)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=i,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){n+=l||"";continue}}switch(i.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const o=i;n+=this.renderer.heading(this.parseInline(o.tokens),o.depth,_r(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=i;n+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=i;let l="",c="";for(let a=0;a<o.header.length;a++)c+=this.renderer.tablecell(this.parseInline(o.header[a].tokens),{header:!0,align:o.align[a]});l+=this.renderer.tablerow(c);let u="";for(let a=0;a<o.rows.length;a++){const h=o.rows[a];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});u+=this.renderer.tablerow(c)}n+=this.renderer.table(l,u);continue}case"blockquote":{const o=i,l=this.parse(o.tokens);n+=this.renderer.blockquote(l);continue}case"list":{const o=i,l=o.ordered,c=o.start,u=o.loose;let a="";for(let h=0;h<o.items.length;h++){const f=o.items[h],p=f.checked,m=f.task;let g="";if(f.task){const b=this.renderer.checkbox(!!p);u?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=b+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=b+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:b+" "}):g+=b+" "}g+=this.parse(f.tokens,u),a+=this.renderer.listitem(g,m,!!p)}n+=this.renderer.list(a,l,c);continue}case"html":{const o=i;n+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=i;n+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=i,l=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&e[r+1].type==="text";)o=e[++r],l+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);n+=t?this.renderer.paragraph(l):l;continue}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=o||"";continue}}switch(i.type){case"escape":{const o=i;n+=t.text(o.text);break}case"html":{const o=i;n+=t.html(o.text);break}case"link":{const o=i;n+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=i;n+=t.image(o.href,o.title,o.text);break}case"strong":{const o=i;n+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=i;n+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=i;n+=t.codespan(o.text);break}case"br":{n+=t.br();break}case"del":{const o=i;n+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=i;n+=t.text(o.text);break}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}}class ae{constructor(e){d(this,"options");this.options=e||W}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}d(ae,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var _e,ot,Fe,Ln;class Mn{constructor(...e){Ge(this,_e);Ge(this,Fe);d(this,"defaults",mt());d(this,"options",this.setOptions);d(this,"parse",ye(this,_e,ot).call(this,F.lex,U.parse));d(this,"parseInline",ye(this,_e,ot).call(this,F.lexInline,U.parseInline));d(this,"Parser",U);d(this,"Renderer",Ne);d(this,"TextRenderer",wt);d(this,"Lexer",F);d(this,"Tokenizer",Pe);d(this,"Hooks",ae);this.use(...e)}walkTokens(e,t){var r,i;let n=[];for(const o of e)switch(n=n.concat(t.call(this,o)),o.type){case"table":{const l=o;for(const c of l.header)n=n.concat(this.walkTokens(c.tokens,t));for(const c of l.rows)for(const u of c)n=n.concat(this.walkTokens(u.tokens,t));break}case"list":{const l=o;n=n.concat(this.walkTokens(l.items,t));break}default:{const l=o;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[l.type]?this.defaults.extensions.childTokens[l.type].forEach(c=>{n=n.concat(this.walkTokens(l[c],t))}):l.tokens&&(n=n.concat(this.walkTokens(l.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=t.renderers[i.name];o?t.renderers[i.name]=function(...l){let c=i.renderer.apply(this,l);return c===!1&&(c=o.apply(this,l)),c}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){const i=this.defaults.renderer||new Ne(this.defaults);for(const o in n.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const l=o,c=n.renderer[l],u=i[l];i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new Pe(this.defaults);for(const o in n.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const l=o,c=n.tokenizer[l],u=i[l];i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new ae;for(const o in n.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const l=o,c=n.hooks[l],u=i[l];ae.passThroughHooks.has(o)?i[l]=a=>{if(this.defaults.async)return Promise.resolve(c.call(i,a)).then(f=>u.call(i,f));const h=c.call(i,a);return u.call(i,h)}:i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,o=n.walkTokens;r.walkTokens=function(l){let c=[];return c.push(o.call(this,l)),i&&(c=c.concat(i.call(this,l))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return F.lex(e,t??this.defaults)}parser(e,t){return U.parse(e,t??this.defaults)}}_e=new WeakSet,ot=function(e,t){return(n,r)=>{const i={...r},o={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const l=ye(this,Fe,Ln).call(this,!!o.silent,!!o.async);if(typeof n>"u"||n===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(n):n).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(l);try{o.hooks&&(n=o.hooks.preprocess(n));let c=e(n,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=t(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return l(c)}}},Fe=new WeakSet,Ln=function(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+A(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}};const J=new Mn;function _(s,e){return J.parse(s,e)}_.options=_.setOptions=function(s){return J.setOptions(s),_.defaults=J.defaults,Tn(_.defaults),_};_.getDefaults=mt;_.defaults=W;_.use=function(...s){return J.use(...s),_.defaults=J.defaults,Tn(_.defaults),_};_.walkTokens=function(s,e){return J.walkTokens(s,e)};_.parseInline=J.parseInline;_.Parser=U;_.parser=U.parse;_.Renderer=Ne;_.TextRenderer=wt;_.Lexer=F;_.lexer=F.lex;_.Tokenizer=Pe;_.Hooks=ae;_.parse=_;_.options;_.setOptions;_.use;_.walkTokens;_.parseInline;U.parse;F.lex;function Pn(s,e){return e=St.getLanguage(e)?e:"plaintext",s=St.highlight(s,{language:e}).value,{language:e,code:`<code class="hljs language-${e}">${s}</code>`}}function Kr(s,e){const{code:t}=Pn(s,e);return`<pre class="markdown-code-block plain">${t}</pre>`}function Qr(s,e){const{language:t,code:n}=Pn(s,e);return t==="plaintext"?`<pre class="markdown-code-block plain">${n}</pre>`:`<div class="wrapped-code-container">
    <div class="lang-banner">
        <span>${t}</span>
    </div>
    <pre class="markdown-code-block wrapped">${n}</pre>
</div>`}function Dn(s=!1){const e=new Mn,t=new e.Renderer;return s?t.code=Qr:t.code=Kr,e.setOptions({renderer:t}),e.parse.bind(e)}const Q=Dn(!1),Ht=Dn(!0);function Nn(s,e){let t=null;const n=function(...r){const i=()=>{t=null,s.apply(this,r)};t!==null&&clearTimeout(t),t=setTimeout(i,e)};return n.cancel=function(){t!==null&&(clearTimeout(t),t=null)},n}function Yr(s,e=8){let t=0;return(...n)=>{const r=new Date().getTime();r-t>=e&&(t=r,s(...n))}}function Jr(s,e){return s!==s?e===e:s!==e||s&&typeof s=="object"||typeof s=="function"}const X=[];function z(s,e=We){let t;const n=new Set;function r(c){if(Jr(s,c)&&(s=c,t)){const u=!X.length;for(const a of n)a[1](),X.push(a,s);if(u){for(let a=0;a<X.length;a+=2)X[a][0](X[a+1]);X.length=0}}}function i(c){r(c(s))}function o(c,u=We){const a=[c,u];return n.add(a),n.size===1&&(t=e(r,i)||We),c(s),()=>{n.delete(a),n.size===0&&t&&(t(),t=null)}}function l(){return s}return{get:l,set:r,update:i,subscribe:o}}function Gr(s,e){return Fn[s](e)}const Fn={agent(s){return s?{name:s.name}:{}},functions(s){return s?Object.entries(s).reduce((e,[t,n])=>{var c,u;const r={},{header:i,result:o,arguments:l}=n;return i&&(r.header={text:i.text,show:i.show}),l&&(r.arguments={},(c=l.show_key_as_code)!=null&&c.key&&((u=l.show_key_as_code)!=null&&u.language)&&(r.arguments.show_key_as_code=l.show_key_as_code),l.title&&(r.arguments.title=l.title)),o&&(r.result={title:o.title,type:o.type}),e[t]=r,e},{}):{}}},Zt={functions:{},agent:{}};function Wr(){const s={...z({...Zt}),setAll(e){this.update(t=>{for(const n in Fn){const r=n;t[r]=Gr(r,e[r])}return t})}};return s.set({...Zt}),s}function Xr(){return{...z(!1)}}const ei={Server:!0,Client:!0};function ti(){return{...z([]),showType(e){return ei[e]},remove(e){this.update(t=>t.filter(n=>n.text!==e))},add(e,t){this.get().some(n=>n.text===t)||(console.error(`${e} Error: ${t}`),this.update(n=>(n.push({type:e,text:t}),n)))}}}class ni{constructor(...e){d(this,"instance");this.instance=Zn(...e)}on(e,t){this.instance.on(e,t)}emit(e,...t){if(typeof t[t.length-1]=="function"){const n=t.pop();this.instance.emit(e,...t,n)}else this.instance.emit(e,...t)}off(e,t){t?this.instance.off(e,t):this.instance.off(e)}}function si(s,e){const t="assistant",n="content"in e&&e.content?e.content:"";if(!(e.tool_calls&&e.tool_calls.length>0))return{id:s,role:t,content:n};const i=e.tool_calls[0];if(!i.id)return{error:"Tool call has no id. Received a partial delta for a tool call that does not exist yet."};if(i.type!=="function")return{error:"Currently, only function tool calls are supported."};const o="function";let{id:l,function:{name:c,arguments:u}}=i;return{id:s,role:t,content:n,tool_calls:[{id:l,type:o,function:{name:c||"",arguments:u||""}}]}}function ri(s,e){var f;if(s.id!==e.id)throw new Error("Message id and delta id must match");if(e.content&&(s.content=s.content!==null?s.content+e.content:e.content),!(e.tool_calls&&e.tool_calls.length>0))return;const n=e.tool_calls[0],r=n.index;if(typeof r!="number"||!n.function)return;const i=!n.id||!((f=n.function)!=null&&f.name);s.tool_calls||(s.tool_calls=[]);const o=s.tool_calls.length,l=r>o,c=r===o;if(l)return;if(c){if(i)return;const p="function",{id:m,function:{name:g,arguments:b}}=n;return s.tool_calls.push({id:m,type:p,function:{name:g,arguments:b}}),!0}const u=s.tool_calls[r],{function:{name:a,arguments:h}}=n;a&&(u.function.name=a),h&&(u.function.arguments+=h)}const jt={user(s){return{role:"user",id:"id"in s&&s.id?s.id:Ie(),content:s.content?s.content:""}},assistant(s){var t,n;const e=s.tool_calls&&s.tool_calls.length>0?s.tool_calls:void 0;if(e){for(const r of e)if(!(r.id&&((t=r.function)!=null&&t.name)&&typeof((n=r.function)==null?void 0:n.arguments)=="string"))return log("Message has invalid tool call. Skipping:",s),null}return{role:"assistant",id:"id"in s&&s.id?s.id:Ie(),content:s.content??"",tool_calls:e}},tool(s){return s.tool_call_id?{role:"tool",id:"id"in s&&s.id?s.id:Ie(),content:s.content??"",tool_call_id:s.tool_call_id}:null}};function Un(s){return s.role&&s.role in jt?jt[s.role](s):null}function ii(s){return s.map(e=>Un(e)).filter(e=>e!==null)}function oi(s){const e=ii(s);return{order:e.map(t=>t.id),mapping:lr(e,"id")}}const li={user(s){let e={role:"user",content:""};if(typeof s.content=="string")e.content=s.content;else{e.content=[];for(const t of s.content)t.type!=="binary"&&e.content.push(t)}return e},assistant(s){let e={role:"assistant",content:s.content};return s.tool_calls&&s.tool_calls.length>0&&(e.tool_calls=s.tool_calls),e},tool(s){return{role:"tool",content:s.content,tool_call_id:s.tool_call_id}}};function ci(s){return li[s.role](s)}function ai(s,e){return e.map(t=>ci(s[t])).filter(t=>t!==null)}class ui{constructor(){d(this,"mapping",z({}));d(this,"order",[])}subscribe(e){return this.mapping.subscribe(t=>e({mapping:t,order:this.order}))}set(e){cr(this.order,e.order),this.mapping.set(e.mapping)}oaiMessages(){return ai(this.mapping.get(),this.order)}serialize(){return{mapping:this.mapping.get(),order:this.order}}newUserMessage(e){this.setMessage({id:Ie(),role:"user",content:e})}updateUserMessageContent(e,t){this.mapping.update(n=>{const r=n[e];if(typeof r.content=="string")return r.content=t,n;for(const i of r.content)if(i.type==="text")return i.text=t,n;throw new Error(`Message ${e} has no text content part.`)})}removeAfterId(e){const t=this.order.indexOf(e);t!==-1&&this.removeAfterIndex(t)}removeAfterIndex(e){if(!this.order[e])return;const n=this.order.splice(e+1);this.mapping.update(r=>{for(const i of n)delete r[i];return r})}handleSetAllEvent(e){const{mapping:t,order:n}=oi(e);return this.set({order:n,mapping:t})}handleSetEvent(e){const t=Un(e);if(!t)return`Invalid message: ${e}`;this.setMessage(t)}handleUpdateEvent(e){if(e.role&&e.role!=="assistant")return`Invalid message update: role must be assistant.: ${e}`;const t=e.id;return t?t in this.mapping.get()?this.updateExistingFromDelta(t,e):this.addNewFromDelta(t,e):`Invalid message update: id not defined.: ${e}`}addNewFromDelta(e,t){const n=si(e,t);if("error"in n)return n.error;this.setMessage(n)}updateExistingFromDelta(e,t){let n;return this.mapping.update(r=>{const i=r[e];return(i==null?void 0:i.role)==="assistant"?ri(i,t):n=`Invalid message update. Existing message '${e}' is not an assistant message.`,r}),n}setMessage(e){e.id in this.mapping.get()||this.order.push(e.id),this.mapping.update(t=>(t[e.id]=e,t))}}const fi={async binary(s){const e=await Dt(s,"ArrayBuffer");return{type:"binary",name:s.name,fileType:s.type,content:e}},async image_url(s){return{type:"image_url",image_url:{url:await Dt(s,"DataURL")}}}};function hi(s){return s.type.startsWith("image")?"image_url":"binary"}class pi{constructor(){d(this,"text",z(""));d(this,"images",z([]));d(this,"files",z([]))}serialize(){return{text:this.text.get(),images:this.images.get(),files:this.files.get()}}set(e){this.text.set(e.text),this.images.set(e.images),this.files.set(e.files)}clear(){this.text.set(""),this.files.set([]),this.images.set([])}textContentPart(){return{type:"text",text:this.text.get()}}isEmpty(){return this.text.get().trim()===""&&this.files.get().length===0&&this.images.get().length===0}removeImage(e){this.images.update(t=>(t.splice(e,1),t))}removeFile(e){this.files.update(t=>(t.splice(e,1),t))}addImage(e){this.images.update(t=>(t.push(e),t))}addFile(e){this.files.update(t=>(t.push(e),t))}textIsEmpty(){return this.text.get().trim()===""}upload(){ur(async e=>{if(!e)return;const t=hi(e);let n;try{n=await fi[t](e)}catch{return}n&&(n.type==="image_url"?this.addImage(n):this.addFile(n))})}getContentParts(){let e=[...this.files.get(),...this.images.get()];return this.textIsEmpty()||e.push(this.textContentPart()),e}}class di{constructor(){d(this,"containerDiv",z(null));d(this,"autoEnabled",!0);d(this,"lastScrollHeight",0);d(this,"lastScrollTop",0);d(this,"handleUserScrollDebounced",Nn(()=>this.handleUserScroll(),100));d(this,"autoScrollThrottled",Yr(()=>this.autoScroll(),200))}scroll(e){e==="force"?this.forceScroll():this.autoScrollThrottled()}handleUserScroll(){const e=this.containerDiv.get();if(!e)return;const{scrollHeight:t,scrollTop:n,clientHeight:r}=e;n<this.lastScrollTop?this.autoEnabled=!1:t-n<=r+50&&(this.autoEnabled=!0),this.lastScrollTop=n}scrollChat(e=!1){const t=this.containerDiv.get();if(!t)return;const{scrollHeight:n}=t;e&&n===this.lastScrollHeight||(t.scrollTo({top:n,behavior:"smooth"}),this.lastScrollHeight=n)}autoScroll(){this.autoEnabled&&Rt().then(()=>this.scrollChat(!0))}forceScroll(){Rt().then(()=>this.scrollChat()),this.autoEnabled=!0}}class gi{constructor(e){d(this,"scroll",new di);d(this,"rendered",z([]));d(this,"connected",z(!1));d(this,"prompt",new pi);d(this,"messages",new ui);d(this,"config",Wr());d(this,"errors",ti());d(this,"generating",Xr());d(this,"defaultMessages",z([]));this.socket=e,this.socket=e,this.socket.on("connect",()=>this.connected.set(!0)),this.socket.on("disconnect",()=>this.connected.set(!1)),this.connected.subscribe(t=>log(t?"connected":"disconnected")),this.socket.on("error",t=>this.errors.add("Server",t)),this.socket.on("error",()=>this.generating.set(!1)),this.socket.on("config",t=>this.config.setAll(t)),this.socket.on("generating-started",()=>this.generating.set(!0)),this.socket.on("generating-done",()=>this.generating.set(!1)),this.socket.on("message-set-all",this.handleSetAllEvent.bind(this)),this.socket.on("message-set",this.handleSetEvent.bind(this)),this.socket.on("message-update",this.handleUpdateEvent.bind(this)),this.socket.on("default-messages",t=>{this.defaultMessages.set(t)}),this.generating.subscribe(t=>log("generating",t)),this.defaultMessages.subscribe(()=>this.setMessagesIfDefault()),this.messages.subscribe(({mapping:t,order:n})=>{this.rendered.set(Vt(t,n)),this.scroll.scroll("auto")})}setMessagesIfDefault(){this.messages.order.length===0&&this.defaultMessages.get().length>0&&this.handleSetAllEvent(this.defaultMessages.get())}serialize(){return{prompt:this.prompt.serialize(),messages:this.messages.serialize(),config:this.config.get(),errors:this.errors.get(),generating:this.generating.get(),defaultMessages:this.defaultMessages.get()}}setFromSerialized(e){e.prompt&&this.prompt.set(e.prompt),e.messages&&this.messages.set(e.messages),e.config&&this.config.set(e.config),e.errors&&this.errors.set(e.errors),e.defaultMessages&&this.defaultMessages.set(e.defaultMessages),e.generating!==void 0&&this.generating.set(e.generating)}handleSetAllEvent(e){this.generating.get()&&(this.messages.handleSetAllEvent(e),this.scroll.scroll("force"))}handleSetEvent(e){if(!this.generating.get())return;const t=this.messages.handleSetEvent(e);t&&this.errors.add("Client",t)}handleUpdateEvent(e){if(!this.generating.get())return;const t=this.messages.handleUpdateEvent(e);t&&this.errors.add("Client",t)}reset(){this.messages.handleSetAllEvent(this.defaultMessages.get())}upload(){this.prompt.upload()}stopGenerating(){this.generating.set(!1)}sendMessage(){if(this.generating.get()||this.prompt.isEmpty())return;const e=this.prompt.getContentParts(),t=e.length===1&&e[0].type==="text"?this.prompt.text.get():e;this.messages.newUserMessage(t),this.prompt.clear(),this.startGenerating()}changeUserMessageAndSubmit(e,t){this.generating.get()||(this.messages.updateUserMessageContent(e,t),this.regenerateAfterId(e))}regenerateOnAgentResponse(e){if(this.generating.get())return;const t=this.rendered.get()[e-1];if(!t||t.type!=="user")throw new Error("Tried to regenerate on an index not preceded by a user message");this.regenerateAfterId(t.id)}renderAssistantMarkdown(e){return Ht(e)}renderFunctionResult(e,t,n){var i,o;if(e===null)return null;const r=(o=(i=n[t])==null?void 0:i.result)==null?void 0:o.type;if(!r)return e;switch(r){case"markdown":return Ht(e);case"html":return e;case"text":return e;case"json":return Q(Ee(Pt(e),"json"));default:return Q(Ee(e,r))}}renderFunctionCallArgs(e,t,n){var i,o;if(!e)return"";const r=(o=(i=n[t])==null?void 0:i.arguments)==null?void 0:o.show_key_as_code;if(r&&r.key){const l=r.key,c=r.language??"plaintext",u=ar(e);if(u&&u[l]){const a=u[l],h=typeof a=="string"?a:JSON.stringify(a,null,2);return Q(Ee(h,c))}}return Q(Ee(Pt(e),"json"))}getArgsTitle(e,t){var r,i;const n=(i=(r=t[e])==null?void 0:r.arguments)==null?void 0:i.title;return Q(n??"Arguments")}getResultTitle(e,t){var r,i;const n=(i=(r=t[e])==null?void 0:r.result)==null?void 0:i.title;return Q(n??"Result")}renderFunctionHeader(e,t){var r;const n=(r=t[e])==null?void 0:r.header;return(n==null?void 0:n.show)===!1?null:Q((n==null?void 0:n.text)??`Function call to **\`${e}()\`**`)}getFunctionResultType(e,t){var n,r;return((r=(n=t[e])==null?void 0:n.result)==null?void 0:r.type)??"text"}getFunctionCallStatus(e,t){const n=t&&e===null;return e&&or(e)?"error":n?"progress":"complete"}userContentToText(e){if(typeof e=="string")return e;for(const t of e)if(t.type==="text")return t.text;return""}userContentToFiles(e){return typeof e=="string"?[]:e.filter(t=>t.type!=="text")}regenerateAfterId(e){this.messages.removeAfterId(e),this.startGenerating()}startGenerating(){this.socket.emit("start-generating",{messages:this.messages.oaiMessages()}),this.generating.set(!0),this.scroll.scroll("force"),this.rendered.set(Vt(this.messages.mapping.get(),this.messages.order,!0))}}function Vt(s,e,t=!1){var o;let n=e.map(l=>s[l]),r,i=[];for(;n.length>0&&(r=n.shift());){if(r.role==="user"){i.push({id:r.id,type:"user",content:r.content});continue}const l={type:"agent",parts:[]};for(n.unshift(r);n[0]&&n[0].role!=="user";){const c=n.shift(),u=c.role,a=c.content??"";if(u==="assistant"){l.parts.push({type:"content",content:a});const{tool_calls:f}=c;if(f&&f.length>0)for(let{id:p,function:{name:m,arguments:g}}of f)m=m??"",g=g??"",l.parts.push({type:"tool_call",id:p,name:m,arguments:g,result:null});continue}const h=c.tool_call_id;for(let f=l.parts.length-1;f>=0;f--){let p=l.parts[f];if(p.type==="tool_call"&&p.id===h){p.result=c.content;break}}}i.push(l)}return t&&((o=i[i.length-1])==null?void 0:o.type)==="user"&&i.push({type:"agent",parts:[{type:"content",content:""}]}),i}const mi="dark";function _i(){const s={...z(!1),checkDarkModePreferred(){return!!window.matchMedia("(prefers-color-scheme: dark)").matches},updateDocument(e){document.documentElement.classList[e?"add":"remove"](mi)}};return s.subscribe(s.updateDocument.bind(s)),s.set(s.checkDarkModePreferred()),s}function ki(s,e){fn(e,!1);let t=ge();Qs(async()=>{D(t,(await Gs(()=>import("./Chat-Nz3AoIx6.js"),__vite__mapDeps([0,1]))).default)});const n="http://127.0.0.1:5004",r=new ni(n,{transports:["websocket"]});_i();const i=new gi(r),o=fr("chat");o&&i.setFromSerialized(o);const l=Nn(()=>{setTimeout(()=>{hr("chat",i.serialize())})},1e3);i.messages.subscribe(l),i.prompt.files.subscribe(l),i.prompt.images.subscribe(l),i.prompt.text.subscribe(l),i.errors.subscribe(l),i.config.subscribe(l),i.generating.subscribe(l);var c=Ns(s),u=Is(c);Zs(u,()=>L(t),a=>{a(u,{chat:i})}),Fs(s,c),hn()}globalThis.log=(...s)=>console.log(...s);Ks(ki,{target:document.getElementById("app")});export{qs as $,ge as A,Le as B,fn as C,Ci as D,Ti as E,ln as F,L as G,Qi as H,Xi as I,Vs as J,Hi as K,Rt as L,Bi as M,Ki as N,hn as O,fs as P,qi as Q,Yi as R,M as S,Ls as T,Ui as U,to as V,Ji as W,Ni as X,st as Y,Vi as Z,eo as _,T as a,Oi as a0,Fs as a1,D as a2,oe as a3,ji as a4,Ps as a5,Ns as a6,Is as a7,Wi as a8,Zi as a9,js as aa,Us as ab,Ii as ac,Ri as ad,Ai as ae,Gi as af,y as b,Fi as c,P as d,Di as e,zs as f,ht as g,ke as h,G as i,wi as j,on as k,zi as l,Pi as m,ds as n,Ei as o,Ke as p,Mi as q,E as r,Y as s,ee as t,Ms as u,Z as v,vi as w,Si as x,Li as y,$i as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Chat-Nz3AoIx6.js","assets/Chat-98IQss1i.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
