var Gn=Object.defineProperty;var Xn=(n,e,t)=>e in n?Gn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var m=(n,e,t)=>(Xn(n,typeof e!="symbol"?e+"":e,t),t),Mt=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var O=(n,e,t)=>(Mt(n,e,"read from private field"),t?t.call(n):e.get(n)),Z=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var $e=(n,e,t)=>(Mt(n,e,"access private method"),t);import Pt from"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/es/highlight.min.js";import{io as es}from"https://cdn.socket.io/4.7.2/socket.io.esm.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const gt=()=>{};function he(n){for(var e=0;e<n.length;e++)n[e]()}function ts(n,e,t){if(n==null)return e(void 0),t&&t(void 0),gt;const s=n.subscribe(e,t);return s.unsubscribe?()=>s.unsubscribe():s}var ee=Array.isArray,ns=Array.from,ss=Object.keys,rs=Object.assign,De=Object.defineProperty,V=Object.getOwnPropertyDescriptor;const Ai=1,Ii=2,Ci=4,Oi=8,zi=16,Mi=64,is=1,os=4,ls=8,Lt=["touchstart","touchmove","touchend"],D=Symbol("$state"),cs=Object.prototype,as=Array.prototype,us=Object.getPrototypeOf,fs=Object.isFrozen;function A(n,e=!0){if(typeof n=="object"&&n!=null&&!fs(n)){if(D in n)return n[D].p;const t=us(n);if(t===cs||t===as){const s=new Proxy(n,ps);return De(n,D,{value:hs(n,s,e),writable:!1}),s}}return n}function hs(n,e,t){return{s:new Map,v:N(0),a:ee(n),i:t,p:e}}const ps={defineProperty(n,e,t){if(t.value){const s=n[D],r=s.s.get(e);r!==void 0&&R(r,A(t.value,s.i))}return Reflect.defineProperty(n,e,t)},deleteProperty(n,e){const t=n[D],s=t.s.get(e),r=t.a,i=delete n[e];if(r&&i){const o=t.s.get("length"),l=n.length-1;o!==void 0&&o.v!==l&&R(o,l)}return s!==void 0&&R(s,U),e in n&&Ft(t.v),i},get(n,e,t){var i;const s=n[D];let r=s.s.get(e);if(r===void 0&&(Nt()||Pe)&&(!(e in n)||(i=V(n,e))!=null&&i.writable)&&(r=(s.i?N:qe)(A(n[e],s.i)),s.s.set(e,r)),r!==void 0){const o=S(r);return o===U?void 0:o}return Reflect.get(n,e,t)},getOwnPropertyDescriptor(n,e){const t=Reflect.getOwnPropertyDescriptor(n,e);if(t&&"value"in t){const r=n[D].s.get(e);r&&(t.value=S(r))}return t},has(n,e){var i;if(e===D)return!0;const t=n[D],s=Reflect.has(n,e);let r=t.s.get(e);return(r!==void 0||Nt()&&(!s||(i=V(n,e))!=null&&i.writable))&&(r===void 0&&(r=(t.i?N:qe)(s?A(n[e],t.i):U),t.s.set(e,r)),S(r)===U)?!1:s},set(n,e,t){const s=n[D],r=s.s.get(e);r!==void 0&&R(r,A(t,s.i));const i=s.a,o=!(e in n);if(i&&e==="length")for(let l=t;l<n.length;l+=1){const c=s.s.get(l+"");c!==void 0&&R(c,U)}if(o&&Ft(s.v),n[e]=t,i&&o){const l=s.s.get("length"),c=n.length;l!==void 0&&l.v!==c&&R(l,c)}return!0},ownKeys(n){const e=n[D];return S(e.v),Reflect.ownKeys(n)}},rn=1,pe=2,Qe=4,Ye=8,Je=16,ie=64,oe=128,L=256,P=512,de=1024,ot=2048,We=4096,Ge=Qe|Ye|Je,on=0,ds=1,U=Symbol(),ln=Symbol();let Me=on,Ne=!1,Fe=!1,M=[],re=[],lt=[],ge=0,j=null,b=null,T=null,I=0,Q=null,Y=!1,ct=!1,ae=!1,C=null,w=null,Pe=!1;function Ue(n){const e=n||w;return e!==null&&e.r}function cn(n,e){return n===e}function gs(n,e){return{c:null,e:cn,f:n,v:e,x:null}}function an(n,e,t){return{b:t,c:null,d:null,e:null,f:n,i:null,r:null,v:e,x:null,y:null}}function un(n,e){const t=n.r;t===null?n.r=[e]:t.push(e)}function mt(n){const e=n.f;if(e&P||n.v===U)return!0;if(e&de){const t=n.d;if(t!==null){const s=t.length;let r;for(r=0;r<s;r++){const i=t[r];if(i.f&de&&!mt(i)){H(i,L);continue}if(i.f&P)if(i.f&pe){if(mn(i,!0),n.f&P)return!0}else return!0}}}return!1}function fn(n){const e=n.i,t=T,s=I,r=Q,i=j,o=C,l=w,c=ae,u=(n.f&Je)!==0,a=Y;T=null,I=0,Q=null,j=n,C=n.b,w=n.x,ae=b===null&&(n.f&oe)!==0,Y=!1,u&&(w==null?void 0:w.u)!=null&&w.u.e();try{let h;u?h=e(n.b):h=e();let f=n.d;if(T!==null){let p;if(f!==null){const g=f.length,d=g>16?new Set(T):null;for(p=I;p<g;p++){const x=f[p];(d!==null&&!d.has(x)||!T.includes(x))&&hn(n,x,!1)}}if(f!==null&&I>0)for(f.length=I+T.length,p=0;p<T.length;p++)f[I+p]=T[p];else n.d=f=T;if(!ae)for(p=I;p<f.length;p++){const g=f[p],d=g.c;d===null?g.c=[n]:d[d.length-1]!==n&&d.push(n)}}else f!==null&&I<f.length&&(Xe(n,I,!1),f.length=I);return h}finally{T=t,I=s,Q=r,j=i,C=o,w=l,ae=c,Y=a}}function hn(n,e,t){const s=e.c;let r=0;if(s!==null){r=s.length-1;const i=s.indexOf(n);i!==-1&&(r===0?e.c=null:(s[i]=s[r],s.pop()))}t&&r===0&&e.f&oe&&(H(e,P),Xe(e,0,!0))}function Xe(n,e,t){const s=n.d;if(s!==null){let r;for(r=e;r<s.length;r++){const i=s[r];hn(n,i,t)}}}function pn(n){const e=n.r;if(n.r=null,e!==null){let t;for(t=0;t<e.length;t++){const s=e[t];s.f&Ge?F(s):(Xe(s,0,!0),s.d=null)}}}function ms(n,e){if(n!==null)throw e}function K(n){if(n.f&We)return;const e=n.v,t=b;b=n;try{pn(n),e!==null&&e();const r=fn(n);typeof r=="function"&&(n.v=r)}catch(r){const i=n.b;if(i!==null)ms(i,r);else throw r}finally{b=t}const s=n.x;Ue(s)&&n.f&Ye&&M.length>0&&xs(s)}function dn(){if(ge>100)throw new Error("ERR_SVELTE_TOO_MANY_UPDATES");ge++}function me(n){const e=n.length;if(e>0){dn();let t;for(t=0;t<e;t++){const s=n[t],r=s.f;r&(We|ot)||(mt(s)?(H(s,L),K(s)):r&de&&H(s,L))}n.length=0}}function _s(){if(Ne=!1,ge>101)return;const n=M,e=re;M=[],re=[],me(n),me(e),Ne||(ge=0)}function le(n,e){const t=n.f;e?(K(n),H(n,L)):(Me===on&&(Ne||(Ne=!0,queueMicrotask(_s))),t&Qe?re.push(n):M.push(n))}function gn(){Fe=!1;const n=lt.slice();lt=[],he(n)}function ks(n){Fe||(Fe=!0,setTimeout(gn,0)),lt.push(n)}function xs(n){const e=[];for(let t=0;t<M.length;t++){const s=M[t];s.f&Ye&&s.x===n&&(e.push(s),M.splice(t,1),t--)}me(e)}function _t(n){const e=Me,t=M,s=re;try{dn();const r=[],i=[];Me=ds,M=r,re=i,me(t),me(s),n!==void 0&&n(),(M.length>0||i.length>0)&&_t(),Fe&&gn(),ge=0}finally{Me=e,M=t,re=s}}async function Dt(){await Promise.resolve(),_t()}function mn(n,e){const t=Pe;Pe=!0;const s=fn(n);Pe=t;const r=ae||b===null&&n.f&oe?P:L;H(n,r);const i=n.e;i(s,n.v)||(n.v=s,kt(n,P,e))}function Pi(n,e,t){let s=t[e];const r=s===void 0;r&&(s={store:null,last_value:null,value:qe(U),unsubscribe:gt},t[e]=s),(r||s.store!==n)&&(s.unsubscribe(),s.store=n??null,s.unsubscribe=bs(n,s.value));const i=S(s.value);return i===U?s.last_value:i}function bs(n,e){return n==null?(R(e,void 0),gt):ts(n,s=>{ct=!0,R(e,s),ct=!1})}function Li(n){Es(()=>{let e;for(e in n)n[e].unsubscribe()})}function S(n){const e=n.f;if(e&We)return n.v;if(j!==null&&!(j.f&ie)&&!Y){const t=(j.f&oe)!==0,s=j.d;T===null&&s!==null&&s[I]===n&&!(t&&b!==null)?I++:(s===null||I===0||s[I-1]!==n)&&(T===null?T=[n]:n!==T[T.length-1]&&T.push(n)),Q!==null&&b!==null&&b.f&L&&Q.includes(n)&&(H(b,P),le(b,!1))}return e&pe&&mt(n)&&mn(n,!1),n.v}function R(n,e){return _n(n,e),e}function at(n,e){const t=n.f;(t&ot)!==0!==e&&(n.f^=ot,!e&&t&Ge&&!(t&L)&&le(n,!1));const r=n.r;if(r!==null){let i;for(i=0;i<r.length;i++)at(r[i],e)}}function kt(n,e,t){const s=Ue(n.x),r=n.c;if(r!==null){const i=r.length;let o;for(o=0;o<i;o++){const l=r[o],c=l.f,u=(c&oe)!==0,a=(c&P)!==0;a&&!u||(!t||!s)&&l===b||(H(l,e),(c&L||a&&u)&&(l.f&Ge?le(l,!1):kt(l,de,t)))}}}function _n(n,e){if(!Y&&!ct&&j!==null&&Ue(n.x)&&j.f&pe)throw new Error("ERR_SVELTE_UNSAFE_MUTATION");if(n.f&rn&&!n.e(e,n.v)){const t=n.x;if(n.v=e,Ue(t)&&b!==null&&b.c===null&&b.f&L&&(T!==null&&T.includes(n)?(H(b,P),le(b,!1)):Q===null?Q=[n]:Q.push(n)),kt(n,P,!0),b===null&&M.length===0){const s=t==null?void 0:t.u;if(s!=null){he(s.b);const r=kn(()=>{F(r),he(s.a)})}}}}function F(n){const e=n.v,t=n.y,s=n.f;pn(n),Xe(n,0,!0),n.i=n.r=n.y=n.x=n.b=n.v=n.d=n.c=null,H(n,We),t!==null&&(ee(t)?he(t):t()),e!==null&&s&Ge&&e()}function ys(n){const e=b===null,t=e?pe|oe:pe,s=an(t|L,U,C);return s.i=n,s.x=w,s.e=cn,e||un(b,s),s}function N(n){const e=gs(rn|L,n);return e.x=w,e}function qe(n){const e=N(n);return e.e=bn,e}function Be(n){const e=Y;try{return Y=!0,n()}finally{Y=e}}function et(n,e,t,s,r){const i=an(n|P,null,s);return i.i=e,i.x=w,r&&le(i,t),b!==null&&!(n&ie)&&un(b,i),i}function Nt(){return b?(b.f&ie)===0:!1}function He(n){if(b===null)throw new Error("ERR_SVELTE_ORPHAN_EFFECT");const e=b.f&Je&&w!==null&&!w.m,t=et(Qe,n,!1,C,!e);if(e){let s=w.e;s===null&&(s=w.e=[]),s.push(t)}return t}function kn(n){return et(Qe|ie,n,!1,C,!0)}function ws(n,e){return et(Ye|ie,n,e,C,!0)}function v(n,e=C,t=!1,s=!0){let r=Je;return t&&(r|=ie),et(r,n,s,e,!0)}function tt(n,e){let t=n.y;t===null?n.y=e:ee(t)?t.push(e):n.y=[t,e]}const vs=~(P|de|L);function H(n,e){n.f=n.f&vs|e}function xn(n){return typeof n=="object"&&n!==null&&typeof n.f=="number"}function Ts(n){return typeof n=="object"&&n!==null&&n.t===ln}function Di(n,e,t,s){var h;var r=(t&is)!==0,i=(h=V(n,e))==null?void 0:h.set,o=n[e];o===void 0&&s!==void 0&&(t&ls&&(s=s()),o=s,i&&i(o));var l=()=>{var f=n[e];return f!==void 0&&(s=void 0),f===void 0?s:f};if(!(t&os))return l;if(i)return function(f){return arguments.length===1?(i(f),f):l()};var c=!1,u=qe(o),a=ys(()=>{var f=l(),p=S(u);return c?(c=!1,p):u.v=f});return r||(a.e=bn),function(f,p=!1){var g=S(a);return arguments.length>0?((p||(r?f!==g:xt(f,g)))&&(c=!0,R(u,p?g:f),S(a)),f):g}}function xt(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function bn(n,e){return!xt(n,e)}function Ft(n,e=1){const t=S(n);return _n(n,t+e),t}function Es(n){He(()=>()=>Be(n))}function yn(n,e=!1){w={a:null,c:null,e:null,m:!1,p:w,s:n,r:e,u:null}}function wn(n){const e=w;if(e!==null){n!==void 0&&(e.a=n);const t=e.e;if(t!==null){e.e=null;for(let s=0;s<t.length;s++)le(t[s],!1)}w=e.p,e.m=!0}}function Ni(n,e){return{o:n,p:e,t:ln}}function Fi(n){return xn(n)?S(n):Ts(n)?n.o[n.p]:n}const Ss=0,$s=1,Rs=2,As=3,Is=5,Cs=7,Os=9;function zs(n){return{d:null,e:null,i:n,p:null,r:null,t:Ss}}function Ms(){return{a:null,ae:null,c:null,ce:null,d:null,e:null,p:C,r:null,t:$s,v:!1}}function Ps(){return{d:null,e:null,p:C,r:null,t:Is}}function Ls(){return{d:null,e:null,p:C,r:null,t:Cs}}function Ui(n,e){return{a:e,d:null,f:n,v:[],e:null,p:C,r:null,s:[],t:Rs}}function qi(n,e,t){return{a:null,d:null,e:null,i:e,k:t,v:n,p:C,r:null,s:null,t:As}}function Ds(){return{d:null,p:C,e:null,r:null,t:Os}}let y=null;function G(n){y=n}function bt(n){const e=[];let t=n,s=null;for(;t!==null;){const r=t.nodeType,i=t.nextSibling;if(r===8){const o=t.data;if(o.startsWith("ssr:")){const l=o.slice(4);if(s===null)s=l;else{if(l===s)return e;e.push(t)}t=i;continue}}s!==null&&e.push(t),t=i}return null}function Te(n,e){let t=n;if(y!==null)if(e&&(t=t.firstChild),t.nodeType===8){let s=t.$$fragment;s===void 0?s=bt(t):ks(()=>{t.$$fragment=void 0}),G(s)}else{const s=t.firstChild;G(s===null?[]:[s])}}var J,Re,Ut,Ae,vn,Tn,En,Sn,yt,$n,Rn,An;function Ns(){J===void 0&&(J=Node.prototype,Re=Element.prototype,Ut=Text.prototype,Ae=Map.prototype,vn=J.appendChild,Tn=J.cloneNode,En=Ae.set,Sn=Ae.get,Ae.delete,Re.__click=void 0,Ut.__nodeValue=" ",Re.__className="",yt=V(J,"firstChild").get,$n=V(J,"nextSibling").get,Rn=V(J,"textContent").set,An=V(Re,"className").set)}function qt(n,e){vn.call(n,e)}function Bi(n,e,t){En.call(n,e,t)}function Hi(n,e){return Sn.call(n,e)}function Fs(n,e){return Tn.call(n,e)}function ut(n){const e=yt.call(n);if(y!==null)if(e===null){const t=document.createTextNode("");return n.appendChild(t),t}else return wt(e);return e}function Bt(n){if(y!==null){const e=n[0];return y!==null&&e!==null?wt(e):e}return yt.call(n)}function Zi(n){const e=$n.call(n);return y!==null&&e!==null?wt(e):e}function Us(n,e){An.call(n,e)}function ji(n){Rn.call(n,"")}function wt(n){if(n.nodeType===8&&n.data.startsWith("ssr:")&&y.at(-1)!==n){const e=bt(n),s=(e.at(-1)||n).nextSibling;return s.$$fragment=e,s}return n}function vt(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function qs(n,e,t){if(ee(n)){for(var s=0,r;s<n.length;s++)r=n[s],t===null?qt(e,r):t.before(r);return n[0]}else n!==null&&(t===null?qt(e,n):t.before(n));return n}function E(n){var e=n;if(ee(n))for(var t=0,s;t<n.length;t++)s=n[t],t===0&&(e=s),s.isConnected&&s.remove();else n.isConnected&&n.remove();return e}function Bs(n,e,t){if(Te(n),y!==null)return y;var s=e+"",r=n,i;t&&(s=`<svg>${s}</svg>`);var o=vt(s);t&&(o=o.firstChild);var l=o.cloneNode(!0);return i=Array.from(l.childNodes),i.forEach(c=>{r.before(c)}),i}function se(n,e,t){const s=[];for(const r of n){const i=r.r;e==="in"?(i==="in"||i==="both"?r.in():r.c(),r.d.inert=!1,at(r.e,!1)):e==="key"?i==="key"&&(r.p=r.i(t),r.in()):((i==="out"||i==="both")&&(r.p=r.i(),s.push(r.o)),r.d.inert=!0,at(r.e,!0))}if(s.length>0){const r=ws(()=>{F(r);const i=kn(()=>{F(i),he(s)})},!1)}}const In=new Set,ft=new Set;function Hs(){return document.createTextNode("")}function Zs(n,e){let t;return()=>{if(t===void 0){const s=vt(n);t=e?s:ut(s)}return t}}function Vi(n,e){let t;return()=>{if(t===void 0){const s=ut(vt(`<svg>${n}</svg>`));t=e?s:ut(s)}return t}}function Cn(n,e,t,s){if(y!==null){t!==null&&Te(t,!1);const r=y;if(r!==null)return n?r:r[0]}return e?Fs(s(),!0):document.importNode(s(),!0)}function Ki(n,e,t){return Cn(!1,e,n,t)}function js(n,e,t){return Cn(!0,e,n,t)}const Vs=Zs("<!>",!0);function Ht(n){return js(n,!0,Vs)}function On(n,e,t){const s=C,r=e?ee(n)?n:Array.from(n.childNodes):n;t!==null&&y===null&&qs(r,null,t),s.d=r}function Qi(n,e){On(e,!1,n)}function Zt(n,e){On(e,!0,n)}function Yi(n,e,t,s,r){const i={capture:s,passive:r},o=t;e.addEventListener(n,o,i),(e===document.body||e===window||e===document)&&v(()=>()=>{e.removeEventListener(n,o,i)})}function Ji(n,e){v(()=>{const t=e();Ks(n,t)})}function Ks(n,e){const t=n.__className,s=Ys(e),r=y!==null;r&&n.className===s?n.__className=s:(t!==s||r&&n.className!==s)&&(s===""?n.removeAttribute("class"):Us(n,s),n.__className=s)}function Wi(n,e){v(()=>Qs(n,e()))}function Qs(n,e){const t=n.__nodeValue,s=Xs(e);y!==null&&n.nodeValue===s?n.__nodeValue=s:t!==s&&(n.nodeValue=s,n.__nodeValue=s)}function Ys(n){return n??""}function Js(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function Gi(n,e,t){v(()=>{const s=t();Js(n,e,s)})}function Xi(n,e,t){const s=V(n,e);s&&s.set&&(n[e]=t,v(()=>()=>{n[e]=null}))}function eo(n,e,t){Be(()=>{e(n),v(()=>()=>{v(()=>{Be(()=>{(!xn(t)||t.v===n)&&e(null)})})})})}function to(n){for(let e=0;e<n.length;e++)In.add(n[e]);for(const e of ft)e(n)}function jt(n,e){var l;const t=e.type,s=((l=e.composedPath)==null?void 0:l.call(e))||[];let r=s[0]||e.target;e.target!==r&&De(e,"target",{configurable:!0,value:r});let i=0;const o=e.__root;if(o){const c=s.indexOf(o);if(c!==-1&&n===document)return;c<s.indexOf(n)&&(i=c)}for(r=s[i]||e.target,De(e,"currentTarget",{configurable:!0,get(){return r||document}});r!==null;){const c=r.parentNode||r.host||null,u="__"+t,a=r[u];if(a!==void 0&&!r.disabled)if(ee(a)){const[h,...f]=a;h.apply(r,[e,...f])}else a.call(r,e);if(e.cancelBubble||c===n)break;r=c}e.__root=n}function Ws(n,e,t,s){const r=Ms();Te(n);const i=y;let o=null,l=null,c=!1,u=!1;const a=v(()=>{var g;const p=!!e();if(r.v!==p||!c){if(r.v=p,c){const d=r.c,x=r.a;p?(x===null||x.size===0?K(f):se(x,"out"),d===null||d.size===0?K(h):se(d,"in")):(d===null||d.size===0?K(h):se(d,"out"),x===null||x.size===0?K(f):se(x,"in"))}else if(y!==null){const d=(g=y==null?void 0:y[0])==null?void 0:g.data;!d||d==="ssr:if:true"&&!p||d==="ssr:if:false"&&p?(E(y),G(null)):y.shift()}c=!0}},r,!1),h=v(()=>{o!==null&&(E(o),o=null),r.v&&(t(n),u||(G(i),u=!0)),o=r.d,r.d=null},r,!0);r.ce=h;const f=v(()=>{l!==null&&(E(l),l=null),r.v||(s!==null&&s(n),u||(G(i),u=!0)),l=r.d,r.d=null},r,!0);r.ae=f,tt(a,()=>{o!==null&&E(o),l!==null&&E(l),F(h),F(f)}),r.e=a}function Gs(n,e,t){const s=Ls();let r=null;Te(n);let i=null;s.r=u=>{const a=r,h=a.s;h.add(u),u.f(()=>{h.delete(u),h.size===0&&a.e!==null&&(a.d!==null&&(E(a.d),a.d=null),F(a.e),a.e=null)})};const o=()=>{const u={d:null,e:null,s:new Set,p:r},a=v(()=>{const h=s.d;h!==null&&(E(h),s.d=null),i&&t(i),u.d=s.d,s.d=null},s,!0);u.e=a,r=u},l=()=>{const u=r;if(u===null){o();return}const a=u.s;a.size===0?(u.d!==null&&(E(u.d),u.d=null),u.e?K(u.e):o()):(o(),se(a,"out"))},c=v(()=>{const u=e();i!==u&&(i=u,l())},s,!1);tt(c,()=>{let u=r;for(;u!==null;){const a=u.d;a!==null&&E(a);const h=u.e;h!==null&&F(h),u=u.p}}),s.e=c}function no(n,e,t){const s=Ps();let r=null;Te(n);let i=U,o=!1;s.r=a=>{const h=r,f=h.s;f.add(a),a.f(()=>{f.delete(a),f.size===0&&h.e!==null&&(h.d!==null&&(E(h.d),h.d=null),F(h.e),h.e=null)})};const l=()=>{const a={d:null,e:null,s:new Set,p:r},h=v(()=>{t(n),a.d=s.d,s.d=null},s,!0,!0);a.e=h,r=a},c=()=>{const a=r;if(a===null){l();return}const h=a.s;h.size===0?(a.d!==null&&(E(a.d),a.d=null),a.e?K(a.e):l()):(se(h,"out"),l())},u=v(()=>{const a=i;i=e(),o&&xt(a,i)&&c()},s,!1);c(),o=!0,tt(u,()=>{let a=r;for(;a!==null;){const h=a.d;h!==null&&E(h);const f=a.e;f!==null&&F(f),a=a.p}}),s.e=u}function Xs(n){return typeof n=="string"?n:n==null?"":n+""}function so(n,e,t){let s,r;const i=v(()=>{r!==(r=e())&&(s&&E(s),s=Bs(n,r,t))});tt(i,()=>{s&&E(s)})}function ro(n){y!==null&&n.firstChild!==null&&(n.textContent="")}function io(n,e,t){v(()=>{const s=t();er(n,e,s)})}function er(n,e,t){t=t==null?null:t+"",(y===null||n.getAttribute(e)!==t&&e!=="src"&&e!=="href"&&e!=="srcset")&&(t===null?n.removeAttribute(e):n.setAttribute(e,t))}function tr(n,e,t,s){const r=n.style,i=r.getPropertyValue(e);t==null?i!==""&&r.removeProperty(e):i!==t&&r.setProperty(e,t,s?"important":"")}function oo(n,e,t,s){v(()=>{const r=t();tr(n,e,r,s)})}function nr(n,e){const t=A(e.props||{},!1);let[s,r]=zn(n,{...e,props:t});const i={$set:o=>{rs(t,o)},$destroy:r};for(const o of ss(s||{}))De(i,o,{get(){return s[o]},set(l){_t(()=>s[o]=l)},enumerable:!0});return i}function zn(n,e){var f,p;Ns();const t=new Set,s=e.target,r=zs(e.intro||!1),i=s.firstChild,o=bt(i),l=y;let c;try{let g=null;o===null&&(g=Hs(),s.appendChild(g)),G(o);const d=v(()=>{e.context&&(yn({}),w.c=e.context),c=n(g,e.props||{},e.events||{}),e.context&&wn()},r,!0);r.e=d}catch(g){if(e.recover!==!1&&o!==null)return console.error("ERR_SVELTE_HYDRATION_MISMATCH",g),E(o),i.remove(),(p=(f=o.at(-1))==null?void 0:f.nextSibling)==null||p.remove(),zn(n,e);throw g}finally{G(l)}const u=jt.bind(null,s),a=jt.bind(null,document),h=g=>{for(let d=0;d<g.length;d++){const x=g[d];t.has(x)||(t.add(x),s.addEventListener(x,u,Lt.includes(x)?{passive:!0}:void 0),document.addEventListener(x,a,Lt.includes(x)?{passive:!0}:void 0))}};return h(ns(In)),ft.add(h),[c,()=>{for(const d of t)s.removeEventListener(d,u);ft.delete(h);const g=r.d;g!==null&&E(g),o!==null&&E(o),F(r.e)}]}function lo(n,e,t){const s=Ds();v(()=>{const r=n();return Be(()=>r(e,t)),()=>{s.d!==null&&E(s.d)}},s)}const sr="modulepreload",rr=function(n){return"/"+n},Vt={},ir=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link");r=Promise.all(t.map(o=>{if(o=rr(o),o in Vt)return;Vt[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!s)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=l?"stylesheet":sr,l||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),l)return new Promise((h,f)=>{a.addEventListener("load",h),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},or="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(or);let Ie;const lr=new Uint8Array(16);function cr(){if(!Ie&&(Ie=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ie))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ie(lr)}const $=[];for(let n=0;n<256;++n)$.push((n+256).toString(16).slice(1));function ar(n,e=0){return $[n[e+0]]+$[n[e+1]]+$[n[e+2]]+$[n[e+3]]+"-"+$[n[e+4]]+$[n[e+5]]+"-"+$[n[e+6]]+$[n[e+7]]+"-"+$[n[e+8]]+$[n[e+9]]+"-"+$[n[e+10]]+$[n[e+11]]+$[n[e+12]]+$[n[e+13]]+$[n[e+14]]+$[n[e+15]]}const ur=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kt={randomUUID:ur};function fr(n,e,t){if(Kt.randomUUID&&!e&&!n)return Kt.randomUUID();n=n||{};const s=n.random||(n.rng||cr)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=s[r];return e}return ar(s)}function it(){}const Le=fr,hr=/^\w*(Error|Exception|An error):/,pr=/^Traceback \(most recent call last\):/;function dr(n){return hr.test(n)||pr.test(n)}function gr(n,e){return n.reduce((t,s)=>(t[s[e]]=s,t),{})}function Mn(n,e){n.splice(0,n.length,...e)}function mr(n,e){const t={};for(const s in n){const r=n[s];e(s,r)&&(t[s]=r)}return t}function _r(n,e="}"){try{return JSON.parse(n)}catch{}let t=n.length;for(;t>0;){if(t=n.lastIndexOf(",",t-1),t===-1)try{return JSON.parse(n+e)}catch{return null}try{return JSON.parse(n.slice(0,t)+e)}catch{}}return null}function Ce(n,e=""){return"```"+e+`
`+n+"\n```"}function Qt(n){try{return JSON.stringify(JSON.parse(n),null,2)}catch{return n}}function kr(){return!!window.matchMedia("(prefers-color-scheme: dark)").matches}function xr(n,...e){document.documentElement.classList[n](...e)}function Yt(n,e){return new Promise((t,s)=>{const r=new FileReader;r.onload=i=>{var l;const o=(l=i.target)==null?void 0:l.result;o!=null?t(o):s(new Error("File read resulted in null data"))},r.onerror=i=>{var o,l;s(new Error(`Error reading file: ${((l=(o=i.target)==null?void 0:o.error)==null?void 0:l.message)||"Unknown error"}`))},r[`readAs${e}`](n)})}function br(n,e="",t=!1){let s=document.createElement("input");s.type="file",s.accept=e,s.multiple=t,s.onchange=async r=>{const i=r.target.files;if(i&&i.length>0)return n(t?Array.from(i):i[0])},s.click()}function yr(n){try{const e=localStorage.getItem(n);return JSON.parse(e)}catch{return null}}function wr(n,e){try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.error(t)}}function Tt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let te=Tt();function Pn(n){te=n}const Ln=/[&<>"']/,vr=new RegExp(Ln.source,"g"),Dn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Tr=new RegExp(Dn.source,"g"),Er={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jt=n=>Er[n];function z(n,e){if(e){if(Ln.test(n))return n.replace(vr,Jt)}else if(Dn.test(n))return n.replace(Tr,Jt);return n}const Sr=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function $r(n){return n.replace(Sr,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Rr=/(^|[^\[])\^/g;function k(n,e){let t=typeof n=="string"?n:n.source;e=e||"";const s={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Rr,"$1"),t=t.replace(r,o),s},getRegex:()=>new RegExp(t,e)};return s}function Wt(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const ue={exec:()=>null};function Gt(n,e){const t=n.replace(/\|/g,(i,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),s=t.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function Oe(n,e,t){const s=n.length;if(s===0)return"";let r=0;for(;r<s;){const i=n.charAt(s-r-1);if(i===e&&!t)r++;else if(i!==e&&t)r++;else break}return n.slice(0,s-r)}function Ar(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return-1}function Xt(n,e,t,s){const r=e.href,i=e.title?z(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){s.state.inLink=!0;const l={type:"link",raw:t,href:r,title:i,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,l}return{type:"image",raw:t,href:r,title:i,text:z(o)}}function Ir(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const s=t[1];return e.split(`
`).map(r=>{const i=r.match(/^\s+/);if(i===null)return r;const[o]=i;return o.length>=s.length?r.slice(s.length):r}).join(`
`)}class Ze{constructor(e){m(this,"options");m(this,"rules");m(this,"lexer");this.options=e||te}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Oe(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],r=Ir(s,t[3]||"");return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(/#$/.test(s)){const r=Oe(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const s=Oe(t[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(s);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:i,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s=t[1].trim();const r=s.length>1,i={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const o=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",c="",u=!1;for(;e;){let a=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,st=>" ".repeat(3*st.length)),f=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,c=h.trimStart()):(p=t[2].search(/[^ ]/),p=p>4?1:p,c=h.slice(p),p+=t[1].length);let g=!1;if(!h&&/^ *$/.test(f)&&(l+=f+`
`,e=e.substring(f.length+1),a=!0),!a){const st=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Ct=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Ot=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),zt=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const rt=e.split(`
`,1)[0];if(f=rt,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Ot.test(f)||zt.test(f)||st.test(f)||Ct.test(e))break;if(f.search(/[^ ]/)>=p||!f.trim())c+=`
`+f.slice(p);else{if(g||h.search(/[^ ]/)>=4||Ot.test(h)||zt.test(h)||Ct.test(h))break;c+=`
`+f}!g&&!f.trim()&&(g=!0),l+=rt+`
`,e=e.substring(rt.length+1),h=f.slice(p)}}i.loose||(u?i.loose=!0:/\n *\n *$/.test(l)&&(u=!0));let d=null,x;this.options.gfm&&(d=/^\[[ xX]\] /.exec(c),d&&(x=d[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:l,task:!!d,checked:x,loose:!1,text:c,tokens:[]}),i.raw+=l}i.items[i.items.length-1].raw=l.trimEnd(),i.items[i.items.length-1].text=c.trimEnd(),i.raw=i.raw.trimEnd();for(let a=0;a<i.items.length;a++)if(this.lexer.state.top=!1,i.items[a].tokens=this.lexer.blockTokens(i.items[a].text,[]),!i.loose){const h=i.items[a].tokens.filter(p=>p.type==="space"),f=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));i.loose=f}if(i.loose)for(let a=0;a<i.items.length;a++)i.items[a].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:r,title:i}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const s=Gt(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const l of r)/^ *-+: *$/.test(l)?o.align.push("right"):/^ *:-+: *$/.test(l)?o.align.push("center"):/^ *:-+ *$/.test(l)?o.align.push("left"):o.align.push(null);for(const l of s)o.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of i)o.rows.push(Gt(l,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:z(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const o=Oe(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=Ar(t[2],"()");if(o>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),Xt(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const r=(s[2]||s[1]).replace(/\s+/g," "),i=t[r.toLowerCase()];if(!i){const o=s[0].charAt(0);return{type:"text",raw:o,text:o}}return Xt(s,i,s[0],this.lexer)}}emStrong(e,t,s=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const o=[...r[0]].length-1;let l,c,u=o,a=0;const h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(r=h.exec(t))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(c=[...l].length,r[3]||r[4]){u+=c;continue}else if((r[5]||r[6])&&o%3&&!((o+c)%3)){a+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+a);const f=[...r[0]][0].length,p=e.slice(0,o+r.index+f+c);if(Math.min(o,c)%2){const d=p.slice(1,-1);return{type:"em",raw:p,text:d,tokens:this.lexer.inlineTokens(d)}}const g=p.slice(2,-2);return{type:"strong",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(/\n/g," ");const r=/[^ ]/.test(s),i=/^ /.test(s)&&/ $/.test(s);return r&&i&&(s=s.substring(1,s.length-1)),s=z(s,!0),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let s,r;return t[2]==="@"?(s=z(t[1]),r="mailto:"+s):(s=z(t[1]),r=s),{type:"link",raw:t[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=z(t[0]),i="mailto:"+r;else{let o;do o=t[0],t[0]=((s=this.rules.inline._backpedal.exec(t[0]))==null?void 0:s[0])??"";while(o!==t[0]);r=z(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let s;return this.lexer.state.inRawBlock?s=t[0]:s=z(t[0]),{type:"text",raw:t[0],text:s}}}}const Cr=/^(?: *(?:\n|$))+/,Or=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,zr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ee=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Mr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Nn=/(?:[*+-]|\d{1,9}[.)])/,Fn=k(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Nn).getRegex(),Et=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pr=/^[^\n]+/,St=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Lr=k(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",St).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Dr=k(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Nn).getRegex(),nt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$t=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Nr=k("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",$t).replace("tag",nt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Un=k(Et).replace("hr",Ee).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nt).getRegex(),Fr=k(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Un).getRegex(),Rt={blockquote:Fr,code:Or,def:Lr,fences:zr,heading:Mr,hr:Ee,html:Nr,lheading:Fn,list:Dr,newline:Cr,paragraph:Un,table:ue,text:Pr},en=k("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ee).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nt).getRegex(),Ur={...Rt,table:en,paragraph:k(Et).replace("hr",Ee).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",en).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nt).getRegex()},qr={...Rt,html:k(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",$t).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ue,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:k(Et).replace("hr",Ee).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Fn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},qn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Br=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Bn=/^( {2,}|\\)\n(?!\s*$)/,Hr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Se="\\p{P}$+<=>`^|~",Zr=k(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Se).getRegex(),jr=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Vr=k(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Se).getRegex(),Kr=k("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Se).getRegex(),Qr=k("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Se).getRegex(),Yr=k(/\\([punct])/,"gu").replace(/punct/g,Se).getRegex(),Jr=k(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Wr=k($t).replace("(?:-->|$)","-->").getRegex(),Gr=k("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Wr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),je=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Xr=k(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",je).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Hn=k(/^!?\[(label)\]\[(ref)\]/).replace("label",je).replace("ref",St).getRegex(),Zn=k(/^!?\[(ref)\](?:\[\])?/).replace("ref",St).getRegex(),ei=k("reflink|nolink(?!\\()","g").replace("reflink",Hn).replace("nolink",Zn).getRegex(),At={_backpedal:ue,anyPunctuation:Yr,autolink:Jr,blockSkip:jr,br:Bn,code:Br,del:ue,emStrongLDelim:Vr,emStrongRDelimAst:Kr,emStrongRDelimUnd:Qr,escape:qn,link:Xr,nolink:Zn,punctuation:Zr,reflink:Hn,reflinkSearch:ei,tag:Gr,text:Hr,url:ue},ti={...At,link:k(/^!?\[(label)\]\((.*?)\)/).replace("label",je).getRegex(),reflink:k(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",je).getRegex()},ht={...At,escape:k(qn).replace("])","~|])").getRegex(),url:k(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ni={...ht,br:k(Bn).replace("{2,}","*").getRegex(),text:k(ht.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ze={normal:Rt,gfm:Ur,pedantic:qr},ce={normal:At,gfm:ht,breaks:ni,pedantic:ti};class q{constructor(e){m(this,"tokens");m(this,"options");m(this,"state");m(this,"tokenizer");m(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||te,this.options.tokenizer=this.options.tokenizer||new Ze,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:ze.normal,inline:ce.normal};this.options.pedantic?(t.block=ze.pedantic,t.inline=ce.pedantic):this.options.gfm&&(t.block=ze.gfm,this.options.breaks?t.inline=ce.breaks:t.inline=ce.gfm),this.tokenizer.rules=t}static get rules(){return{block:ze,inline:ce}}static lex(e,t){return new q(t).lex(e)}static lexInline(e,t){return new q(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,c,u)=>c+"    ".repeat(u.length));let s,r,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(s=l.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(i=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(a=>{u=a.call({lexer:this},c),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(s=this.tokenizer.paragraph(i))){r=t[t.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s),o=i.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s,r,i,o=e,l,c,u;if(this.tokens.links){const a=Object.keys(this.tokens.links);if(a.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)a.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,l.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(a=>(s=a.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length),r=t[t.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(s=this.tokenizer.emStrong(e,o,u)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),t.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),t.push(s);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let a=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(a=Math.min(a,f))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(s=this.tokenizer.inlineText(i)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(u=s.raw.slice(-1)),c=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):t.push(s);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return t}}class Ve{constructor(e){m(this,"options");this.options=e||te}code(e,t,s){var i;const r=(i=(t||"").match(/^\S*/))==null?void 0:i[0];return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+z(r)+'">'+(s?e:z(e,!0))+`</code></pre>
`:"<pre><code>"+(s?e:z(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,s){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,s){const r=t?"ol":"ul",i=t&&s!==1?' start="'+s+'"':"";return"<"+r+i+`>
`+e+"</"+r+`>
`}listitem(e,t,s){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+e+`</${s}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,s){const r=Wt(e);if(r===null)return s;e=r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+s+"</a>",i}image(e,t,s){const r=Wt(e);if(r===null)return s;e=r;let i=`<img src="${e}" alt="${s}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return e}}class It{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,s){return""+s}image(e,t,s){return""+s}br(){return""}}class B{constructor(e){m(this,"options");m(this,"renderer");m(this,"textRenderer");this.options=e||te,this.options.renderer=this.options.renderer||new Ve,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new It}static parse(e,t){return new B(t).parse(e)}static parseInline(e,t){return new B(t).parseInline(e)}parse(e,t=!0){let s="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=i,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){s+=l||"";continue}}switch(i.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{const o=i;s+=this.renderer.heading(this.parseInline(o.tokens),o.depth,$r(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=i;s+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=i;let l="",c="";for(let a=0;a<o.header.length;a++)c+=this.renderer.tablecell(this.parseInline(o.header[a].tokens),{header:!0,align:o.align[a]});l+=this.renderer.tablerow(c);let u="";for(let a=0;a<o.rows.length;a++){const h=o.rows[a];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});u+=this.renderer.tablerow(c)}s+=this.renderer.table(l,u);continue}case"blockquote":{const o=i,l=this.parse(o.tokens);s+=this.renderer.blockquote(l);continue}case"list":{const o=i,l=o.ordered,c=o.start,u=o.loose;let a="";for(let h=0;h<o.items.length;h++){const f=o.items[h],p=f.checked,g=f.task;let d="";if(f.task){const x=this.renderer.checkbox(!!p);u?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=x+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=x+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:x+" "}):d+=x+" "}d+=this.parse(f.tokens,u),a+=this.renderer.listitem(d,g,!!p)}s+=this.renderer.list(a,l,c);continue}case"html":{const o=i;s+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=i;s+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=i,l=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&e[r+1].type==="text";)o=e[++r],l+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);s+=t?this.renderer.paragraph(l):l;continue}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}parseInline(e,t){t=t||this.renderer;let s="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=o||"";continue}}switch(i.type){case"escape":{const o=i;s+=t.text(o.text);break}case"html":{const o=i;s+=t.html(o.text);break}case"link":{const o=i;s+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=i;s+=t.image(o.href,o.title,o.text);break}case"strong":{const o=i;s+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=i;s+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=i;s+=t.codespan(o.text);break}case"br":{s+=t.br();break}case"del":{const o=i;s+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=i;s+=t.text(o.text);break}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}}class fe{constructor(e){m(this,"options");this.options=e||te}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}m(fe,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var _e,pt,Ke,Vn;class jn{constructor(...e){Z(this,_e);Z(this,Ke);m(this,"defaults",Tt());m(this,"options",this.setOptions);m(this,"parse",$e(this,_e,pt).call(this,q.lex,B.parse));m(this,"parseInline",$e(this,_e,pt).call(this,q.lexInline,B.parseInline));m(this,"Parser",B);m(this,"Renderer",Ve);m(this,"TextRenderer",It);m(this,"Lexer",q);m(this,"Tokenizer",Ze);m(this,"Hooks",fe);this.use(...e)}walkTokens(e,t){var r,i;let s=[];for(const o of e)switch(s=s.concat(t.call(this,o)),o.type){case"table":{const l=o;for(const c of l.header)s=s.concat(this.walkTokens(c.tokens,t));for(const c of l.rows)for(const u of c)s=s.concat(this.walkTokens(u.tokens,t));break}case"list":{const l=o;s=s.concat(this.walkTokens(l.items,t));break}default:{const l=o;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[l.type]?this.defaults.extensions.childTokens[l.type].forEach(c=>{s=s.concat(this.walkTokens(l[c],t))}):l.tokens&&(s=s.concat(this.walkTokens(l.tokens,t)))}}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=t.renderers[i.name];o?t.renderers[i.name]=function(...l){let c=i.renderer.apply(this,l);return c===!1&&(c=o.apply(this,l)),c}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),s.renderer){const i=this.defaults.renderer||new Ve(this.defaults);for(const o in s.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const l=o,c=s.renderer[l],u=i[l];i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h||""}}r.renderer=i}if(s.tokenizer){const i=this.defaults.tokenizer||new Ze(this.defaults);for(const o in s.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const l=o,c=s.tokenizer[l],u=i[l];i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h}}r.tokenizer=i}if(s.hooks){const i=this.defaults.hooks||new fe;for(const o in s.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const l=o,c=s.hooks[l],u=i[l];fe.passThroughHooks.has(o)?i[l]=a=>{if(this.defaults.async)return Promise.resolve(c.call(i,a)).then(f=>u.call(i,f));const h=c.call(i,a);return u.call(i,h)}:i[l]=(...a)=>{let h=c.apply(i,a);return h===!1&&(h=u.apply(i,a)),h}}r.hooks=i}if(s.walkTokens){const i=this.defaults.walkTokens,o=s.walkTokens;r.walkTokens=function(l){let c=[];return c.push(o.call(this,l)),i&&(c=c.concat(i.call(this,l))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return q.lex(e,t??this.defaults)}parser(e,t){return B.parse(e,t??this.defaults)}}_e=new WeakSet,pt=function(e,t){return(s,r)=>{const i={...r},o={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const l=$e(this,Ke,Vn).call(this,!!o.silent,!!o.async);if(typeof s>"u"||s===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(s):s).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(l);try{o.hooks&&(s=o.hooks.preprocess(s));let c=e(s,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=t(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return l(c)}}},Ke=new WeakSet,Vn=function(e,t){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+z(s.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(s);throw s}};const X=new jn;function _(n,e){return X.parse(n,e)}_.options=_.setOptions=function(n){return X.setOptions(n),_.defaults=X.defaults,Pn(_.defaults),_};_.getDefaults=Tt;_.defaults=te;_.use=function(...n){return X.use(...n),_.defaults=X.defaults,Pn(_.defaults),_};_.walkTokens=function(n,e){return X.walkTokens(n,e)};_.parseInline=X.parseInline;_.Parser=B;_.parser=B.parse;_.Renderer=Ve;_.TextRenderer=It;_.Lexer=q;_.lexer=q.lex;_.Tokenizer=Ze;_.Hooks=fe;_.parse=_;_.options;_.setOptions;_.use;_.walkTokens;_.parseInline;B.parse;q.lex;function Kn(n,e){return e=Pt.getLanguage(e)?e:"plaintext",n=Pt.highlight(n,{language:e}).value,{language:e,code:`<code class="hljs language-${e}">${n}</code>`}}function si(n,e){const{code:t}=Kn(n,e);return`<pre class="markdown-code-block plain">${t}</pre>`}function ri(n,e){const{language:t,code:s}=Kn(n,e);return t==="plaintext"?`<pre class="markdown-code-block plain">${s}</pre>`:`<div class="wrapped-code-container">
    <div class="lang-banner">
        <span>${t}</span>
    </div>
    <pre class="markdown-code-block wrapped">${s}</pre>
</div>`}function Qn(n=!1){const e=new jn,t=new e.Renderer;return n?t.code=ri:t.code=si,e.setOptions({renderer:t}),e.parse.bind(e)}const W=Qn(!1),tn=Qn(!0);function Yn(n,e){let t=null;const s=function(...r){const i=()=>{t=null,n.apply(this,r)};t!==null&&clearTimeout(t),t=setTimeout(i,e)};return s.cancel=function(){t!==null&&(clearTimeout(t),t=null)},s}function ii(n,e=8){let t=0;return(...s)=>{const r=new Date().getTime();r-t>=e&&(t=r,n(...s))}}function oi(n,e){return n!==n?e===e:n!==e||n&&typeof n=="object"||typeof n=="function"}const ne=[];function dt(n,e=it){let t;const s=new Set;function r(c){if(oi(n,c)&&(n=c,t)){const u=!ne.length;for(const a of s)a[1](),ne.push(a,n);if(u){for(let a=0;a<ne.length;a+=2)ne[a][0](ne[a+1]);ne.length=0}}}function i(c){r(c(n))}function o(c,u=it){const a=[c,u];return s.add(a),s.size===1&&(t=e(r,i)||it),c(n),()=>{s.delete(a),s.size===0&&t&&(t(),t=null)}}function l(){return n}return{get:l,set:r,update:i,subscribe:o}}const li={functions:{},agent_name:"Assistant",default_messages:[]};function ci(n,e){return Jn[n](e)}const Jn={default_messages(n){return n??[]},agent_name(n){return n??"Assistant"},functions(n){return n?Object.entries(n).reduce((e,[t,s])=>{var c,u;const r={},{header:i,result:o,arguments:l}=s;return i&&(r.header={text:i.text,show:i.show}),l&&(r.arguments={},(c=l.show_key_as_code)!=null&&c.key&&((u=l.show_key_as_code)!=null&&u.language)&&(r.arguments.show_key_as_code=l.show_key_as_code),l.title&&(r.arguments.title=l.title)),o&&(r.result={title:o.title,type:o.type}),e[t]=r,e},{}):{}}};function ai(){return{...dt({...li}),setAll(e){this.update(t=>{for(const s in Jn){const r=s;t[r]=ci(r,e[r])}return t})}}}const ui={Server:!0,Client:!0};function fi(){let n=A([]);function e(r){return ui[r]}function t(r){Mn(n,n.filter(i=>i.text!==r))}function s(r,i){n.some(o=>o.text===i)||(console.error(`${r} Error: ${i}`),n.push({type:r,text:i}))}return{items:n,showType:e,remove:t,add:s}}class hi{constructor(...e){m(this,"instance");this.instance=es(...e)}on(e,t){this.instance.on(e,t)}emit(e,...t){if(typeof t[t.length-1]=="function"){const s=t.pop();this.instance.emit(e,...t,s)}else this.instance.emit(e,...t)}off(e,t){t?this.instance.off(e,t):this.instance.off(e)}}const pi={async binary(n){const e=await Yt(n,"ArrayBuffer");return{type:"binary",name:n.name,fileType:n.type,content:e}},async image_url(n){return{type:"image_url",image_url:{url:await Yt(n,"DataURL")}}}};function di(n){return n.type.startsWith("image")?"image_url":"binary"}var ke,xe,be;class gi{constructor(){Z(this,ke,N(""));Z(this,xe,N(A([])));Z(this,be,N(A([])))}get text(){return S(O(this,ke))}set text(e){R(O(this,ke),A(e))}get images(){return S(O(this,xe))}set images(e){R(O(this,xe),A(e))}get files(){return S(O(this,be))}set files(e){R(O(this,be),A(e))}serialize(){return{text:this.text,images:this.images,files:this.files}}set(e){this.text=e.text,this.images=e.images,this.files=e.files}clear(){this.text="",this.files=[],this.images=[]}textContentPart(){return{type:"text",text:this.text}}isEmpty(){return this.text.trim()===""&&this.files.length===0&&this.images.length===0}removeImage(e){this.images.splice(e,1)}removeFile(e){this.files.splice(e,1)}addImage(e){this.images.push(e)}addFile(e){this.files.push(e)}textIsEmpty(){return this.text.trim()===""}upload(){br(async e=>{if(!e)return;const t=di(e);let s;try{s=await pi[t](e)}catch{return}s&&(s.type==="image_url"?this.addImage(s):this.addFile(s))})}getContentParts(){let e=[...this.files,...this.images];return this.textIsEmpty()||e.push(this.textContentPart()),e}}ke=new WeakMap,xe=new WeakMap,be=new WeakMap;var ye;class mi{constructor(){Z(this,ye,N(null));m(this,"autoEnabled",!0);m(this,"lastScrollHeight",0);m(this,"lastScrollTop",0);m(this,"handleUserScrollDebounced",Yn(()=>this.handleUserScroll(),100));m(this,"autoScrollThrottled",ii(()=>this.autoScroll(),200))}get containerDiv(){return S(O(this,ye))}set containerDiv(e){R(O(this,ye),A(e))}scroll(e){e==="force"?this.forceScroll():this.autoScrollThrottled()}handleUserScroll(){if(!this.containerDiv)return;const{scrollHeight:e,scrollTop:t,clientHeight:s}=this.containerDiv;t<this.lastScrollTop?this.autoEnabled=!1:e-t<=s+50&&(this.autoEnabled=!0),this.lastScrollTop=t}scrollChat(e=!1){if(!this.containerDiv)return;const{scrollHeight:t}=this.containerDiv;e&&t===this.lastScrollHeight||(this.containerDiv.scrollTo({top:t,behavior:"smooth"}),this.lastScrollHeight=t)}autoScroll(){this.autoEnabled&&Dt().then(()=>this.scrollChat(!0))}forceScroll(){Dt().then(()=>this.scrollChat()),this.autoEnabled=!0}}ye=new WeakMap;function _i(n,e){const t="assistant",s="content"in e&&e.content?e.content:"";if(!(e.tool_calls&&e.tool_calls.length>0))return{id:n,role:t,content:s};const i=e.tool_calls[0];if(!i.id)return{error:"Tool call has no id. Received a partial delta for a tool call that does not exist yet."};if(i.type!=="function")return{error:"Currently, only function tool calls are supported."};const o="function";let{id:l,function:{name:c,arguments:u}}=i;return{id:n,role:t,content:s,tool_calls:[{id:l,type:o,function:{name:c||"",arguments:u||""}}]}}function ki(n,e){var f;if(n.id!==e.id)throw new Error("Message id and delta id must match");if(e.content&&(n.content=n.content!==null?n.content+e.content:e.content),!(e.tool_calls&&e.tool_calls.length>0))return;const s=e.tool_calls[0],r=s.index;if(typeof r!="number"||!s.function)return;const i=!s.id||!((f=s.function)!=null&&f.name);n.tool_calls||(n.tool_calls=[]);const o=n.tool_calls.length,l=r>o,c=r===o;if(l)return;if(c){if(i)return;const p="function",{id:g,function:{name:d,arguments:x}}=s;return n.tool_calls.push({id:g,type:p,function:{name:d,arguments:x}}),!0}const u=n.tool_calls[r],{function:{name:a,arguments:h}}=s;a&&(u.function.name=a),h&&(u.function.arguments+=h)}const nn={user(n){return{role:"user",id:"id"in n&&n.id?n.id:Le(),content:n.content?n.content:""}},assistant(n){var t,s;const e=n.tool_calls&&n.tool_calls.length>0?n.tool_calls:void 0;if(e){for(const r of e)if(!(r.id&&((t=r.function)!=null&&t.name)&&typeof((s=r.function)==null?void 0:s.arguments)=="string"))return log("Message has invalid tool call. Skipping:",n),null}return{role:"assistant",id:"id"in n&&n.id?n.id:Le(),content:n.content??"",tool_calls:e}},tool(n){return n.tool_call_id?{role:"tool",id:"id"in n&&n.id?n.id:Le(),content:n.content??"",tool_call_id:n.tool_call_id}:null}};function Wn(n){return n.role&&n.role in nn?nn[n.role](n):null}function xi(n){return n.map(e=>Wn(e)).filter(e=>e!==null)}function bi(n){const e=xi(n);return{order:e.map(t=>t.id),mapping:gr(e,"id")}}const yi={user(n){let e={role:"user",content:""};if(typeof n.content=="string")e.content=n.content;else{e.content=[];for(const t of n.content)t.type!=="binary"&&e.content.push(t)}return e},assistant(n){let e={role:"assistant",content:n.content};return n.tool_calls&&n.tool_calls.length>0&&(e.tool_calls=n.tool_calls),e},tool(n){return{role:"tool",content:n.content,tool_call_id:n.tool_call_id}}};function wi(n){return yi[n.role](n)}function vi(n,e){return e.map(t=>wi(n[t])).filter(t=>t!==null)}var we,ve;class Ti{constructor(e,t){m(this,"scroll",new mi);m(this,"rendered",dt([]));m(this,"msgMapping",dt({}));m(this,"msgOrder",[]);m(this,"prompt",new gi);m(this,"config",ai());m(this,"errors",fi());Z(this,we,N(!1));Z(this,ve,N(!1));m(this,"saveStateDebounced",Yn(()=>this.saveState(),1e3));this.id=e,this.socket=t,this.id=e,this.socket=t,this.socket.on("connect",()=>this.connected=!0),this.socket.on("disconnect",()=>this.connected=!1),this.socket.on("error",r=>this.errors.add("Server",r)),this.socket.on("error",()=>this.generating=!1),this.socket.on("config",r=>this.config.setAll(r)),this.socket.on("generating-started",()=>this.generating=!0),this.socket.on("generating-done",()=>this.generating=!1),this.socket.on("message-set-all",this.handleSetAllEvent.bind(this)),this.socket.on("message-set",this.handleSetEvent.bind(this)),this.socket.on("message-update",this.handleUpdateEvent.bind(this)),this.config.subscribe(r=>{var i;this.msgOrder.length===0&&((i=r.default_messages)==null?void 0:i.length)>0&&(this.handleSetAllEvent(r.default_messages),this.scroll.scroll("force"))}),this.msgMapping.subscribe(r=>{this.rendered.set(sn(r,this.msgOrder)),this.scroll.scroll("auto")}),He(()=>log(this.connected?"connected":"disconnected")),He(()=>{this.prompt.text,this.prompt.images.length,this.prompt.files.length,this.saveStateDebounced()}),this.config.subscribe(()=>this.saveStateDebounced()),this.msgMapping.subscribe(()=>this.saveStateDebounced());const s=yr(this.id);s&&this.setFromSerialized(s)}get generating(){return S(O(this,we))}set generating(e){R(O(this,we),A(e))}get connected(){return S(O(this,ve))}set connected(e){R(O(this,ve),A(e))}saveState(){setTimeout(()=>{this.generating||wr(this.id,this.serialize())})}serialize(){return{msgMapping:this.msgMapping.get(),msgOrder:this.msgOrder,prompt:this.prompt.serialize(),config:this.config.get()}}setFromSerialized(e){e.prompt&&this.prompt.set(e.prompt),e.config&&this.config.set(e.config),e.msgOrder&&e.msgMapping&&(e.msgOrder=e.msgOrder.filter(t=>t in e.msgMapping),e.msgMapping=mr(e.msgMapping,(t,s)=>e.msgOrder.includes(t)),this.setAllMessages(e.msgMapping,e.msgOrder))}reset(){this.handleSetAllEvent(this.config.get().default_messages??[])}upload(){this.prompt.upload()}stopGenerating(){this.generating=!1}sendMessage(){if(this.generating||this.prompt.isEmpty())return;const e=this.prompt.getContentParts(),t=e.length===1&&e[0].type==="text"?this.prompt.text:e;this.newUserMessage(t),this.prompt.clear(),this.startGenerating()}changeUserMessageAndSubmit(e,t){this.generating||(this.updateUserMessageContent(e,t),this.regenerateAfterId(e))}regenerateOnAgentResponse(e){if(this.generating)return;const t=this.rendered.get()[e-1];if(!t||t.type!=="user")throw new Error("Tried to regenerate on an index not preceded by a user message");this.regenerateAfterId(t.id)}renderAssistantMarkdown(e){return tn(e)}renderFunctionResult(e,t,s){var i,o;if(e===null)return null;const r=(o=(i=s[t])==null?void 0:i.result)==null?void 0:o.type;if(!r)return e;switch(r){case"html":return e;case"text":return e;case"plotly":return e;case"markdown":return tn(e);case"json":return W(Ce(Qt(e),"json"));default:return W(Ce(e,r))}}renderFunctionCallArgs(e,t,s){var i,o;if(!e)return"";const r=(o=(i=s[t])==null?void 0:i.arguments)==null?void 0:o.show_key_as_code;if(r&&r.key){const l=r.key,c=r.language??"plaintext",u=_r(e);if(u&&u[l]){const a=u[l],h=typeof a=="string"?a:JSON.stringify(a,null,2);return W(Ce(h,c))}}return W(Ce(Qt(e),"json"))}getArgsTitle(e,t){var r,i;const s=(i=(r=t[e])==null?void 0:r.arguments)==null?void 0:i.title;return W(s??"Arguments")}getResultTitle(e,t){var r,i;const s=(i=(r=t[e])==null?void 0:r.result)==null?void 0:i.title;return W(s??"Result")}renderFunctionHeader(e,t){var r;const s=(r=t[e])==null?void 0:r.header;return(s==null?void 0:s.show)===!1?null:W((s==null?void 0:s.text)??`Function call to **\`${e}()\`**`)}getFunctionResultType(e,t){var s,r;return((r=(s=t[e])==null?void 0:s.result)==null?void 0:r.type)??"text"}getFunctionCallStatus(e,t){const s=t&&e===null;return e&&dr(e)?"error":s?"progress":"complete"}userContentToText(e){if(typeof e=="string")return e;for(const t of e)if(t.type==="text")return t.text;return""}userContentToFiles(e){return typeof e=="string"?[]:e.filter(t=>t.type!=="text")}regenerateAfterId(e){this.removeAfterId(e),this.startGenerating()}startGenerating(){this.socket.emit("start-generating",{messages:this.oaiMessages()}),this.generating=!0,this.scroll.scroll("force"),this.rendered.set(sn(this.msgMapping.get(),this.msgOrder,!0))}oaiMessages(){return vi(this.msgMapping.get(),this.msgOrder)}newUserMessage(e){this.setMessage({id:Le(),role:"user",content:e})}updateUserMessageContent(e,t){this.msgMapping.update(s=>{const r=s[e];if(r.role!=="user")return console.error(`Invalid message update. Existing message '${e}' is not a user message.`),s;if(typeof r.content=="string")return r.content=t,s;for(const i of r.content)if(i.type==="text")return i.text=t,s;throw new Error(`Message ${e} has no text content part.`)})}removeAfterId(e){const t=this.msgOrder.indexOf(e);t!==-1&&this.removeAfterIndex(t)}removeAfterIndex(e){if(!this.msgOrder[e])return;const s=this.msgOrder.splice(e+1);this.msgMapping.update(r=>{for(const i of s)delete r[i];return r})}setAllMessages(e,t){Mn(this.msgOrder,t),this.msgMapping.set(e)}handleSetAllEvent(e){const{mapping:t,order:s}=bi(e);this.setAllMessages(t,s),this.scroll.scroll("force")}handleSetEvent(e){if(!this.generating)return;const t=Wn(e);if(!t)return this.errors.add("Client",`Invalid message: ${e}`);this.setMessage(t)}handleUpdateEvent(e){if(!this.generating)return;if(e.role&&e.role!=="assistant")return this.errors.add("Client",`Invalid message update: role must be assistant.: ${e}`);const t=e.id;return t?t in this.msgMapping.get()?this.updateExistingFromDelta(t,e):this.addNewFromDelta(t,e):this.errors.add("Client",`Invalid message update: id not defined.: ${e}`)}addNewFromDelta(e,t){const s=_i(e,t);if("error"in s)return this.errors.add("Client",s.error);this.setMessage(s)}updateExistingFromDelta(e,t){this.msgMapping.update(s=>{const r=s[e];return(r==null?void 0:r.role)==="assistant"?ki(r,t):this.errors.add("Client",`Invalid message update. Existing message '${e}' is not an assistant message.`),s})}setMessage(e){this.msgMapping.update(t=>(e.id in t||this.msgOrder.push(e.id),t[e.id]=e,t))}}we=new WeakMap,ve=new WeakMap;function sn(n,e,t=!1){var o;let s=e.map(l=>n[l]),r,i=[];for(;s.length>0&&(r=s.shift());){if(r.role==="user"){i.push({id:r.id,type:"user",content:r.content});continue}const l={type:"agent",parts:[]};for(s.unshift(r);s[0]&&s[0].role!=="user";){const c=s.shift(),u=c.role,a=c.content??"";if(u==="assistant"){l.parts.push({type:"content",content:a});const{tool_calls:f}=c;if(f&&f.length>0)for(let{id:p,function:{name:g,arguments:d}}of f)g=g??"",d=d??"",l.parts.push({type:"tool_call",id:p,name:g,arguments:d,result:null});continue}const h=c.tool_call_id;for(let f=l.parts.length-1;f>=0;f--){let p=l.parts[f];if(p.type==="tool_call"&&p.id===h){p.result=c.content;break}}}i.push(l)}return t&&((o=i[i.length-1])==null?void 0:o.type)==="user"&&i.push({type:"agent",parts:[{type:"content",content:""}]}),i}function Ei(n,e){yn(e,!0);let t=N(null);setTimeout(async()=>{R(t,A((await ir(()=>import("./Chat-CTJi3jJ0.js"),__vite__mapDeps([0,1]))).default))});const s="",r=new hi(s,{transports:["websocket"]});let i=A(kr());He(()=>xr(i?"add":"remove","dark"));const o=new Ti("chat",r);var l=Ht(n),c=Bt(l);Ws(c,()=>S(t),u=>{var a=Ht(u),h=Bt(a);Gs(h,()=>S(t),f=>{f(h,{chat:o})}),Zt(u,a)},null),Zt(n,l),wn()}globalThis.log=(...n)=>console.log(...n);nr(Ei,{target:document.getElementById("app")});export{Qs as $,qe as A,N as B,Di as C,He as D,Ci as E,eo as F,Yi as G,Dt as H,Qi as I,Xi as J,wn as K,S as L,ys as M,Ki as N,to as O,yn as P,ro as Q,er as R,D as S,Zs as T,Vi as U,lo as V,Ws as W,Zi as X,Gi as Y,ut as Z,io as _,v as a,Fi as a0,Zt as a1,R as a2,A as a3,Wi as a4,js as a5,Ht as a6,Bt as a7,oo as a8,so as a9,Ji as aa,Xs as ab,Ks as ac,Li as ad,no as ae,Pi as af,y as b,ji as c,F as d,Hi as e,qs as f,bt as g,Te as h,ee as i,Ai as j,_n as k,Ni as l,Bi as m,Ts as n,Ui as o,tt as p,Oi as q,E as r,G as s,se as t,Hs as u,K as v,Ii as w,zi as x,qi as y,Mi as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Chat-CTJi3jJ0.js","assets/Chat-b298GGyt.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
